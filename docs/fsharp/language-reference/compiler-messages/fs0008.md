---
description: 'Дополнительные сведения о: FS0008: неопределенное приведение среды выполнения'
title: Ошибка компилятора FS0008
ms.date: 01/27/2020
f1_keywords:
- FS0008
helpviewer_keywords:
- FS0008
ms.openlocfilehash: aa7ab1f3a62e43088d34f69a24bbb03caddf2196
ms.sourcegitcommit: ddf7edb67715a5b9a45e3dd44536dabc153c1de0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/06/2021
ms.locfileid: "99631024"
---
# <a name="fs0008-indeterminate-runtime-coercion"></a>FS0008: неопределенное приведение среды выполнения

Это сообщение выдается, когда шаблон проверки типа используется для сопоставления значения, но приведение не может быть безопасно проверено во время компиляции, поскольку значение типа не было определено компилятором. Это часто происходит при сопоставлении с параметром функции, тип которого был выведен.  Ниже приведен пример кода.

[!code-fsharp[FS0008-error](~/samples/snippets/fsharp/compiler-messages/fs0008.fsx#L2-L5)]

Этот код приводит к следующему результату:

```text
This runtime coercion or type test from type
    'a
to
    string
involves an indeterminate type based on information prior to this program point. Runtime type tests are not allowed on some types. Further type annotations are needed.
```

В этом коде параметр функции `x` не имел выводимого для него типа. Это может быть вызвано любыми причинами, в зависимости от параметра, которые не используются в методах, предоставляющих алгоритму вывода типа любую информацию, в функцию не вызывается в любом месте кода.  Поскольку тип `x` не был определен, компилятор не может гарантировать, что тип может `x` быть приведен в виде строки.  Поскольку компилятор не может гарантировать, что это приведение может быть выполнено во время выполнения, оно выдает это сообщение.

Чтобы исправить это сообщение, необходимо предоставить компилятору дополнительные сведения о типе значения, для которого используется шаблон-проверка типа.

Одним из способов исправления приведенного выше кода является прямое применение типа к `x` параметру:

[!code-fsharp[FS0008-x-given-type](~/samples/snippets/fsharp/compiler-messages/fs0008.fsx#L8-L11)]

В этом коде `x` параметру присваивается тип `obj` , а так как может `obj` быть проверено на тип, чтобы определить, является ли базовое представление `string` , функция теперь компилируется.

Другим способом исправления ошибочного кода является использование другого способа преобразования `x` параметра в `string` :

[!code-fsharp[FS0008-x-given-type](~/samples/snippets/fsharp/compiler-messages/fs0008.fsx#L14-L15)]

В этом коде использование `string` функции для `x` параметра задает компилятору достаточно сведений для определения типа `x` как `string` , поэтому Ошибка разрешается путем рефакторинга функции.
