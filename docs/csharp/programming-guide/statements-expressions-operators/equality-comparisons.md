---
title: Руководство по программированию на C#. Проверка равенства
description: Сведения о сравнениях на равенство. Изучите описание равенства значений и равенства ссылок и ознакомьтесь с дополнительными ресурсами.
ms.date: 07/20/2015
helpviewer_keywords:
- object equality [C#]
ms.assetid: 10b865ea-4e7b-4127-9242-c9b8f57d9f04
ms.openlocfilehash: 3bc41e9adeff23dc385d0888163f9edf04772595
ms.sourcegitcommit: 9c589b25b005b9a7f87327646020eb85c3b6306f
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/06/2021
ms.locfileid: "102259628"
---
# <a name="equality-comparisons-c-programming-guide"></a>Проверка равенства (руководство по программированию на C#)

Иногда возникает необходимость проверить равенство двух значений. В некоторых случаях проверяется *равенство значений*, которое также называют их *эквивалентностью*, что означает, что содержащиеся в двух переменных значения равны. В других случаях требуется определить, ссылаются ли две переменные на один и тот же объект в памяти. Такой тип равенства называется *равенством ссылок* или *идентичностью*. В этом разделе описаны эти два типа равенства и приведены ссылки на разделы, содержащие дополнительные сведения.  
  
## <a name="reference-equality"></a>Равенство ссылок

 Равенство ссылок означает, что два объекта ссылаются на один и тот же объект. Это может произойти при простом присваивании, как показано в следующем примере.  
  
 [!code-csharp[csProgGuideStatements#18](~/samples/snippets/csharp/VS_Snippets_VBCSharp/csProgGuideStatements/CS/Statements.cs#18)]  
  
 В этом фрагменте кода создается два объекта, но после инструкции присваивания они оба ссылаются на один и тот же объект. Поэтому между ними устанавливается равенство ссылок. Метод <xref:System.Object.ReferenceEquals%2A> позволяет определить, ссылаются ли две ссылки на один и тот же объект.  
  
Концепция равенства ссылок применима только к ссылочным типам. Объекты типа значения не могут иметь равенство ссылок, поскольку переменной присваивается экземпляр типа значения, создается копия этого значения. Поэтому две распакованные структуры никогда не могут ссылаться на одно и то же расположение в памяти. Более того, для сравнения двух типов значений <xref:System.Object.ReferenceEquals%2A> всегда будет возвращаться результат `false`, даже если содержащиеся в объектах значения идентичны. Это связано с тем, что каждая переменная запакована в отдельный экземпляр объекта. См. сведения в руководстве по [тестированию на равенство (идентичность) ссылок](./how-to-test-for-reference-equality-identity.md).

## <a name="value-equality"></a>Равенство значений

 Равенство значений означает, что два объекта содержат одинаковое значение или одинаковые значения. Для примитивных типов значений, таких как [int](../../language-reference/builtin-types/integral-numeric-types.md) или [bool](../../language-reference/builtin-types/bool.md), проверка на равенство значений представляет собой очевидную задачу. Можно использовать оператор [==](../../language-reference/operators/equality-operators.md#equality-operator-), как показано в следующем примере.  
  
```csharp  
int a = GetOriginalValue();  
int b = GetCurrentValue();  
  
// Test for value equality.
if (b == a)
{  
    // The two integers are equal.  
}  
```  
  
 Для большинства других типов проверка равенства значений является более сложной, поскольку при этом необходимо понимать, как равенство определено в типе. Для всех классов и структур, имеющих несколько полей или свойств, равенство значений часто определяется как равенство значений всех полей и свойств. Например, два объекта `Point` могут быть определены как равные, если значение pointA.X равняется pointB.X, а значение pointA.Y равняется pointB.Y. Для записей равенство значений означает, что две переменные типа "запись" равны, если совпадают типы и все значения свойств и полей.  
  
Однако общего требования о том, что равенство должно определяться на основе всех полей в типе, нет. Оно может определяться и на основе части полей. При сравнении значений типов сторонних разработчиков необходимо понимать, как именно реализовано равенство для таких типов. См. сведения об определении равенства значений в собственных классах и структурах в руководстве по [определению равенства значений для типа](./how-to-define-value-equality-for-a-type.md).
  
### <a name="value-equality-for-floating-point-values"></a>Равенство значений с плавающей запятой

 Проверка равенства значений с плавающей запятой ([double](../../language-reference/builtin-types/floating-point-numeric-types.md) и [float](../../language-reference/builtin-types/floating-point-numeric-types.md)) представляет проблему из-за неточности арифметических операций с плавающей запятой на двоичных компьютерах. Дополнительные сведения можно найти в заметках в разделе <xref:System.Double?displayProperty=nameWithType>.  
  
## <a name="related-topics"></a>См. также  
  
|Заголовок|Описание|  
|-----------|-----------------|
|[Проверка на равенство ссылок (идентичность)](./how-to-test-for-reference-equality-identity.md)|Описание процедуры проверки равенства ссылок двух переменных.|
|[Определение равенства значений для типа](./how-to-define-value-equality-for-a-type.md)|Описание предоставления пользовательского определения равенства значений для типа.|
|[Руководство по программированию на C#](../index.md)|Ссылки на подробные сведения о важных элементах языка C#, а также об элементах, доступных в этом языке благодаря .NET.|
|[Типы](../types/index.md)|Сведения о системе типов C# и ссылки на дополнительные сведения.|
|[Записи](../classes-and-structs/records.md)|Предоставляет сведения о типах записей, которые по умолчанию проверяют равенство значений.|

## <a name="see-also"></a>См. также раздел

- [Руководство по программированию на C#](../index.md)
