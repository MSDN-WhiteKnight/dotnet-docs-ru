---
title: Руководство по программированию на C#. Делегаты
description: Делегат в C# — это тип, который представляет ссылки на методы со списком параметров и типом возвращаемого значения. Делегаты используются для передачи методов в качестве аргументов к другим методам.
ms.date: 02/02/2021
helpviewer_keywords:
- C# language, delegates
- delegates [C#]
ms.assetid: 97de039b-c76b-4b9c-a27d-8c1e1c8d93da
ms.openlocfilehash: 0da404146f09028754087c5e24bd05b9289a4220
ms.sourcegitcommit: 10e719780594efc781b15295e499c66f316068b8
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/14/2021
ms.locfileid: "100456930"
---
# <a name="delegates-c-programming-guide"></a>Делегаты (Руководство по программированию на C#)

[Делегат](../../language-reference/builtin-types/reference-types.md) — это тип, который представляет ссылки на методы с определенным списком параметров и типом возвращаемого значения. При создании экземпляра делегата этот экземпляр можно связать с любым методом с совместимой сигнатурой и типом возвращаемого значения. Метод можно вызвать (активировать) с помощью экземпляра делегата.

Делегаты используются для передачи методов в качестве аргументов к другим методам. Обработчики событий — это ничто иное, как методы, вызываемые с помощью делегатов. При создании пользовательского метода класс (например, элемент управления Windows) может вызывать этот метод при появлении определенного события. В следующем примере показано объявление делегата:

[!code-csharp[csProgGuideDelegates#20](~/samples/snippets/csharp/VS_Snippets_VBCSharp/csProgGuideDelegates/CS/Delegates.cs#20)]

Делегату можно назначить любой метод из любого доступного класса или структуры, соответствующей типу делегата. Этот метод должен быть статическим методом или методом экземпляра. Такая гибкость позволяет программно изменять вызовы метода, а также включать новый код в существующие классы.

> [!NOTE]
> В контексте перегрузки метода его сигнатура не содержит возвращаемое значение. Однако в контексте делегатов сигнатура метода содержит возвращаемое значение. Другими словами, метод должен иметь тот же возвращаемый тип, что и делегат.

Благодаря возможности ссылаться на метод как на параметр делегаты идеально подходят для определения методов обратного вызова. Можно написать метод, сравнивающий два объекта в приложении. Этот метод можно использовать в делегате для алгоритма сортировки. Поскольку код сравнения отделен от библиотеки, метод сортировки может быть более общим.

В C# 9 для похожих сценариев, где требуется больший контроль над соглашением о вызовах, были добавлены [указатели на функции](~/_csharplang/proposals/csharp-9.0/function-pointers.md). Код, связанный с делегатом, вызывается с помощью виртуального метода, добавленного к типу делегата. Используя указатели функций, можно указать другие соглашения.

## <a name="delegates-overview"></a>Общие сведения о делегатах

Делегаты имеют следующие свойства.

- Делегаты подобны указателям на функции в C++, но являются полностью объектно-ориентированными и, в отличие от указателей C++ на функции-члены, инкапсулируют экземпляр объекта вместе с методом.
- Делегаты допускают передачу методов в качестве параметров.
- Делегаты можно использовать для определения методов обратного вызова.
- Делегаты можно связывать друг с другом; например, при появлении одного события можно вызывать несколько методов.
- Точное соответствие методов типу делегата не требуется. Дополнительные сведения см. в разделе [Использование вариативности в делегатах](../concepts/covariance-contravariance/using-variance-in-delegates.md).
- Для краткой записи встроенных блоков кода введены лямбда-выражения. В результате компиляции лямбда-выражений (в определенном контексте) получаются типы делегатов. Дополнительные сведения о лямбда-выражениях см. в разделе [Лямбда-выражения](../../language-reference/operators/lambda-expressions.md).

## <a name="in-this-section"></a>В этом разделе

- [Использование делегатов](./using-delegates.md)
- [Использование делегатов вместо интерфейсов (руководство по программированию на C#)](/previous-versions/visualstudio/visual-studio-2010/ms173173(v=vs.100))
- [Делегаты с именованными методами и делегаты с анонимными методами](./delegates-with-named-vs-anonymous-methods.md)
- [Использование расхождения в делегатах](../concepts/covariance-contravariance/using-variance-in-delegates.md)
- [Практическое руководство. Объединение делегатов (многоадресные делегаты)](./how-to-combine-delegates-multicast-delegates.md)
- [Практическое руководство. Объявление, создание и использование делегата](./how-to-declare-instantiate-and-use-a-delegate.md)

## <a name="c-language-specification"></a>Спецификация языка C#

Дополнительные сведения см. в разделе [Делегаты](~/_csharplang/spec/delegates.md) в [Спецификации языка C#](/dotnet/csharp/language-reference/language-specification/introduction). Спецификация языка является предписывающим источником информации о синтаксисе и использовании языка C#.

## <a name="featured-book-chapters"></a>Главы в популярных книгах

- [Делегаты, события и лямбда-выражения](/previous-versions/visualstudio/visual-studio-2008/ff518994(v=orm.10)) в [справочном руководстве по C# 3.0, третье издание. Более 250 решений для программистов на C# 3.0](/previous-versions/visualstudio/visual-studio-2008/ff518995(v=orm.10))
- [Делегаты и события](/previous-versions/visualstudio/visual-studio-2008/ff652490(v=orm.10)) в [изучении C# 3.0. Овладение основными понятиями C# 3.0](/previous-versions/visualstudio/visual-studio-2008/ff652493(v=orm.10))

## <a name="see-also"></a>См. также

- <xref:System.Delegate>
- [Руководство по программированию на C#](../index.md)
- [События](../events/index.md)
