---
description: 'Узнайте подробнее о: Разработка структур'
title: Разработка структур
ms.date: 10/22/2008
helpviewer_keywords:
- class library design guidelines [.NET Framework], structures
- deallocating structures
- allocating structures
- value types, structures
- structure design
- type design guidelines, structures
- structures [.NET Framework], design guidelines
ms.assetid: 1f48b2d8-608c-4be6-9ba4-d8f203ed9f9f
ms.openlocfilehash: a28dd3e452d22e61d95ec521fdbde6539e38ed78
ms.sourcegitcommit: ddf7edb67715a5b9a45e3dd44536dabc153c1de0
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/06/2021
ms.locfileid: "99641906"
---
# <a name="struct-design"></a>Разработка структур

Тип значения общего назначения чаще всего называется структурой. Он является ключевым словом C#. В этом разделе приводятся рекомендации по разработке общих структур.

 ❌НЕ предоставляйте для структуры конструктор без параметров.

 Следуя этой рекомендации, можно создавать массивы структур, не запуская конструктор для каждого элемента массива. Обратите внимание, что C# не разрешает структурам использовать конструкторы без параметров.

 ❌ НЕ ОПРЕДЕЛЯЙТЕ изменяемые типы значений.

 Изменяемые типы значений имеют несколько проблем. Например, когда метод получения свойства возвращает тип значения, вызывающий объект получает копию. Так как копия создается неявным образом, разработчики могут не знать, что они изменяют копию, а не исходное значение. Кроме того, для некоторых языков (в частности динамических языков) есть проблемы с использованием изменяемых типов значений, так как даже локальные переменные при разыменовании приводят к созданию копии.

 ✔️ Убедитесь, что состояние, в котором все данные экземпляра имеют значение 0, false или NULL (по необходимости), допустимо.

 Это предотвратит случайное создание недопустимых экземпляров во время создания массива структур.

 ✔️ РЕАЛИЗУЙТЕ <xref:System.IEquatable%601> для типов значений.

 Метод <xref:System.Object.Equals%2A?displayProperty=nameWithType> для типов значений приводит к тому, что упаковка-преобразование и реализация по умолчанию не очень эффективны, так как используется отражение. Метод <xref:System.IEquatable%601.Equals%2A> может иметь гораздо более высокую производительность. Его можно реализовать таким образом, чтобы избежать упаковки-преобразования.

 ❌ НЕ расширяйте явным образом <xref:System.ValueType>. На самом деле это не рекомендуется для большинства языков.

 Как правило, структуры могут быть очень полезными, но их следует использовать только для небольших, отдельных, неизменяемых значений, которые не будут часто упаковываться.

 *Фрагменты: © Корпорация Майкрософт (Microsoft Corporation), 2005, 2009. Все права защищены.*

 *Перепечатано с разрешения Pearson Education, Inc. из книги [Инфраструктура программных проектов. Соглашения, идиомы и шаблоны для многократно используемых библиотек .NET (2-е издание)](https://www.informit.com/store/framework-design-guidelines-conventions-idioms-and-9780321545619), авторы: Кржиштоф Цвалина (Krzysztof Cwalina) и Брэд Абрамс (Brad Abrams). Книга опубликована 22 октября 2008 г. издательством Addison-Wesley Professional в рамках серии, посвященной разработке для Microsoft Windows.*

## <a name="see-also"></a>См. также

- [Рекомендации по разработке типов](type.md)
- [Рекомендации по проектированию на основе Framework](index.md)
- [Выбор между классом и структурой](choosing-between-class-and-struct.md)
