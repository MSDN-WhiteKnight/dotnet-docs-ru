---
title: Различия в ведении журнала между ASP.NET MVC и ASP.NET Core
description: Чем отличается ведение журнала между ASP.NET MVC и приложениями веб-API и ASP.NET Core приложениями?
author: ardalis
ms.date: 11/13/2020
ms.openlocfilehash: 0ad12463c8d13d13516ab027e56f809b67f713e4
ms.sourcegitcommit: 42d436ebc2a7ee02fc1848c7742bc7d80e13fc2f
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/04/2021
ms.locfileid: "102401738"
---
# <a name="logging-differences-between-aspnet-mvc-and-aspnet-core"></a>Различия в ведении журнала между ASP.NET MVC и ASP.NET Core

Ведение журнала приложений предоставляет важную диагностическую информацию, особенно для приложений, выполняющихся в рабочей среде. ASP.NET Core вводит новую систему для добавления стандартизованного ведения журнала в любое приложение. Существующие приложения ASP.NET MVC и веб-API, скорее всего, используют сторонние решения для ведения журналов, которые, вероятно, продолжают поддерживаться на ASP.NET Core.

## <a name="aspnet-mvc-logging"></a>Ведение журнала MVC ASP.NET

В приложениях ASP.NET MVC и веб-API нет встроенного решения для ведения журнала. Вместо этого в большинстве приложений используются сторонние решения для ведения журналов, такие как [log4net](https://www.nuget.org/packages/log4net/), [NLog](https://www.nuget.org/packages/NLog/)или [Serilog](https://www.nuget.org/packages/Serilog). Многие команды также позволяют настроить собственное решение для ведения журнала. Платформы ведения журналов обычно поддерживают несколько "приемников" (или целевых объектов или дописывать) для выходных данных журнала, таких как текстовые файлы, базы данных или даже сообщения электронной почты. Они используют конфигурацию для определения уровней сообщений журнала, из которых компоненты системы направляются в разные приемники. Когда вы узнаете, как перенести ведение журнала приложения в .NET Core, проверьте, как выполняется и [настроено](configuration-differences.md) ведение журнала в приложении.

## <a name="aspnet-core-logging"></a>Ведение журнала ASP.NET Core

В ASP.NET Core [ведение журнала — это встроенная функция](/aspnet/core/fundamentals/logging/) , которая может быть настроена и расширена при запуске приложения. Сторонние средства ведения журнала, включая упомянутые выше, можно интегрировать с ASP.NET Core для улучшения его функциональности.

Ведение журнала ASP.NET Core использует категории и уровни для управления журналом и способом. Классы обычно используют экземпляры `ILogger<T>` интерфейса, а тип класса используется в качестве универсального `T` типа. В этом сценарии в качестве категории используется полное имя класса. Средства ведения журнала также могут создаваться с пользовательской категорией с помощью `ILoggerFactory` . Уровни журнала находятся в диапазоне от наиболее подробных, `Trace` до наиболее важных `Critical` . С помощью конфигурации приложения могут указывать, какой минимальный уровень ведения журнала должен включаться в каждую категорию (с подстановочными знаками).

Стандартная конфигурация ведения журнала может вести журнал `Information` и более подробную информацию по умолчанию, но только `Warning` из `Microsoft` категорий с префиксами или выше.

```json
{
  "Logging": {
    "LogLevel": {
      "Default": "Information",
      "Microsoft": "Warning"
    }
  }
}
```

Поддержка ведения журнала в ASP.NET Core является обширной и гибкой. Дополнительные сведения см. в [документах](/aspnet/core/fundamentals/logging/).

## <a name="migrate-logging"></a>Миграция журналов

Способ переноса ведения журнала платформа .NET Framework приложения в .NET Core зависит от того, как приложение регистрируется сейчас. Если используется сторонний пакет NuGet, обратитесь к документации по обновлению этого пакета. Скорее всего, путь обновления будет довольно прост. Если вы используете собственное решение для ведения журнала, выполните одно из следующих действий.

1. Самостоятельное перемещение решения для ведения журнала
1. Переход на стороннее решение для ведения журналов
1. Используйте встроенную поддержку ведения журнала в ASP.NET Core

Вы можете ссылаться на `Microsoft.Extensions.Logging` пакет из платформа .NET Framework приложений, если они используют NuGet 4,3 или более поздней версии и находятся на платформа .NET Framework 4.6.1 или более поздней версии. После того как приложение ссылалось на этот пакет, вы можете преобразовать свои инструкции ведения журнала, чтобы использовать новые расширения перед переносом приложения в .NET Core. Это может обеспечить пошаговое выполнение полной миграции, так как приложение может продолжать работу на платформа .NET Framework при ведении журнала с помощью нового пакета расширений.

## <a name="references"></a>Ссылки

- [Ведение журнала в .NET Core и ASP.NET Core](/aspnet/core/fundamentals/logging/)
- [Пакет NuGet Microsoft. Extensions. Logging](https://www.nuget.org/packages/microsoft.extensions.logging/)

>[!div class="step-by-step"]
>[Назад](middleware-modules-handlers.md)
>[Вперед](routing-differences.md)
