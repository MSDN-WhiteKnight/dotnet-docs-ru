---
title: Настройка правил анализа кода
description: Узнайте, как настроить правила анализа кода в файле конфигурации анализатора.
ms.date: 09/24/2020
ms.topic: conceptual
no-loc:
- EditorConfig
ms.openlocfilehash: 9c09fc381a161a9deea012d98d06ab57f2f7345e
ms.sourcegitcommit: 10e719780594efc781b15295e499c66f316068b8
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/14/2021
ms.locfileid: "100480548"
---
# <a name="configuration-options-for-code-analysis"></a>Параметры конфигурации для анализа кода

Правила анализа кода имеют различные параметры конфигурации. Эти параметры указываются в виде пар "ключ-значение" в [файле конфигурации анализатора](configuration-files.md) с использованием синтаксиса `<option key> = <option value>` .

Наиболее распространенным параметром, который вы настраиваете, является [серьезность правила](#severity-level). Уровень серьезности можно настроить для всех правил анализатора, включая [Правила качества кода](quality-rules/index.md) и [правила стиля кода](style-rules/index.md). Например, чтобы включить правило как предупреждение, можно добавить следующую пару "ключ-значение" в EditorConfig файл.

`dotnet_diagnostic.<rule ID>.severity = warning`

Кроме того, можно настроить дополнительные параметры для настройки поведения правила.

- Правила качества кода имеют [Дополнительные параметры](code-quality-rule-options.md) для настройки поведения, такие как имена методов, к которым должно применяться правило.
- Правила стиля кода имеют [Параметры пользовательского стиля кода](code-style-rule-options.md).
- Сторонние правила анализатора могут определять собственные параметры конфигурации, имена пользовательских ключей и форматы значений.

Ниже приведен синтаксис для настройки важности определенного правила в [файле конфигурации анализатора](configuration-files.md) .

```ini
dotnet_diagnostic.<rule ID>.severity = <severity>
```

## <a name="general-options"></a>Общие параметры

Эти параметры применяются к анализу кода в целом. Они не могут применяться только к одному правилу или набору правил.

### <a name="exclude-generated-code"></a>Исключить созданный код

Можно настроить дополнительные файлы и папки для обработки в виде созданного кода, добавив `generated_code = true | false` запись в [файл конфигурации](configuration-files.md). Предупреждения анализатора кода .NET не полезны для созданных файлов кода, таких как создаваемые конструктором файлы, которые пользователи не могут изменять для устранения нарушений. В большинстве случаев анализаторы кода пропускают созданные файлы кода и не сообщают о нарушениях этих файлов.

По умолчанию файлы с определенными расширениями или автоматически создаваемыми заголовками обрабатываются как сформированные файлы кода. Например, имя файла, завершающее `.designer.cs` или `.generated.cs` , считается сгенерированным кодом. Этот параметр конфигурации позволяет указать дополнительные шаблоны именования.

Например, чтобы обрабатывать все файлы, имена которых оканчиваются на `.MyGenerated.cs` созданный код, добавьте следующую запись:

```ini
[*.MyGenerated.cs]
generated_code = true
```

## <a name="rule-specific-options"></a>Параметры, зависящие от правила

Параметры, относящиеся к конкретному правилу, могут применяться к одному правилу, набору правил или всем правилам. Параметры, зависящие от правила, включают:

- [Уровень серьезности правила](#severity-level)
- [Параметры, относящиеся к правилам *качества кода*](code-quality-rule-options.md)

### <a name="severity-level"></a>Степень серьезности

В следующей таблице показаны различные уровни серьезности правил, которые можно настроить для всех правил анализатора, включая правила [качества кода](quality-rules/index.md) и [стиля кода](style-rules/index.md) .

| Значение конфигурации серьезности | Реакция на событие во время сборки |
|-|-|
| `error` | Нарушения отображаются как *ошибки* сборки и вызывают сбой сборок.|
| `warning` | Нарушения отображаются как *предупреждения* сборки, но не вызывают сбои сборок (если только у вас не установлен параметр, чтобы обрабатывать предупреждения как ошибки). |
| `suggestion` | Нарушения отображаются как *сообщения* сборки и как предложения в интегрированной среде разработки Visual Studio. |
| `silent` | Нарушения не видны пользователю. |
| `none` | Правило подавляется полностью. |
| `default` | По умолчанию используется серьезность правила. Уровни серьезности по умолчанию для каждого выпуска .NET перечислены в [репозитории Roslyn-Analyzers](https://github.com/dotnet/roslyn-analyzers/blob/master/src/NetAnalyzers/Core/AnalyzerReleases.Shipped.md). В этой таблице "Disabled" соответствует `none` , "Hidden" соответствует `silent` , а "info" соответствует `suggestion` . |

> [!TIP]
> Сведения о том, как на уровне серьезности правил в Visual Studio, см. в разделе [уровни серьезности](/visualstudio/ide/editorconfig-language-conventions#severity-levels).

#### <a name="scope"></a>Область

Чтобы задать серьезность правила для одного правила, используйте следующий синтаксис.

```ini
dotnet_diagnostic.<rule ID>.severity = <severity value>
```

Чтобы задать серьезность правила по умолчанию для [категории правил](categories.md), используйте следующий синтаксис. Категория для каждого правила предоставляется на страницах ссылок на отдельные правила, например [CA1000](quality-rules/ca1000.md).

```ini
dotnet_analyzer_diagnostic.category-<rule category>.severity = <severity value>
```

Чтобы задать серьезность правила по умолчанию для всех правил анализатора, используйте следующий синтаксис.

```ini
dotnet_analyzer_diagnostic.severity = <severity value>
```

> [!IMPORTANT]
> При настройке уровня серьезности для нескольких правил с одной записью либо для *категории* правил, либо для *всех* правил, уровень серьезности применяется только к правилам, [включенным по умолчанию](https://github.com/dotnet/roslyn-analyzers/blob/master/src/NetAnalyzers/Core/AnalyzerReleases.Shipped.md). Чтобы включить правила, отключенные по умолчанию, необходимо выполнить одно из следующих действий.
>
> - Добавьте явную `dotnet_diagnostic.<rule ID>.severity = <severity>` запись конфигурации для каждого правила.
> - Включите *все* правила, задав [\<AnalysisMode>](../../core/project-sdk/msbuild-props.md#analysismode) для значение `AllEnabledByDefault` .

#### <a name="precedence"></a>Приоритет

При наличии нескольких записей конфигурации серьезности, которые можно применить к одному и тому же ИДЕНТИФИКАТОРу правила, приоритет выбирается в следующем порядке:

- Запись для отдельного правила по ИДЕНТИФИКАТОРу имеет приоритет над записью для категории.
- Запись для категории имеет приоритет над записью для всех правил анализатора.

Рассмотрим следующий пример, где [CA1822](/visualstudio/code-quality/ca1822) имеет категорию "производительность":

```ini
[*.cs]
dotnet_diagnostic.CA1822.severity = error
dotnet_analyzer_diagnostic.category-performance.severity = warning
dotnet_analyzer_diagnostic.severity = suggestion
```

В предыдущем примере все три записи серьезности применимы к CA1822. Однако при использовании указанных правил приоритета первая запись на основе идентификатора правила переносится на следующие записи. В этом примере CA1822 будет иметь действительный уровень серьезности `error` . Все остальные правила в категории "производительность" будут иметь серьезность `warning` .

Сведения о приоритетах между файлами см. в [разделе приоритет статьи файлы конфигурации](configuration-files.md#precedence).
