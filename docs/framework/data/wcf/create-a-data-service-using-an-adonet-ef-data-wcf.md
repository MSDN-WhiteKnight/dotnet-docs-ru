---
description: Дополнительные сведения о том, как создать службу данных с помощью ADO.NET Entity Framework источника данных (службы данных WCF).
title: Практическое руководство. Создание службы данных с использованием источника данных Entity Framework ADO.NET (службы данных WCF)
ms.date: 08/24/2018
helpviewer_keywords:
- WCF Data Services, providers
- WCF Data Services, Entity Framework
ms.assetid: 6d11fec8-0108-42f5-8719-2a7866d04428
ms.openlocfilehash: aea96c3953ec990b5f70a9702961512332330c6e
ms.sourcegitcommit: ddf7edb67715a5b9a45e3dd44536dabc153c1de0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/06/2021
ms.locfileid: "99766213"
---
# <a name="how-to-create-a-data-service-using-an-adonet-entity-framework-data-source-wcf-data-services"></a>Практическое руководство. Создание службы данных с использованием источника данных Entity Framework ADO.NET (службы данных WCF)

[!INCLUDE [wcf-deprecated](~/includes/wcf-deprecated.md)]

Службы данных WCF предоставляет данные сущности в качестве службы данных. Эти данные сущности предоставляются платформой ADO. Нетентити, если источником данных является реляционная база данных. Данный раздел иллюстрирует создание модели данных на основе Entity Framework в веб-приложении Visual Studio, основанном на существующей базе данных, и использование этой модели данных для создания новой службы данных.

Среда Entity Framework предоставляет также программу командной строки, формирующую модель Entity Framework вне проекта Visual Studio. Дополнительные сведения см. в разделе [инструкции. использование EdmGen.exe для создания файлов модели и сопоставления](../adonet/ef/how-to-use-edmgen-exe-to-generate-the-model-and-mapping-files.md).

## <a name="to-add-an-entity-framework-model-that-is-based-on-an-existing-database-to-an-existing-web-application"></a>Добавление модели Entity Framework на основе существующей базы данных в существующее веб-приложение

1. В меню **проект** выберите команду **Добавить**  >  **новый элемент**.

2. В области **шаблоны** щелкните категорию **данных** , а затем выберите **ADO.NET EDM**.

3. Введите имя модели и нажмите кнопку **Добавить**.

     Открывается первая страница мастера моделей EDM.

4. В диалоговом окне **Выбор содержимого модели** выберите **создать из базы данных**. Затем нажмите кнопку **Далее**.

5. Нажмите кнопку **создать подключение** .

6. В диалоговом окне **Свойства соединения** введите имя сервера, выберите метод проверки подлинности, введите имя базы данных и нажмите кнопку **ОК**.

     В диалоговом окне **Выбор подключения к данным** будут обновлены параметры подключения к базе данных.

7. Убедитесь, что установлен флажок **сохранить параметры подключения сущности в App.Config как:** . Затем нажмите кнопку **Далее**.

8. В диалоговом окне **Выбор объектов базы данных** выберите все объекты базы данных, которые планируется предоставить в службе данных.

    > [!NOTE]
    > Объекты, включенные в модель данных, не предоставляются службой данных автоматически. Они должны явно предоставляться самой службой. Дополнительные сведения см. [в разделе Настройка службы данных](configuring-the-data-service-wcf-data-services.md).

9. Чтобы завершить работу мастера, нажмите кнопку **Готово**.

     При этом создается модель данных по умолчанию на основе указанной базы данных. Entity Framework позволяет настроить модель данных. Дополнительные сведения см. в разделе [EDM Tools Tasks](/previous-versions/dotnet/netframework-4.0/bb738480(v=vs.100)).

## <a name="to-create-the-data-service-by-using-the-new-data-model"></a>Создание службы данных с использованием новой модели данных

1. Откройте в Visual Studio файл EDMX, представляющий модель данных.

2. В **обозревателе моделей** щелкните правой кнопкой мыши модель, выберите пункт **свойства**, а затем запишите имя контейнера сущностей.

3. В **Обозреватель решений** щелкните правой кнопкой мыши имя проекта ASP.NET и выберите команду **Добавить**  >  **новый элемент**.

4. В диалоговом окне **Добавление нового элемента** выберите шаблон **WCF Data Service** в категории **веб** .

   ![Шаблон элемента службы данных WCF в Visual Studio 2015](./media/wcf-data-service-item-template.png)

   > [!NOTE]
   > Шаблон **службы данных WCF** доступен в visual Studio 2015, но не в visual Studio 2017 или более поздней версии.

5. Укажите имя службы и нажмите кнопку **ОК**.

     В Visual Studio для новой службы создаются файлы разметки и кодов XML. По умолчанию открывается окно редактора кода.

6. В коде службы данных замените комментарий `/* TODO: put your data source class name here */` в определении класса, задающего службу данных, типом, порожденным от класса <xref:System.Data.Objects.ObjectContext> и являющимся контейнером сущностей модели данных, который был отмечен на шаге 2.

7. Включите в коде службы данных доступ авторизованных клиентов к наборам сущностей, предоставляемым службой данных. Дополнительные сведения см. [в разделе Создание службы данных](creating-the-data-service.md).

8. Чтобы протестировать службу данных Northwind. svc с помощью веб-браузера, следуйте инструкциям в разделе [обращение к службе из веб-браузера](accessing-the-service-from-a-web-browser-wcf-data-services-quickstart.md).

## <a name="see-also"></a>См. также

- [Определение служб данных WCF](defining-wcf-data-services.md)
- [Поставщики служб данных](data-services-providers-wcf-data-services.md)
- [Практическое руководство. Создание службы данных с использованием поставщика отражений](create-a-data-service-using-rp-wcf-data-services.md)
- [Практическое руководство. Создание службы данных с использованием источника данных LINQ to SQL](create-a-data-service-using-linq-to-sql-wcf.md)
