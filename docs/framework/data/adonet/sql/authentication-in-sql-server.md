---
title: Аутентификация в SQL Server
description: Сведения о проверке подлинности с помощью SQL Server для ADO.NET, включая режим проверки подлинности Windows и смешанный режим.
ms.date: 05/22/2018
ms.assetid: 646ddbf5-dd4e-4285-8e4a-f565f666c5cc
ms.openlocfilehash: a1ecc0debd584797f72a89318aadc6ccc8a41062
ms.sourcegitcommit: f0fc5db7bcbf212e46933e9cf2d555bb82666141
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/17/2021
ms.locfileid: "100581932"
---
# <a name="authentication-in-sql-server"></a>Аутентификация в SQL Server

SQL Server поддерживает два режима проверки подлинности: режим проверки подлинности Windows и режим смешанной проверки подлинности.  
  
- Режим проверки подлинности Windows является режимом по умолчанию. Поскольку эта модель безопасности SQL Server тесно интегрирована с Windows, часто ее называют встроенной функцией безопасности. Для входа в SQL Server в список надежных элементов вносятся определенные учетные записи пользователей и группы Windows. Пользователям Windows, которые уже прошли аутентификацию, не нужно представлять дополнительные учетные данные.  
  
- Режим смешанной аутентификации поддерживает проверку подлинности как средствами Windows, так и средствами SQL Server. Пары имен пользователей и паролей хранятся в SQL Server.  
  
> [!IMPORTANT]
> Мы рекомендуем использовать проверку подлинности Windows везде, где это возможно. При проверке подлинности Windows используется ряд зашифрованных сообщений для проверки подлинности пользователей в SQL Server. А при использовании имен входа SQL Server имена входа и зашифрованные пароли SQL Server передаются по сети, что делает их менее защищенными.  
  
 При использовании проверки подлинности Windows пользователи уже вошли в Windows и им не нужно отдельно входить еще и в SQL Server. Следующая строка `SqlConnection.ConnectionString` задает проверку подлинности Windows, не требуя имени пользователя или пароля.  
  
```csharp  
"Server=MSSQL1;Database=AdventureWorks;Integrated Security=true;"
```  
  
> [!NOTE]
> Имена для входа отличаются от пользователей базы данных. Вы должны сопоставить имена для входа или группы Windows пользователям базы данных или ролям в отдельной операции. Затем вы предоставляете пользователям или ролям разрешения на доступ к объектам базы данных.  
  
## <a name="authentication-scenarios"></a>Сценарии проверки подлинности  

 Проверка подлинности Windows обычно является лучшим выбором в следующих ситуациях:  
  
- Есть контроллер домена.  
  
- Приложение и база данных находятся на одном компьютере.  
  
- Используется экземпляр SQL Server Express или LocalDB.  
  
 Имена для входа SQL-сервера часто используются в следующих ситуациях:  
  
- Если у вас есть рабочая группа.  
  
- Пользователи соединяются из разных, ненадежных доменов.  
  
- Существуют интернет-приложения, такие как ASP.NET.  
  
> [!NOTE]
> При использовании аутентификации Windows имена входа SQL Server не отключаются. Чтобы отключить имена входа SQL Server с правами доступа, используйте инструкцию Transact-SQL ALTER LOGIN DISABLE.  
  
## <a name="login-types"></a>Типы имен входа  

 В SQL Server существует три типа имен входа.  
  
- Локальная учетная запись пользователя Windows или доверенная учетная запись домена. SQL Server доверяет проверку подлинности учетных записей пользователей Windows самой системе Windows.  
  
- Группа Windows. Предоставление доступа группе Windows обеспечивает доступ ко всем именам входа пользователей Windows, которые являются членами группы.  
  
- Имя входа SQL Server. SQL Server хранит в базе данных master имя пользователя и хэш пароля путем использования внутренних методов проверки подлинности при попытке входа в базу данных.  
  
> [!NOTE]
> SQL Server предоставляет имена входа, созданные из сертификатов или асимметричных ключей, которые используются только для подписывания кода. Они не могут использоваться для подключения к SQL Server.  
  
## <a name="mixed-mode-authentication"></a>Режим смешанной проверки подлинности  

 При необходимости использовать режим смешанной проверки подлинности следует создать имена входа SQL Server, которые хранятся в SQL Server. Затем имя пользователя и пароль SQL Server нужно будет вводить во время выполнения.  
  
> [!IMPORTANT]
> SQL Server устанавливается с логином SQL Server с именем `sa`. (сокращение от "system administrator"). Назначьте надежный пароль для имени входа `sa` и не используйте имя входа `sa` в вашем приложении. Карты входа `sa` на фиксированную серверную роль `sysadmin`, которая имеет безотзывные административные учетные данные на всем сервере. Нет никаких ограничений на потенциальный ущерб, если злоумышленник получит доступ в качестве системного администратора.
  
 SQL Server предоставляет механизмы политики паролей Windows для имен входа SQL Server. Политика сложности паролей позволяет отражать атаки, использующие простой перебор, путем увеличения числа возможных паролей. SQL Server могут применять те же политики сложности и срока действия к паролям, которые используются в SQL Server.  
  
> [!IMPORTANT]
> Сосредоточение строк соединения из пользовательского ввода может сделать ваш сервер уязвимым к атаке путем внедрения строки подключения. Используйте <xref:System.Data.SqlClient.SqlConnectionStringBuilder> для создания синтаксически корректных строк подключения во время выполнения. Дополнительные сведения см. в статье [Connection String Builders](../connection-string-builders.md) (Построители строк подключения).  
  
## <a name="external-resources"></a>Внешние ресурсы  

 Для получения дополнительных сведений см. следующие ресурсы.  
  
|Ресурс|Description|  
|--------------|-----------------|  
|[Субъекты](/sql/relational-databases/security/authentication-access/principals-database-engine)|Описывает имена входа и других участников безопасности, имеющихся в SQL Server.|  
  
## <a name="see-also"></a>См. также

- [Защита приложений ADO.NET](../securing-ado-net-applications.md)
- [Сценарии безопасности приложений в SQL Server](application-security-scenarios-in-sql-server.md)
- [Подключение к источнику данных](../connecting-to-a-data-source.md)
- [Строки подключения](../connection-strings.md)
- [Общие сведения об ADO.NET](../ado-net-overview.md)
