---
description: Дополнительные сведения о том, как создать службу рабочего процесса, которая использует существующий контракт службы.
title: Практическое руководство. Создание службы рабочих процессов, использующей существующий контракт службы
ms.date: 03/30/2017
ms.assetid: 11d11b59-acc4-48bf-8e4b-e97b516aa0a9
ms.openlocfilehash: 0a31f0f4e205c72b857b59726437e896a7c68231
ms.sourcegitcommit: ddf7edb67715a5b9a45e3dd44536dabc153c1de0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/06/2021
ms.locfileid: "99631259"
---
# <a name="how-to-create-a-workflow-service-that-consumes-an-existing-service-contract"></a>Практическое руководство. Создание службы рабочих процессов, использующей существующий контракт службы

Платформа .NET Framework 4,5 обеспечивает лучшую интеграцию между веб-службами и рабочими процессами в виде разработки рабочих процессов с помощью контрактов. Средство разработки рабочих процессов на основе контракта позволяет создать контракт в Code First. Затем это средство автоматически создает в области элементов шаблон действия для каждой операции в контракте.  
  
> [!NOTE]
> Этот раздел содержит пошаговые инструкции по созданию службы рабочих процессов на основе контракта. Дополнительные сведения о разработке службы рабочих процессов в первую очередь см. в разделе [разработка первой службы рабочих процессов](contract-first-workflow-service-development.md)на основе контрактов.  
  
### <a name="creating-the-workflow-project"></a>Создание проекта рабочего процесса  
  
1. В Visual Studio выберите последовательно **Файл** и **Создать проект**. Выберите узел **WCF** в узле **C#** в дереве **шаблонов** и выберите шаблон **приложение службы рабочего процесса WCF** .  
  
2. Присвойте новому проекту имя `ContractFirst` и нажмите кнопку **ОК**.  
  
### <a name="creating-the-service-contract"></a>Создание контракта службы  
  
1. Щелкните правой кнопкой мыши проект в **Обозреватель решений** и выберите **Добавить**, **новый элемент...**. Выберите узел **кода** слева и шаблон **класса** справа. Присвойте новому классу имя `IBookService` и нажмите кнопку **ОК**.  
  
2. В верхней части появившегося окна кода добавьте в `System.Servicemodel` инструкцию Using.  
  
    ```csharp  
    using System.ServiceModel;  
    ```  
  
3. Измените образец определения класса на следующее определение интерфейса.  
  
    ```csharp  
    [ServiceContract]  
        public interface IBookService  
        {  
            [OperationContract]  
            void Buy(string bookName);  
  
            [OperationContract(IsOneWay=true)]  
            void Checkout();  
        }  
    ```  
  
4. Постройте проект, нажав клавиши **CTRL + SHIFT + B**.  
  
### <a name="importing-the-service-contract"></a>Импорт контракта службы  
  
1. Щелкните правой кнопкой мыши проект в **Обозреватель решений** и выберите пункт **Импорт контракта службы**. В разделе **\<Current Project>** откройте все подузлы и выберите **ибуксервице**. Нажмите кнопку **OK**.  
  
2. Откроется диалоговое окно с сообщением, что операция была завершена успешно, а созданные действия появятся в области элементов после сборки проекта. Нажмите кнопку **OK**.  
  
3. Постройте проект, нажав клавиши **CTRL + SHIFT + B**, чтобы импортированные действия отображались на панели элементов.  
  
4. В **Обозреватель решений** откройте Service1. xamlx. Служба рабочего процесса появится в конструкторе.  
  
5. Выберите действие **последовательности** . В окно свойств щелкните **...** в свойстве **имплементедконтракт** . В открывшемся окне **Редактор коллекции типов** щелкните раскрывающийся список **Тип** и выберите пункт **Обзор для типов...** . В диалоговом окне **Обзор и выбор типа .NET** в разделе **\<Current Project>** откройте все подузлы и выберите **ибуксервице**. Нажмите кнопку **OK**. В диалоговом окне **Редактор коллекции типов** нажмите кнопку **ОК**.  
  
6. Выберите и удалите действия **действия ReceiveRequest** и **SendResponse** .  
  
7. Из панели элементов перетащите **Buy_ReceiveAndSendReply** и **Checkout_Receive** действие в действие **Последовательная служба** .
