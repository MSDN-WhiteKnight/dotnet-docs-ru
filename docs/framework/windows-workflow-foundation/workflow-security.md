---
description: 'Дополнительные сведения: безопасность рабочих процессов'
title: Безопасность рабочих процессов
ms.date: 03/30/2017
helpviewer_keywords:
- programming [WF], workflow security
ms.assetid: d712a566-f435-44c0-b8c0-49298e84b114
ms.openlocfilehash: afaf5c9f5a8b0bcf707dae0e9e9669d63c5f8176
ms.sourcegitcommit: ddf7edb67715a5b9a45e3dd44536dabc153c1de0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/06/2021
ms.locfileid: "99754866"
---
# <a name="workflow-security"></a>Безопасность рабочих процессов

Windows Workflow Foundation (WF) интегрируется с несколькими различными технологиями, такими как Microsoft SQL Server и Windows Communication Foundation (WCF). В случае неправильной настройки взаимодействие с этими технологиями может вызвать проблемы безопасности в рабочем процессе.

## <a name="persistence-security-concerns"></a>Вопросы безопасности сохраняемости

1. Рабочие процессы, которые используют действия <xref:System.Activities.Statements.Delay> и сохраняемость, должны повторно активироваться службой. Windows AppFabric использует службу Workflow Management Service (WMS) для повторной активации рабочих процессов с истекшими таймерами. WMS создает объект <xref:System.ServiceModel.WorkflowServiceHost> для размещения повторно активированного рабочего процесса. Если служба WMS остановлена, сохраненные рабочие процессы не будут активироваться повторно при истечении их таймеров.

2. Доступ к устойчивым экземплярам должен быть защищен от вредоносных сущностей, внешних относительно домена приложения. Кроме того, разработчики должны гарантировать, что вредоносный код будет невозможно выполнить в том же домене приложения, что и код устойчивого экземпляра.

3. Устойчивый экземпляр не должен выполняться с разрешениями более высокого уровня (администратора).

4. Данные, обрабатываемые за пределами домена приложения, должны быть защищены.

5. Приложения, требующие изоляции безопасности, не должны использовать совместно один и тот же экземпляр абстракции схемы. Такие приложения должны использовать различные поставщики хранилищ или поставщики хранилищ, настроенные на создание разных экземпляров хранилищ.

## <a name="sql-server-security-concerns"></a>Вопросы безопасности SQL Server

- Если используется большое количество дочерних действий, расположений, закладок, расширений узла и областей или используются закладки с очень большим объемом полезных нагрузок, может быть исчерпана память или во время сохранения будет выделен чрезмерно большой объем пространства базы данных. Избежать этого можно с помощью мер безопасности на уровне объекта и на уровне базы данных.

- Если используется <xref:System.Activities.DurableInstancing.SqlWorkflowInstanceStore>, хранилище экземпляров должно быть защищено.

- Конфиденциальные данные в хранилище экземпляров должны быть зашифрованы. Дополнительные сведения см. в статье [SQL Server Encryption](/sql/relational-databases/security/encryption/sql-server-encryption).

- Так как строка подключения базы данных часто содержится в файле конфигурации, следует использовать безопасность уровня Windows (ACL) для обеспечения защиты файла конфигурации (обычно это Web.Config), а также для того, чтобы гарантировать, что сведения об имени входа и пароле не содержатся в строке подключения. В качестве альтернативы между базой данных и веб-сервером можно использовать аутентификацию Windows.

## <a name="considerations-for-workflowservicehost"></a>Рекомендации по WorkflowServiceHost

- Конечные точки Windows Communication Foundation (WCF), используемые в рабочих процессах, должны быть защищены. Дополнительные сведения см. в статье [Общие сведения о безопасности WCF](../wcf/feature-details/security-overview.md).

- Авторизацию на уровне узлов можно реализовать с помощью <xref:System.ServiceModel.ServiceAuthorizationManager>. Дополнительные сведения см. [в разделе как создать пользовательский диспетчер авторизации для службы](../wcf/extending/how-to-create-a-custom-authorization-manager-for-a-service.md) .

- Кроме того, контекст ServiceSecurityContext для входящего сообщения доступен из рабочего процесса посредством доступа к OperationContext.

## <a name="wf-security-pack-ctp"></a>Пакет безопасности WF CTP

 CTP-версия 1 представляет собой набор действий и их реализацию на основе [Windows Workflow Foundation](index.md) в [платформа .NET Framework 4](/previous-versions/dotnet/netframework-4.0/w0x726c2(v=vs.100)) (WF 4) и [Windows Identity Foundation (WIF)](/previous-versions/dotnet/framework/security/index). Пакет безопасности Microsoft WF CTP 1 содержит действия и их конструкторы, которые демонстрируют простое включение различных сценариев обеспечения безопасности с помощью рабочих процессов, в том числе следующие:

1. Олицетворение удостоверения клиента в рабочем процессе

2. Авторизация в рабочих процессах, например PrincipalPermission и проверка утверждений

3. Обмен сообщениями с использованием проверки подлинности (с применением определенных в рабочем процессе ClientCredentials), например с использованием имени пользователя и пароля или токена, полученного от службы токенов безопасности (STS)

4. Сквозная передача токена безопасности клиента внутренней службе (делегирование на основе утверждений) с помощью WS-Trust ActAs

Дополнительные сведения и о скачивании пакета безопасности WF CTP см. в статье [пакет безопасности WF CTP](https://archive.codeplex.com/?p=wf)
