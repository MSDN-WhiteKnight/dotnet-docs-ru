---
description: Дополнительные сведения см. в статье отслеживание SQL.
title: Отслеживание SQL
ms.date: 03/30/2017
ms.assetid: bcaebeb1-b9e5-49e8-881b-e49af66fd341
ms.openlocfilehash: 2b336839b9c63c0b7bde8b6451add00cb353fec6
ms.sourcegitcommit: ddf7edb67715a5b9a45e3dd44536dabc153c1de0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/06/2021
ms.locfileid: "99741748"
---
# <a name="sql-tracking"></a>Отслеживание SQL

В этом примере демонстрируется написание пользовательского участника отслеживания SQL, записывающего записи отслеживания в базу данных SQL. Windows Workflow Foundation (WF) обеспечивает отслеживание рабочих процессов, чтобы получить сведения о выполнении экземпляра рабочего процесса. Среда выполнения отслеживания выдает записи отслеживания рабочего процесса в ходе его выполнения. Дополнительные сведения об отслеживании рабочих процессов см. в разделе [Отслеживание и трассировка рабочих процессов](../workflow-tracking-and-tracing.md).

## <a name="use-the-sample"></a>Использование примера

1. Убедитесь, что на компьютере установлен SQL Server 2008, SQL Server 2008 Express или более новая версия. Скрипты, упакованные в состав образца, предполагают использование экземпляра SQL Express на локальном компьютере пользователя. Если вы работаете с другим экземпляром, до запуска образца следует внести изменения в скрипты, относящиеся к базе данных.

2. Создание базы данных отслеживания на SQL Server посредством запуска команды Trackingsetup.cmd в каталоге скриптов (\WF\Basic\Tracking\SqlTracking\CS\Scripts). Создает базу данных с именем TrackingSample.

   > [!NOTE]
   > Этот скрипт создает базу данных на экземпляре SQL Express по умолчанию. Если установку необходимо произвести на другом экземпляре базы данных, внесите изменения в скрипт Trackingsetup.cmd.

3. Откройте Склтраккингсампле. sln в Visual Studio 2010.

4. Нажмите клавиши **CTRL** + **SHIFT** + **B** , чтобы построить решение.

5. Нажмите клавишу **F5** для запуска приложения.

   Откроется окно браузера со списком каталогов для приложения.

6. Щелкните файл StockPriceService.xamlx в браузере.

7. В браузере отображается страница StockPriceService, содержащая адрес WSDL локальной службы. Скопируйте этот адрес.

   Пример адреса WSDL локальной службы — `http://localhost:65193/StockPriceService.xamlx?wsdl` .

8. С помощью проводника запустите тестовый клиент WCF (WcfTestClient.exe). Он находится в *каталоге Microsoft Visual Studio 10.0 \ Common7\IDE*.

9. В тестовом клиенте WCF щелкните меню **файл** и выберите **Добавить службу**. Вставьте в текстовое поле адрес локальной службы. Нажмите кнопку **ОК**, чтобы закрыть диалоговое окно.

10. В тестовом клиенте WCF дважды щелкните **жетстоккприце**. Откроется `GetStockPrice` операция, которая принимает один параметр, введите значение `Contoso` и нажмите кнопку **вызвать**.

11. Выданные записи отслеживания будут записаны в базу данных SQL. Чтобы просмотреть записи отслеживания, откройте базу данных TrackingSample в среде SQL Management Studio и перейдите в раздел просмотра таблиц. Применение запроса select для таблиц выводит соответствующие данные записей отслеживания, хранимых в соответствующих таблицах.

   Дополнительные сведения о SQL Server Management Studio см. в разделе [введение SQL Server Management Studio](/sql/ssms/sql-server-management-studio-ssms). Скачайте SQL Server Management Studio [здесь](https://aka.ms/ssmsfullsetup).

## <a name="uninstall-the-sample"></a>Удаление образца

1. Запустите сценарий Сетраккингклеануп. cmd в каталоге примеров (*\вф\басик\траккинг\склтраккинг*).

    > [!NOTE]
    > Скрипт Trackingcleanup.cmd пытается удалить базу данных, хранящуюся в SQL Express вашего локального компьютера. При использовании другого экземпляра сервера SQL следует внести изменения в скрипт Trackingcleanup.cmd.

> [!IMPORTANT]
> Образцы уже могут быть установлены на компьютере. Перед продолжением проверьте следующий каталог (по умолчанию).
>
> `<InstallDrive>:\WF_WCF_Samples`
>
> Если этот каталог не существует, перейдите к [примерам Windows Communication Foundation (WCF) и Windows Workflow Foundation (WF) для платформа .NET Framework 4](https://www.microsoft.com/download/details.aspx?id=21459) , чтобы скачать все Windows Communication Foundation (WCF) и [!INCLUDE[wf1](../../../../includes/wf1-md.md)] примеры. Этот образец расположен в следующем каталоге.
>
> `<InstallDrive>:\WF_WCF_Samples\WF\Basic\Tracking\SqlTracking`

## <a name="see-also"></a>См. также

- [Образцы наблюдения за AppFabric](/previous-versions/appfabric/ff383407(v=azure.10))
