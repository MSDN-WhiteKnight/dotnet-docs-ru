---
description: 'Дополнительные сведения: поддержка новых функций Workflow Foundation 4,5 в переразмещенной конструктор рабочих процессов'
title: Поддержка новых возможностей Workflow Foundation 4.5 во вновь размещенном конструкторе рабочих процессов
ms.date: 03/30/2017
ms.assetid: 1a4a4038-d8e6-41dd-99ea-93bd76286772
ms.openlocfilehash: 948519265383e9fd3850c44304f7c02283b3f579
ms.sourcegitcommit: ddf7edb67715a5b9a45e3dd44536dabc153c1de0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/06/2021
ms.locfileid: "99755009"
---
# <a name="support-for-new-workflow-foundation-45-features-in-the-rehosted-workflow-designer"></a>Поддержка новых возможностей Workflow Foundation 4.5 во вновь размещенном конструкторе рабочих процессов

В Windows Workflow Foundation (WF) в платформа .NET Framework 4,5 введено множество новых функций, включая несколько улучшений в интерфейсе конструктора рабочих процессов. В этом разделе подробно описываются те возможности, которые поддерживаются в повторно размещенном конструкторе, и те, которые в настоящее время не поддерживаются.

> [!NOTE]
> Список всех новых функций Windows Workflow Foundation (WF), появившихся в платформа .NET Framework 4,5, включая те, которые не связаны с переразмещением конструктора, см. в разделе [новые возможности в Windows Workflow Foundation в платформа .NET Framework 4,5](whats-new-in-wf-in-dotnet.md).

## <a name="activities"></a>Действия

 Встроенная библиотека действий содержит новые действия, а также новые функции для существующих действий. Все эти действия поддерживаются в повторно размещенном конструкторе. Дополнительные сведения об этих новых действиях см. в разделе " [действия](whats-new-in-wf-in-dotnet.md#BKMK_NewActivities) " статьи [новые возможности Windows Workflow Foundation в платформа .NET Framework 4,5](whats-new-in-wf-in-dotnet.md).

## <a name="c-expressions"></a>Выражения C#

 До платформа .NET Framework 4,5 все выражения в рабочих процессах могут быть написаны только на Visual Basic. В платформа .NET Framework 4,5 выражения Visual Basic используются только для проектов, созданных с помощью Visual Basic. Теперь в проектах Visual C# для выражений используется язык C#. При создании рабочих процессов в Visual Studio 2012 предоставляется полнофункциональный редактор выражений C#, который предоставляет такие возможности, как выделение грамматики и IntelliSense. Проекты рабочих процессов C#, созданные в предыдущих версиях с использованием выражений Visual Basic, будут по-прежнему работать.

> [!WARNING]
> Выражения на языке C# не поддерживаются в повторно размещенном конструкторе.

## <a name="new-designer-capabilities"></a>Новые возможности конструктора

### <a name="designer-search"></a>Поиск конструктора

 Функции [быстрого поиска](whats-new-in-wf-in-dotnet.md#BKMK_QuickFind) и [поиска в файлах](whats-new-in-wf-in-dotnet.md#BKMK_FindInFiles) , появившиеся в платформа .NET Framework 4,5, не поддерживаются в повторно размещенном конструкторе. Поиск `Toolbox` поддерживается в повторно размещенном конструкторе. Дополнительные сведения об этих возможностях см. в разделе [Поиск в конструкторе](whats-new-in-wf-in-dotnet.md#BKMK_DesignerSearch).

> [!WARNING]
> [Быстрый поиск](whats-new-in-wf-in-dotnet.md#BKMK_QuickFind) и [Поиск в файлах](whats-new-in-wf-in-dotnet.md#BKMK_FindInFiles) не поддерживаются в повторно размещенном конструкторе.

### <a name="delete-context-menu-item-in-variable-and-argument-designer"></a>Пункт контекстного меню «Удалить» в конструкторе переменных и аргументов

 В платформа .NET Framework 4 переменные и аргументы можно удалять только в конструкторе с помощью клавиатуры. Начиная с платформа .NET Framework 4,5 переменные и аргументы можно удалить с помощью контекстного меню. Эта возможность поддерживается в повторно размещенном конструкторе.

 На следующем снимке экрана показано контекстное меню конструктора переменных и аргументов.

 ![Контекстное меню конструктора переменных и аргументов](./media/wf-features-in-the-rehosted-workflow-designer/designer-context-menu.png)

### <a name="auto-surround-with-sequence"></a>Автоматическое окружение с последовательностью

 Поскольку рабочий процесс или некоторые действия с контейнерами (например, <xref:System.Activities.Statements.NoPersistScope>) могут содержать только одно действие с текстом, при добавлении второго действия разработчик должен удалить первое действие, добавить действие <xref:System.Activities.Statements.Sequence>, а затем добавить оба действия в действие последовательности. Начиная с платформа .NET Framework 4,5, при добавлении второго действия в рабочую область конструктора `Sequence` автоматически создается действие, чтобы создать оболочку для обоих действий. Эта возможность поддерживается в повторно размещенном конструкторе.

 На следующем снимке экрана показано действие `WriteLine` в `Body` для `NoPersistScope`.

 ![Действие WriteLine в теле действия NoPersistScope.](./media/wf-features-in-the-rehosted-workflow-designer/auto-surround-write-line-activity.png)

 На следующем снимке экрана показано автоматически созданное действие `Sequence` в `Body`, когда второй объект `WriteLine` сбрасывается ниже первого.

 ![Автоматически созданная последовательность в теле NoPersistScope.](./media/wf-features-in-the-rehosted-workflow-designer/auto-surround-sequence-activity.png)

### <a name="pan-mode"></a>Панорамный режим

 Для упрощения навигации по большому рабочему процессу в конструкторе можно включить панорамный режим, позволяющий разработчику перетаскивать мышью видимую часть рабочего процесса и не использовать полосы прокрутки. Кнопка для активации панорамного режима находится в правом нижнем углу конструктора. Эта возможность поддерживается в повторно размещенном конструкторе.

 На следующем снимке экрана показана кнопка панорамирования, расположенная в правом нижнем углу конструктора рабочих процессов.

 ![Кнопка сдвига, выделенная в конструкторе рабочих процессов.](./media/wf-features-in-the-rehosted-workflow-designer/pan-button-workflow-designer.png)

 Панорамирование в конструкторе рабочих процессов возможно также с помощью средней кнопки мыши или клавиши пробела.

### <a name="multi-select"></a>Множественный выбор

 Можно выбрать несколько действий одновременно, растягивая прямоугольник вокруг них (если не включен панорамный режим) или удерживая клавишу CTRL и последовательно щелкая необходимые действия. Эта возможность поддерживается в повторно размещенном конструкторе.

 Несколько выделенных действий можно перетаскивать внутри конструктора, а также взаимодействовать с ними с помощью контекстного меню.

### <a name="outline-view-of-workflow-items"></a>Представление структуры элементов рабочего процесса

 Для упрощения навигации по иерархическим рабочим процессам компоненты рабочего процесса отображаются в виде древовидной структуры. Представление структуры отображается в представлении « **Структура документа** ». Чтобы открыть это представление в Visual Studio, в верхнем меню выберите **вид**, **другие окна**, **Структура документа** или нажмите клавиши CTRL W, U. Щелкнув узел в представлении структуры, можно перейти к соответствующему действию в конструкторе рабочих процессов. Представление структуры будет обновлено с отображением действий, выбранных в конструкторе. Эта возможность поддерживается в повторно размещенном конструкторе.

 На следующем снимке экрана завершенного рабочего процесса из [учебника начало работы](getting-started-tutorial.md) показано представление структуры с последовательным рабочим процессом.

 ![Снимок экрана: представление структуры с последовательным рабочим процессом в Visual Studio](./media/wf-features-in-the-rehosted-workflow-designer/outline-view-in-workflow-designer.jpg)

### <a name="more-control-of-visibility-of-shell-bar-and-header-items"></a>Дополнительные возможности управления видимостью панели оболочки и элементов заголовка

 В повторно размещенном конструкторе некоторые из стандартных элементов управления пользовательского интерфейса могут не иметь значения для заданного рабочего процесса и могут быть отключены. В платформа .NET Framework 4 Эта настройка поддерживается только в панели оболочки в нижней части конструктора. В платформа .NET Framework 4,5 видимость элементов заголовка оболочки в верхней части конструктора можно изменить, задав <xref:System.Activities.Presentation.View.DesignerView.WorkflowShellHeaderItemsVisibility%2A> соответствующее <xref:System.Activities.Presentation.View.ShellHeaderItemsVisibility> значение.

### <a name="auto-connect-and-auto-insert-in-flowchart-and-state-machine-workflows"></a>Автоматическое соединение и автоматическая вставка в рабочих процессах блок-схемы и конечного автомата

 В платформа .NET Framework 4 подключения между узлами в рабочем процессе блок-схемы должны быть добавлены вручную. В платформа .NET Framework 4,5, блок-схема и узлы конечного автомата имеют автоматические точки соединения, которые становятся видимыми при перетаскивании действия с панели элементов на поверхность конструктора. При сбросе действия в одной из этих точек автоматически добавляется действие вместе с необходимым соединением.

 На следующем снимке экрана показаны точки присоединения, которые появляются при перетаскивании действия из области элементов.

 ![Начальный узел блок-схемы с точками автоматического подключения](./media/wf-features-in-the-rehosted-workflow-designer/auto-connect-points-start-node.png)

 Действия можно также перетаскивать на соединения между узлами блок-схемы и состояниями для автоматической вставки узла между двумя другими узлами. На следующем снимке экрана показана выделенная соединительная линия, на которую можно перетаскивать действия из области элементов.

 ![Ручка автоматической вставки для перетаскивания действий](./media/wf-features-in-the-rehosted-workflow-designer/auto-insert-connecting-line.png)

 Автоматическое соединение и автоматическая вставка поддерживаются в повторно размещенном конструкторе.

### <a name="designer-annotations"></a>Заметки конструктора

 Для упрощения разработки крупных рабочих процессов конструктор теперь поддерживает добавление заметок, помогающих отслеживать процесс проектирования. Заметки можно добавлять к действиям, состояниям, узлам блок-схемы, переменным и аргументам. На следующем снимке экрана показано контекстное меню, которое используется для добавления заметок к конструктору.

 ![Снимок экрана, показывающий меню для добавления нотаций.](./media/wf-features-in-the-rehosted-workflow-designer/designer-annotations-context-menu.png)

 Заметки конструктора поддерживаются в повторно размещенном конструкторе.

### <a name="define-and-consume-activitydelegate-objects-in-the-designer"></a>Определение и использование объектов ActivityDelegate в конструкторе

 Действия в платформа .NET Framework 4 использовали <xref:System.Activities.ActivityDelegate> объекты для предоставления точек выполнения, где другие части рабочего процесса могут взаимодействовать с выполнением рабочего процесса, но использование этих точек выполнения обычно требует достаточного объема кода. В этом выпуске разработчики могут определять и использовать делегаты действий с помощью конструктора рабочих процессов. Дополнительные сведения см. в разделе [инструкции. Определение и использование делегатов действий в конструктор рабочих процессов](/visualstudio/workflow-designer/how-to-define-and-consume-activity-delegates-in-the-workflow-designer).

 Делегаты действий поддерживаются в повторно размещенном конструкторе.

### <a name="build-time-validation"></a>Проверка во время сборки

 В платформа .NET Framework 4 ошибки проверки рабочего процесса не учитывались как ошибки сборки во время сборки проекта рабочего процесса. Это значило, что сборка проекта рабочего процесса могло завершиться успешно даже при наличии ошибок проверки рабочего процесса. В платформа .NET Framework 4,5 ошибки проверки рабочего процесса приводят к сбою сборки.

> [!WARNING]
> Проверка во время сборки не поддерживается в повторно размещенном конструкторе.

### <a name="design-time-background-validation"></a>Фоновая проверка во время разработки

 В платформа .NET Framework 4 рабочие процессы проверялись как процесс переднего плана, что потенциально может заблокировать пользовательский интерфейс во время сложных или длительных процессов проверки. Теперь проверка рабочего процесса выполняется в фоновом потоке, поэтому пользовательский интерфейс не блокируется.

 Фоновая проверка во время разработки поддерживается в повторно размещенном конструкторе.

### <a name="view-state-located-in-a-separate-location-in-xaml-files"></a>Состояние просмотра в отдельном расположении в файлах XAML

 В платформа .NET Framework 4 сведения о состоянии представления для рабочего процесса хранятся в файле XAML во многих разных местах. Это неудобно для разработчиков, которым требуется прочитать язык XAML напрямую или написать код для извлечения информации о состоянии просмотра. В платформа .NET Framework 4,5 сведения о состоянии представления в файле XAML сериализуются как отдельный элемент в файле XAML.  Разработчики могут легко находить и изменять сведения о состоянии представления действия или полностью удалить состояние представления.

 Эта функция поддерживается в повторно размещенном конструкторе рабочих процессов.

### <a name="opt-in-for-workflow-45-features-in-rehosted-designer"></a>Включаемые по требованию возможности рабочего процесса 4.5 в повторно размещенном конструкторе

 Для сохранения обратной совместимости некоторые новые функции, включенные в платформа .NET Framework 4,5, не включены по умолчанию в повторно размещенном конструкторе. Таким образом, работа существующих приложений, использующих повторно размещенный конструктор, не нарушается обновлением до последней версии. Чтобы включить новые возможности в повторно размещенном конструкторе, задайте для <xref:System.Activities.Presentation.DesignerConfigurationService.TargetFrameworkName%2A> значение «.NET Framework 4.5» или задайте отдельные элементы <xref:System.Activities.Presentation.DesignerConfigurationService>, чтобы включить отдельные возможности.

## <a name="new-workflow-development-models"></a>Новые модели разработки рабочего процесса

 Помимо блок-схемы и последовательных моделей разработки рабочего процесса, этот выпуск включает рабочие процессы конечного автомата и службы рабочего процесса с первоначальным контрактом.

### <a name="state-machine-workflows"></a>Рабочие процессы конечного автомата

 Рабочие процессы конечного автомата были введены в составе платформа .NET Framework 4.0.1 в [Microsoft .NET Framework 4 платформы с обновлением 1](/archive/blogs/endpoint/microsoft-net-framework-4-platform-update-1). Это обновление включило несколько новых классов и действий, которые дали возможность разработчикам создавать рабочие процессы конечного автомата. Эти классы и действия были обновлены для платформа .NET Framework 4,5. Обновления включают следующее:

1. Возможность установки точек останова на состояниях

2. Возможность копирования и вставки переходов в конструкторе рабочих процессов

3. Поддержка совместного создания перехода триггера в конструкторе

4. Действия для создания рабочих процессов конечного автомата, включая <xref:System.Activities.Statements.StateMachine>, <xref:System.Activities.Statements.State> и <xref:System.Activities.Statements.Transition>

 На следующем снимке экрана показан завершенный рабочий процесс конечного автомата из [руководства Начало работы](getting-started-tutorial.md) пошаговое руководство [. Создание рабочего процесса конечного автомата](how-to-create-a-state-machine-workflow.md).

 ![Иллюстрация, показывающая Завершенный рабочий процесс конечного автомата.](./media/wf-features-in-the-rehosted-workflow-designer/complete-state-machine-workflow.jpg)

 Дополнительные сведения о создании рабочих процессов конечного автомата см. в разделе [рабочие процессы конечного автомата](state-machine-workflows.md). Рабочие процессы конечного автомата поддерживаются в повторно размещенном конструкторе.

### <a name="contract-first-workflow-development"></a>Разработка рабочих процессов с первоначальным контрактом

 Средство разработки рабочих процессов с контрактом от первого разработчика позволяет разработчику сначала спроектировать контракт в коде, а затем, выполнив несколько щелчков мышью в Visual Studio, автоматически создать шаблон действия на панели элементов, представляющем каждую операцию. Эти действия затем используются для создания рабочего процесса с операциями, указанными в контракте. Конструктор рабочих процессов проверяет службу рабочего процесса для проверки того, что эти операции реализованы, а сигнатура рабочего процесса соответствует сигнатуре контракта. Разработчик также может связать службу рабочего процесса с коллекцией реализованных контрактов. Дополнительные сведения о разработке службы рабочих процессов в зависимости от контракта см. в разделе [как создать службу рабочего процесса, которая использует существующий контракт службы](how-to-create-a-workflow-service-that-consumes-an-existing-service-contract.md).

> [!WARNING]
> Разработка рабочего процесса с первоначальным контрактом не поддерживается в конструкторе рабочих процессов.
