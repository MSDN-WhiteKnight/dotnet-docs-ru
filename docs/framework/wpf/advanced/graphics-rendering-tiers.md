---
title: Уровни графической отрисовки
ms.date: 03/30/2017
helpviewer_keywords:
- graphics [WPF], performance
- rendering graphics [WPF]
- rendering tiers [WPF]
- graphics rendering tiers [WPF]
- graphics [WPF], rendering tiers
ms.assetid: 08dd1606-02a2-4122-9351-c0afd2ec3a70
ms.openlocfilehash: d5924ff9336bc6e93022caf1b85d5fd98f7a617d
ms.sourcegitcommit: 5b6d778ebb269ee6684fb57ad69a8c28b06235b9
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/08/2019
ms.locfileid: "59197390"
---
# <a name="graphics-rendering-tiers"></a>Уровни графической отрисовки
Уровень отрисовки определяет уровень возможностей графического оборудования и производительность для устройства, на котором выполняется приложение [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)].  

<a name="graphics_hardware"></a>   
## <a name="graphics-hardware"></a>Графическое оборудование  
 Ниже перечислены возможности графического оборудования, которые сильнее всего влияют на уровни отрисовки.  
  
-   **Видеопамять**. Объем видеопамяти графического оборудования определяет размер и число буферов, которые можно использовать для компоновки графики.  
  
-   **Построитель текстуры**. Построитель текстуры — это функция обработки графики, вычисляющая эффекты на уровне пикселей. В зависимости от разрешения отображаемой графики может быть несколько миллионов пикселей, которые необходимо обработать для каждого отображаемого кадра.  
  
-   **Вершинный построитель текстуры**. Вершинный построитель текстуры — это функция обработки графики для выполнения математических операций над данными вершин объекта.  
  
-   **Поддержка мультитекстурирования**. Поддержка мультитекстурирования относится к возможности применить две и более разных текстур во время операции смешения на объекте трехмерной графики. Степень многотекстурной поддержки определяется числом мультитекстурных модулей на графическом оборудовании.  
  
<a name="rendering_tier_definitions"></a>   
## <a name="rendering-tier-definitions"></a>Определения уровней отрисовки  
 Возможности графического оборудования определяют возможности отрисовки приложения [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)]. Система [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] определяет три уровня отрисовки.  
  
-   **Уровень отрисовки 0**. Аппаратное ускорение графики отсутствует. Все графические возможности реализуются с использованием программного ускорения. Уровень версии [!INCLUDE[TLA2#tla_dx](../../../../includes/tla2sharptla-dx-md.md)] меньше версии 9.0.  
  
-   **Уровень отрисовки 1**. Некоторые графические функции используют аппаратное ускорение графики. Уровень версии [!INCLUDE[TLA2#tla_dx](../../../../includes/tla2sharptla-dx-md.md)] больше или равен версии 9.0.  
  
-   **Уровень отрисовки 2**. Большинство графических функций используют аппаратное ускорение графики. Уровень версии [!INCLUDE[TLA2#tla_dx](../../../../includes/tla2sharptla-dx-md.md)] больше или равен версии 9.0.  
  
 <xref:System.Windows.Media.RenderCapability.Tier%2A?displayProperty=nameWithType> Свойство позволяет извлечь уровень отрисовки во время выполнения приложения. Уровень отрисовки используется, чтобы определить, поддерживает ли устройство те или иные функции графики аппаратного ускорения. Затем приложение может принимать разные пути кода во время выполнения в зависимости от поддерживаемого устройством уровня отрисовки.  
  
### <a name="rendering-tier-0"></a>Уровень отрисовки 0  
 Значение 0 для уровня отрисовки означает, что аппаратное ускорение графики недоступно для приложения на устройстве. На этом уровне нужно исходить из того, что вся графика будет отрисовываться программным обеспечением без аппаратного ускорения. Функциональность этого уровня соответствует версии [!INCLUDE[TLA2#tla_dx](../../../../includes/tla2sharptla-dx-md.md)] меньше 9.0.  
  
### <a name="rendering-tier-1-and-rendering-tier-2"></a>Уровень отрисовки 1 и уровень отрисовки 2  
  
> [!NOTE]
>  Начиная с .NET Framework 4, уровень отрисовки 1 переопределен и включает только графическое оборудование, которое поддерживает [!INCLUDE[TLA2#tla_dx](../../../../includes/tla2sharptla-dx-md.md)] 9.0 и выше. Графическое оборудование, которое поддерживает [!INCLUDE[TLA2#tla_dx](../../../../includes/tla2sharptla-dx-md.md)] 7 или 8, теперь определяется как уровень отрисовки 0.  
  
 Отрисовка уровня 1 или 2 означает, что большая часть графических возможностей [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] будет использовать аппаратное ускорение, если необходимые системные ресурсы доступны и не исчерпаны. Это соответствует версии [!INCLUDE[TLA2#tla_dx](../../../../includes/tla2sharptla-dx-md.md)], которая больше или равна 9.0.  
  
 В таблице ниже приводятся различия в требованиях к графическому оборудованию для уровней отрисовки 1 и 2:  
  
|Функция|Уровень 1|Уровень 2|  
|-------------|------------|------------|  
|[!INCLUDE[TLA2#tla_dx](../../../../includes/tla2sharptla-dx-md.md)] version|Должно быть больше или равно 9.0.|Должно быть больше или равно 9.0.|  
|Видеопамять|Должно быть больше или равно 60 МБ.|Должно быть больше или равно 120 МБ.|  
|Построитель текстуры|Уровень версии должен быть больше или равен версии 2.0.|Уровень версии должен быть больше или равен версии 2.0.|  
|Вершинный построитель текстуры|Без требований.|Уровень версии должен быть больше или равен версии 2.0.|  
|Модули мультитекстурирования|Без требований.|Число модулей должно быть больше или равно 4.|  
  
 Следующие функции и возможности обеспечиваются аппаратным ускорением для уровней отрисовки 1 и 2.  
  
|Функция|Примечания|  
|-------------|-----------|  
|Двухмерная отрисовка|Поддерживается большинство двухмерных отрисовок.|  
|Растеризация 3D|Поддерживается большинство трехмерных растеризаций.|  
|Трехмерная анизотропная фильтрация|[!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] пытается использовать анизотропную фильтрацию при отрисовке трехмерного содержимого. Анизотропная фильтрация используется для повышения качества изображения текстур на удаленных поверхностях, которые находятся под большим углом по отношению к камере.|  
|Трехмерное MIP-сопоставление|[!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] пытается использовать MIP-сопоставление при отрисовке трехмерного содержимого. MIP-сопоставление повышает качество отрисовки текстуры, если текстура занимает небольшое поле зрения в <xref:System.Windows.Controls.Viewport3D>.|  
|Радиальные градиенты|Хотя поддерживается, избегайте использования <xref:System.Windows.Media.RadialGradientBrush> с крупными объектами.|  
|Вычисления трехмерного освещения|[!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] выполняет освещение на уровне вершин, это означает, что интенсивность света вычисляется на каждой вершине для каждого материала, применяемого к сетке.|  
|Отрисовка текста|В отрисовке шрифта на субпиксельном уровне используются доступные построители текстур на графическом оборудовании.|  
  
 Следующие функции и возможности обеспечиваются аппаратным ускорением для уровня отрисовки 2.  
  
|Функция|Примечания|  
|-------------|-----------|  
|Трехмерное сглаживание|Трехмерное сглаживание поддерживается только в операционных системах, поддерживающих Windows Display Driver Model (WDDM), например [!INCLUDE[TLA2#tla_winvista](../../../../includes/tla2sharptla-winvista-md.md)] и [!INCLUDE[win7](../../../../includes/win7-md.md)].|  
  
 Следующие функции и возможности **не** обеспечиваются аппаратным ускорением.  
  
|Функция|Примечания|  
|-------------|-----------|  
|Содержимое вывода|Все содержимое вывода отображается с помощью программного конвейера [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)].|  
|Растровое содержимое, использующее <xref:System.Windows.Media.Imaging.RenderTargetBitmap>|Любое содержимое отображается с помощью <xref:System.Windows.Media.Imaging.RenderTargetBitmap.Render%2A> метод <xref:System.Windows.Media.Imaging.RenderTargetBitmap>.|  
|Мозаичное содержимое, использующее <xref:System.Windows.Media.TileBrush>|Любое Мозаичное содержимое, в котором <xref:System.Windows.Media.TileBrush.TileMode%2A> свойство <xref:System.Windows.Media.TileBrush> присваивается <xref:System.Windows.Media.TileMode.Tile>.|  
|Поверхности, которые превышают максимальный размер текстуры графического оборудования|Для большинства графических устройств большие поверхности имеют размер 2048 x 2048 или 4096 x 4096 пикселей.|  
|Любая операция, требования к видеопамяти которой превышают объем памяти графического оборудования|Можно отслеживать использование видеопамяти приложения, используя средство Perforator, включенное в [WPF Performance Suite](https://docs.microsoft.com/previous-versions/dotnet/netframework-4.0/aa969767(v=vs.100)) в комплекте SDK Windows.|  
|Многослойные окна|Многослойные окна позволяют приложениям [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] отображать содержимое на экране в непрямоугольных окнах. В операционных системах, поддерживающих Windows Display Driver Model (WDDM), например [!INCLUDE[TLA2#tla_winvista](../../../../includes/tla2sharptla-winvista-md.md)] и [!INCLUDE[win7](../../../../includes/win7-md.md)], многослойные окна реализованы с аппаратным ускорением. В других системах, таких как [!INCLUDE[winxp](../../../../includes/winxp-md.md)], многоуровневые окна отрисовываются программным обеспечением без аппаратного ускорения.<br /><br /> Вы можете включить многослойные окна в [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] , задав следующие <xref:System.Windows.Window> свойства:<br /><br /> -   <xref:System.Windows.Window.WindowStyle%2A> = <xref:System.Windows.WindowStyle.None><br />-   <xref:System.Windows.Window.AllowsTransparency%2A> = `true`<br />-   <xref:System.Windows.Controls.Control.Background%2A> = <xref:System.Windows.Media.Brushes.Transparent%2A>|  
  
<a name="other_resources"></a>   
## <a name="other-resources"></a>Другие ресурсы  
 Следующие ресурсы могут помочь проанализировать характеристики производительности вашего приложения [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)].  
  
### <a name="graphics-rendering-registry-settings"></a>Настройки реестра графической отрисовки  
 [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] предоставляет четыре параметра реестра для управления [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] отрисовки:  
  
|Параметр|Описание|  
|-------------|-----------------|  
|**Отключить аппаратное ускорение**|Указывает, следует ли включить аппаратное ускорение.|  
|**Максимальное значение мультисэмплинга**|Определяет степень мультисэмплинга для сглаживания содержимого [!INCLUDE[TLA2#tla_3d](../../../../includes/tla2sharptla-3d-md.md)].|  
|**Требуемая дата видеодрайвера**|Указывает, отключает ли система аппаратное ускорение для драйверов, выпущенных до ноября 2004 г.|  
|**Использовать средство программной прорисовки**|Указывает, следует ли [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] использовать средство программной прорисовки.|  
  
 Эти параметры доступны любой внешней служебной программе настройки, которая знает, как ссылаться на параметры реестра [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)]. Эти параметры также можно создать или изменить через прямой доступ к значениям с использованием редактора реестра [!INCLUDE[TLA#tla_mswin](../../../../includes/tlasharptla-mswin-md.md)]. Более подробную информацию см. в разделе [Настройки реестра графической отрисовки](../graphics-multimedia/graphics-rendering-registry-settings.md).  
  
### <a name="wpf-performance-profiling-tools"></a>Средства профилирования производительности WPF  
 [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] предоставляет набор средств профилирования производительности, позволяющие анализировать поведение времени выполнения приложения и определить, какие оптимизации производительности, которые можно применить. В следующей таблице перечислены средства профилирования производительности, включенные в средство [!INCLUDE[TLA2#tla_lhsdk](../../../../includes/tla2sharptla-lhsdk-md.md)], WPF Performance Suite.  
  
|Средство|Описание|  
|----------|-----------------|  
|Perforator|Используется для анализа поведения отрисовки.|  
|Visual Profiler|Служит для профилирования использования служб [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)], например обработки макета и событий, по элементам в визуальном дереве.|  
  
 WPF Performance Suite обеспечивает многофункциональное графическое представление данных производительности. Дополнительные сведения о средствах производительности WPF см. в разделе [WPF Performance Suite](https://docs.microsoft.com/previous-versions/dotnet/netframework-4.0/aa969767(v=vs.100)).  
  
### <a name="directx-diagnostic-tool"></a>средство диагностики DirectX  
 Диагностическое средство [!INCLUDE[TLA2#tla_dx](../../../../includes/tla2sharptla-dx-md.md)], Dxdiag.exe, поможет в диагностике и устранении проблем, связанных с [!INCLUDE[TLA2#tla_dx](../../../../includes/tla2sharptla-dx-md.md)]. Папка установки по умолчанию для средства диагностики [!INCLUDE[TLA2#tla_dx](../../../../includes/tla2sharptla-dx-md.md)].  
  
 `~\Windows\System32`  
  
 При запуске средства диагностики [!INCLUDE[TLA2#tla_dx](../../../../includes/tla2sharptla-dx-md.md)] главное окно содержит набор вкладок, которые позволяют отображать и диагностировать связанные с [!INCLUDE[TLA2#tla_dx](../../../../includes/tla2sharptla-dx-md.md)] сведения. Например, на вкладке **Система** представлена системная информация о вашем компьютере и указана версия [!INCLUDE[TLA2#tla_dx](../../../../includes/tla2sharptla-dx-md.md)], установленная на вашем ПК.  
  
 ![Снимок экрана: Инструмент диагностики DirectX](./media/directxdiagnostictool-01.png "DirectXDiagnosticTool_01")  
Главное окно инструмента диагностики DirectX  
  
## <a name="see-also"></a>См. также

- <xref:System.Windows.Media.RenderCapability>
- <xref:System.Windows.Media.RenderOptions>
- [Улучшение производительности приложений WPF](optimizing-wpf-application-performance.md)
- [WPF Performance Suite](https://docs.microsoft.com/previous-versions/dotnet/netframework-4.0/aa969767(v=vs.100))
- [Настройки реестра графической отрисовки](../graphics-multimedia/graphics-rendering-registry-settings.md)
- [Советы и рекомендации по анимации](../graphics-multimedia/animation-tips-and-tricks.md)
