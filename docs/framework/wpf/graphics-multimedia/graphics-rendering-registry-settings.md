---
title: Настройки реестра графической отрисовки
ms.date: 03/30/2017
helpviewer_keywords:
- rendering graphics [WPF], registry settings
- rendering graphics [WPF]
- rendering graphics [WPF], troubleshooting
- troubleshooting graphics rendering [WPF]
- graphics [WPF], rendering
ms.assetid: f4b41b42-327d-407c-b398-3ed5f505df8b
ms.openlocfilehash: 616c74ccd787d9acdcb2a3bbe281c2f43bb49c2e
ms.sourcegitcommit: 5b6d778ebb269ee6684fb57ad69a8c28b06235b9
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/08/2019
ms.locfileid: "59135542"
---
# <a name="graphics-rendering-registry-settings"></a>Настройки реестра графической отрисовки
В этом разделе содержится обзор параметров графической отрисовки WPF в реестре, которые влияют на приложения WPF.  

<a name="overview"></a>   
## <a name="when-to-use-graphics-rendering-registry-settings"></a>Когда следует использовать настройки реестра для графической отрисовки  
 Эти параметры реестра предоставляются для устранения неполадок, отладки и поддержки продукта. Поскольку изменения в реестре влияют на все приложения WPF, ваше приложение никогда не должно изменять эти разделы реестра автоматически или во время установки.  
  
<a name="xpdmandwddm"></a>   
## <a name="what-are-xpdm-and-wddm"></a>Что такое XPDM и WDDM?  
 Некоторые из параметров реестра для графической отрисовки имеют разные значения по умолчанию, в зависимости от того, использует ли видеокарта драйвер XPDM или WDDM. XPDM — модель видеодрайвера Microsoft Windows XP, а WDDM — модель видеодрайвера Windows. Модель WDDM доступна на компьютерах под управлением Windows Vista и Windows 7. Модель XPDM доступна на компьютерах под управлением Windows Vista, Microsoft Windows XP и Microsoft Windows Server 2003. Дополнительную информацию о WDDM см. в разделе [Руководство по проектированию для модели видеодрайвера Windows Vista](https://go.microsoft.com/fwlink/?LinkId=178394).  
  
<a name="registry_settings"></a>   
## <a name="registry-settings"></a>Параметры реестра  
 WPF предоставляет четыре параметра реестра для управления WPF отрисовки:  
  
|Параметр|Описание|  
|-------------|-----------------|  
|**Отключить аппаратное ускорение**|Указывает, следует ли включить аппаратное ускорение.|  
|**Максимальное значение мультисэмплинга**|Определяет степень мультисэмплинга для сглаживания содержимого [!INCLUDE[TLA2#tla_3d](../../../../includes/tla2sharptla-3d-md.md)].|  
|**Требуемая дата видеодрайвера**|Указывает, отключает ли система аппаратное ускорение для драйверов, выпущенных до ноября 2004 г.|  
|**Использовать средство программной прорисовки**|Указывает, следует ли WPF использовать средство программной прорисовки.|  
  
 Эти параметры доступны любой внешней служебной программе настройки, которая знает, как ссылаться на параметры реестра WPF. Эти параметры также можно создать или изменить через прямой доступ к значениям с использованием редактора реестра Windows.  
  
<a name="disablehardwareacceleration"></a>   
## <a name="disable-hardware-acceleration-option"></a>Отключить аппаратное ускорение  
  
|Раздел реестра|Тип значения|  
|------------------|----------------|  
|`HKEY_CURRENT_USER\SOFTWARE\Microsoft\Avalon.Graphics\DisableHWAcceleration`|DWORD|  
  
 Параметр **отключения аппаратного ускорения** позволяет отключить аппаратное ускорение для тестирования и отладки. При появлении артефактов отрисовки в приложении попробуйте отключить аппаратное ускорение. Если артефакт исчезает, проблема может быть связана с видеодрайвером.  
  
 Параметр **отключить аппаратное ускорение** имеет тип DWORD и может принимать значение 0 или 1. Значение 1 отключает аппаратное ускорение. Значение 0 включает аппаратное ускорение, если система соответствует требованиям для аппаратного ускорения; дополнительные сведения см. в разделе [Уровни отрисовки графики](../advanced/graphics-rendering-tiers.md).  
  
<a name="maxmultisample"></a>   
## <a name="maximum-multisample-value"></a>Максимальное значение мультисэмплинга  
  
|Раздел реестра|Тип значения|  
|------------------|----------------|  
|`HKEY_CURRENT_USER\SOFTWARE\Microsoft\Avalon.Graphics\MaxMultisampleType`|DWORD|  
  
 Параметр **максимальное значение мультисэмплинга** дает возможность настроить максимальное сглаживание содержимого [!INCLUDE[TLA2#tla_3d](../../../../includes/tla2sharptla-3d-md.md)]. Используйте этот уровень для отключения сглаживания [!INCLUDE[TLA2#tla_3d](../../../../includes/tla2sharptla-3d-md.md)] в Windows Vista или включения его в Microsoft Windows XP.  
  
 Параметр **максимальное значение мультисэмплинга** является значением типа DWORD в диапазоне от 0 до 16. Значение 0 указывает, что мультисэмплинговое сглаживание трехмерного содержимого должно быть отключено, а при значении 16 будет выполняться попытка использования 16-кратного мультисэмплингового сглаживания, если это поддерживается видеоадаптером. Имейте в виду, что установка этого значения раздела реестра на компьютерах, использующих драйверы XPDM, приведет к потреблению приложениями большого объема дополнительной видеопамяти, уменьшению производительности отрисовки [!INCLUDE[TLA2#tla_3d](../../../../includes/tla2sharptla-3d-md.md)] и потенциально может привести к появлению ошибок отрисовки и проблем стабильности.  
  
 Если этот раздел реестра не задан, WPF по умолчанию равно 0 для драйверов XPDM и 4 — для драйверов WDDM.  
  
<a name="requiredvideodriverdatesetting"></a>   
## <a name="required-video-driver-date-setting"></a>Требуемая дата видеодрайвера  
  
|Раздел реестра|Тип значения|  
|------------------|----------------|  
|`HKEY_CURRENT_USER\SOFTWARE\Microsoft\Avalon.Graphics\RequiredVideoDriverDate`|String|  
  
 В ноябре 2004 года Microsoft выпустила новую версию рекомендаций по тестированию драйверов; драйверы, написанные после этой даты, более стабильны. По умолчанию WPF будет использовать для таких драйверов конвейер аппаратного ускорения и вернется к программной отрисовке для драйверов XPDM, опубликованных до этой даты.  
  
 Параметр **требуемая дата видеодрайвера** позволяет указать альтернативную минимальную дату для драйверов XPDM. Дату ранее ноября 2004 г. следует указывать только в случае, если вы не уверены, что видеодрайвер достаточно стабилен для поддержки WPF.  
  
 Параметр требуемой даты видеодрайвера принимает строку в следующем формате:  
  
| |  
|-|  
|*ГГГГ* `/` *ММ* `/` *ДД*|  
  
 Где *ГГГГ* — четырехзначный год, *MM* — месяц из двух цифр и *ДД* — день из двух цифр. Если это значение не задано, WPF использует ноябрь 2004 года в качестве требуемой даты видеодрайвера.  
  
<a name="usereferencerasterizeroption"></a>   
## <a name="use-reference-rasterizer-option"></a>Использовать средство программной прорисовки  
  
|Раздел реестра|Тип значения|  
|------------------|----------------|  
|`HKEY_CURRENT_USER\SOFTWARE\Microsoft\Avalon.Graphics\UseReferenceRasterizer`|DWORD|  
  
 Параметр **использовать средство программной прорисовки** позволяет принудительно перевести WPF в режим эмуляции аппаратной отрисовки для отладки: WPF переходит в аппаратный режим, но вместо физического устройства использует средство программной прорисовки [!INCLUDE[TLA#tla_d3d](../../../../includes/tlasharptla-d3d-md.md)], d3dref9.dll.  
  
 Средство программной прорисовки является очень медленным, но обходит видеодрайвер во избежание проблем отрисовки, вызванных неполадками драйвера. По этой причине средство программной прорисовки можно использовать для определения, связаны ли проблемы отрисовки с видеодрайвером. Файл d3dref9.dll должен располагаться там, где приложение может получить к нему доступ, например в любом месте системного пути или в локальном каталоге приложения.  
  
 Параметр **использовать средство программной прорисовки** принимает значение типа DWORD. Значение 0 указывает, что средство программной прорисовки не используется. Любое другое ненулевое значение приводит к тому, что WPF будет использовать средство программной прорисовки.  
  
## <a name="see-also"></a>См. также

- [Уровни графической отрисовки](../advanced/graphics-rendering-tiers.md)
- [Общие сведения об отрисовке графики в WPF](wpf-graphics-rendering-overview.md)
