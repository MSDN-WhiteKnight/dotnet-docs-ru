---
description: 'Дополнительные сведения: конечная точка управления рабочим процессом'
title: Конечная точка элемента управления рабочего процесса
ms.date: 03/30/2017
ms.assetid: 1b883334-1590-4fbb-b0d6-65197efe0700
ms.openlocfilehash: 235d7ce3552bb3452fc3ace52249311a7605a519
ms.sourcegitcommit: ddf7edb67715a5b9a45e3dd44536dabc153c1de0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/06/2021
ms.locfileid: "99704411"
---
# <a name="workflow-control-endpoint"></a>Конечная точка элемента управления рабочего процесса

Конечная точка управления рабочим процессом позволяет разработчику вызывать операции удаленного управления экземплярами рабочего процесса, размещенные с помощью <xref:System.ServiceModel.Activities.WorkflowServiceHost>. Эта функция может быть использована для программного выполнения таких операций управления, как приостановка, возобновление и завершение.  
  
> [!WARNING]
> Если в транзакции используется конечная точка управления рабочего процесса и управляемый рабочий процесс содержит <xref:System.Activities.Statements.Persist> действие, экземпляр рабочего процесса будет заблокирован до истечения времени ожидания транзакции.  
  
## <a name="workflow-instance-management"></a>Управление экземплярами рабочего процесса  

 Платформа [!INCLUDE[netfx_current_long](../../../../includes/netfx-current-long-md.md)] включает новый контракт <xref:System.ServiceModel.Activities.IWorkflowInstanceManagement>. Этот контракт определяет последовательность операций управления, которые дают возможность удаленно управлять экземплярами рабочего процесса, размещенными в <xref:System.ServiceModel.Activities.WorkflowServiceHost>. <xref:System.ServiceModel.Activities.WorkflowControlEndpoint> - это стандартная конечная точка, которая обеспечивает реализацию контракта <xref:System.ServiceModel.Activities.IWorkflowInstanceManagement>. <xref:System.ServiceModel.Activities.WorkflowControlClient> - класс, который используется для отправки управляющих операций конечной точке <xref:System.ServiceModel.Activities.WorkflowControlEndpoint>.  
  
 Экземпляры рабочих процессов могут иметь следующие состояния.  
  
 Активен  
 Состояния экземпляра рабочего процесса до достижения завершенного состояния при условии, что экземпляр не находится в приостановленном состоянии. В этом состоянии экземпляр рабочего процесса запускается и обрабатывает сообщения приложения.  
  
 Приостановлена  
 В этом состоянии экземпляр рабочего процесса не запускается даже при наличии действий, которые не выполнялись или были выполнены частично.  
  
 Завершено  
 Завершающее состояние экземпляра рабочего процесса. Экземпляр рабочего процесса не может выполняться после достижения завершенного состояния.  
  
## <a name="iworkflowinstancemanagement"></a>IWorkflowInstanceManagement  

 Интерфейс <xref:System.ServiceModel.Activities.IWorkflowInstanceManagement> определяет набор операций управления с синхронными и асинхронными версиями. Для версий с транзакциями необходимо использовать привязку с поддержкой транзакций. В следующей таблице перечислены поддерживаемые операции управления.  
  
|Операции управления|Описание|  
|-----------------------|-----------------|  
|Прервать|Принудительно останавливает выполнение экземпляра рабочего процесса.|  
|Отменить|Переводит экземпляр рабочего процесса из активного или ожидающего состояния в завершенное состояние.|  
|Выполнить|Обеспечивает возможность запуска экземпляра рабочего процесса.|  
|Приостановить|Переводит экземпляр рабочего процесса из активного состояния в состояние ожидания.|  
|Завершение|Переводит экземпляр рабочего процесса из активного или ожидающего состояния в завершенное состояние.|  
|Unsuspend|Переводит экземпляр рабочего процесса из состояния ожидания в активное состояние.|  
|TransactedCancel|Выполняет операцию отмены для транзакции (передается от клиента или создается локально). Если система сохраняет устойчивое состояние экземпляра рабочего процесса, экземпляр рабочего процесса должен быть сохранен во время выполнения этой операции.|  
|TransactedRun|Выполняет операцию выполнения для транзакции (передается от клиента или создается локально). Если система сохраняет устойчивое состояние экземпляра рабочего процесса, экземпляр рабочего процесса должен быть сохранен во время выполнения этой операции.|  
|TransactedSuspend|Выполняет операцию приостановки для транзакции (передается от клиента или создается локально). Если система сохраняет устойчивое состояние экземпляра рабочего процесса, экземпляр рабочего процесса должен быть сохранен во время выполнения этой операции.|  
|TransactedTerminate|Выполняет операцию прекращения для транзакции (передается от клиента или создается локально). Если система сохраняет устойчивое состояние экземпляра рабочего процесса, экземпляр рабочего процесса должен быть сохранен во время выполнения этой операции.|  
|TransactedUnsuspend|Выполняет операцию возобновления для транзакции (передается от клиента или создается локально). Если система сохраняет устойчивое состояние экземпляра рабочего процесса, экземпляр рабочего процесса должен быть сохранен во время выполнения этой операции.|  
  
 Контракт <xref:System.ServiceModel.Activities.IWorkflowInstanceManagement> не предусматривает возможности создания нового экземпляра рабочего процесса, а лишь обеспечивает управление существующими экземплярами рабочих процессов. Дополнительные сведения о удаленном создании нового экземпляра рабочего процесса см. в статье [Расширяемость узла службы рабочих процессов](workflow-service-host-extensibility.md).  
  
## <a name="workflowcontrolendpoint"></a>WorkflowControlEndpoint  

 <xref:System.ServiceModel.Activities.WorkflowControlEndpoint> является стандартной конечной точкой с фиксированным контрактом <xref:System.ServiceModel.Activities.IWorkflowInstanceManagement>. После добавления к экземпляру <xref:System.ServiceModel.Activities.WorkflowServiceHost> эта конечная точка затем может быть использована для отправки командных операций в любой экземпляр рабочего процесса, размещенного в ведущем экземпляре. Дополнительные сведения о стандартных конечных точках см. в разделе [Стандартные конечные точки](standard-endpoints.md).  
  
## <a name="workflowcontrolclient"></a>WorkflowControlClient  

 <xref:System.ServiceModel.Activities.WorkflowControlClient> является классом, позволяющим отправлять сообщения управления <xref:System.ServiceModel.Activities.WorkflowControlEndpoint> в <xref:System.ServiceModel.Activities.WorkflowServiceHost>. Содержит метод для каждой из операций, поддерживаемых контрактом <xref:System.ServiceModel.Activities.IWorkflowInstanceManagement>, кроме транзакционных операций. <xref:System.ServiceModel.Activities.WorkflowControlClient> определяет необходимость использования транзакционных операций с помощью внешних транзакций.
