---
description: Дополнительные сведения см. в статье механизмы управления доступом
title: Механизмы управления доступом
ms.date: 03/30/2017
helpviewer_keywords:
- WCF security
- access control [WCF]
ms.assetid: 9d576122-3f55-4425-9acf-b23d0781e966
ms.openlocfilehash: 1863e91d67d55bbe9a4dc814d5475d271ea51686
ms.sourcegitcommit: ddf7edb67715a5b9a45e3dd44536dabc153c1de0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/06/2021
ms.locfileid: "99643934"
---
# <a name="access-control-mechanisms"></a>Механизмы управления доступом

С помощью Windows Communication Foundation (WCF) можно управлять доступом несколькими способами. В настоящем разделе кратко описываются различные механизмы и приводятся рассуждения о том, когда и какой способ использовать; раздел должен помочь пользователю выбрать правильный механизм использования. Технологии доступа перечислены в порядке сложности. Самым простым является <xref:System.Security.Permissions.PrincipalPermissionAttribute>; самым сложным - модель удостоверения.  
  
 Помимо этих механизмов, олицетворение и делегирование с помощью WCF объясняются в [делегировании и олицетворении](delegation-and-impersonation-with-wcf.md).  
  
## <a name="principalpermissionattribute"></a>PrincipalPermissionAttribute  

 Для ограничения доступа к методу службы используется <xref:System.Security.Permissions.PrincipalPermissionAttribute>. При применении атрибута к методу его можно использовать для запроса удостоверения или членства конкретного вызывающего объекта в группе Windows или роли ASP.NET. Если подлинность клиента проверена при помощи сертификата X.509, клиенту дается первичное удостоверение, состоящее из имени субъекта и отпечатка сертификата.  
  
 Для контроля доступа к ресурсам на компьютере, на котором работает служба, используется <xref:System.Security.Permissions.PrincipalPermissionAttribute>, если пользователи службы всегда будут частью того же домена Windows, на котором работает служба. Можно легко создать группы Windows, которые имеют заданный уровень доступа (такой как отсутствие доступа, только для чтения или чтение и запись).  
  
 Дополнительные сведения об использовании атрибута см. в разделе [как ограничить доступ с помощью класса PrincipalPermissionAttribute](../how-to-restrict-access-with-the-principalpermissionattribute-class.md). Дополнительные сведения об удостоверении см. в статье [удостоверение службы и проверка подлинности](service-identity-and-authentication.md).  
  
## <a name="aspnet-membership-provider"></a>Поставщик участия ASP.NET  

 Компонент ASP.NET — это поставщик членства. Даже если поставщик членства технически не является механизмом контроля доступа, он позволяет контролировать доступ к службе путем ограничения набора возможных удостоверений, которые могут получить доступ к конечной точке службы. Возможность членства включает в себя базу данных, которая может быть заполнена комбинациями имени/пароля, что позволяет пользователям веб-сайта создавать учетные записи на сайте. Для доступа к службе, использующей поставщик членства, пользователь должен войти в систему, используя свои имя пользователя и пароль.  
  
> [!NOTE]
> Необходимо сначала заполнить базу данных с помощью функции ASP.NET, прежде чем служба WCF сможет использовать ее в целях авторизации.  
  
 Вы также можете использовать функцию членства, если у вас уже есть база данных членства с существующего веб-сайта ASP.NET и вы хотите, чтобы те же пользователи могли использовать службу, авторизованные с теми же именами пользователей и паролями.  
  
 Дополнительные сведения об использовании функции членства в службе WCF см. в разделе [как использовать поставщик членства ASP.NET](how-to-use-the-aspnet-membership-provider.md).  
  
## <a name="aspnet-role-provider"></a>Поставщик ролей ASP.NET  

 Еще одна функция ASP.NET — возможность управлять авторизацией с помощью ролей. Поставщик роли ASP.NET позволяет разработчику создавать роли для пользователей и назначать каждому пользователю роль или роли. Как и в случае с поставщиком членства, роли и назначения хранятся в базе данных и могут быть заполнены с помощью средств, предоставляемых конкретной реализацией поставщика роли ASP.NET. Как и в случае с членством, разработчики WCF могут использовать сведения в базе данных для авторизации пользователей службы по ролям. Они могут, например, использовать поставщик ролей совместно с описанным выше механизмом контроля доступа `PrincipalPermissionAttribute`.  
  
 Вы также можете использовать поставщик роли ASP.NET, если у вас есть существующая база данных поставщика ролей ASP.NET и вы хотите использовать тот же набор правил и назначений пользователей в службе WCF.  
  
 Дополнительные сведения об использовании функции поставщика ролей см. в разделе [как использовать поставщик ролей ASP.NET со службой](how-to-use-the-aspnet-role-provider-with-a-service.md).  
  
## <a name="authorization-manager"></a>Диспетчер авторизации  

 Другой компонент объединяет Диспетчер авторизации (AzMan) с поставщиком роли ASP.NET для авторизации клиентов. Когда ASP.NET размещает веб-службу, AzMan можно интегрировать в приложение, чтобы авторизация службы была выполнена через AzMan. Диспетчер ролей ASP.NET предоставляет API, позволяющий управлять ролями приложений, добавлять пользователей в роли и удалять их из них, а также проверять членство в роли, но не позволяет запрашивать разрешение на выполнение именованной задачи или операции у пользователя. AzMan позволяет определять отдельные операции и комбинировать их в задачах. При помощи AZMan кроме проверок роли можно также проверять, может ли пользователь выполнять задачу. Назначение роли и авторизация задачи могут быть настроены вне приложения или выполнены программно внутри приложения. Оснастка администрирования AzMan консоли управления MMC позволяет администраторам менять задачи, которые может выполнять определенная роль во время выполнения и управлять членством ролей каждого пользователя.  
  
 Вы также можете использовать AzMan и поставщик ролей ASP.NET, если у вас уже есть доступ к существующей установке AzMan и вы хотите авторизовать пользователей службы, используя функции комбинации поставщика AzMan/роль.  
  
 Дополнительные сведения о AzMan и поставщике роли ASP.NET см. [в статье как использовать диспетчер авторизации (AzMan) с ASP.NET 2,0](/previous-versions/msp-n-p/ff649313(v=pandp.10)). Дополнительные сведения об использовании AzMan и поставщика ролей для служб WCF см. в разделе [руководство. Использование поставщика ролей диспетчера авторизации ASP.NET со службой](how-to-use-the-aspnet-authorization-manager-role-provider-with-a-service.md).  
  
## <a name="identity-model"></a>Модель удостоверения  

 Модель удостоверения представляет собой набор API, которые позволяют управлять требованиями и политиками для авторизации клиентов. При помощи модели удостоверения можно рассматривать каждое требование, содержащееся в учетных данных, которое пользователь использовал для проверки своей подлинности, сравнить требования с набором политик для службы и на основе сравнения разрешить или запретить доступ.  
  
 Модель удостоверения используется, если необходимы точный контроль и способность задавать специальные условия перед предоставлением доступа. Например, при использовании <xref:System.Security.Permissions.PrincipalPermissionAttribute>, критерием является просто проверка подлинности удостоверения пользователя и его принадлежность определенной роли. В отличие от этого, при помощи модели удостоверения можно создавать политику, устанавливающую, что для получения разрешения на просмотр документа пользователь должен быть старше 18 лет и иметь действительное водительское удостоверение.  
  
 Одним из примеров, где можно воспользоваться контролем доступа на базе требования модели удостоверения, является использование учетных данных федерации в сценарии выданного токена. Дополнительные сведения о Федерации и выданных маркерах см. в разделе [Федерации и](federation-and-issued-tokens.md)выданные маркеры.  
  
 Дополнительные сведения о модели удостоверений см. [в статье Управление утверждениями и авторизацией с помощью модели удостоверений](managing-claims-and-authorization-with-the-identity-model.md).  
  
## <a name="see-also"></a>См. также

- <xref:System.Security.Permissions.PrincipalPermissionAttribute>
- [Практическое руководство. Ограничение доступа с использованием класса PrincipalPermissionAttribute](../how-to-restrict-access-with-the-principalpermissionattribute-class.md)
- [Практическое руководство. Использование поставщика ролей ASP.NET со службой](how-to-use-the-aspnet-role-provider-with-a-service.md)
- [Практическое руководство. Использование поставщика ролей диспетчера авторизации ASP.NET со службой](how-to-use-the-aspnet-authorization-manager-role-provider-with-a-service.md)
- [Управление утверждениями и авторизацией с помощью модели удостоверения](managing-claims-and-authorization-with-the-identity-model.md)
- [Делегирование и олицетворение](delegation-and-impersonation-with-wcf.md)
