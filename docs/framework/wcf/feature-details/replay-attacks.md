---
description: 'Дополнительные сведения: атаки с повторным воспроизведением'
title: Атаки с повторением
ms.date: 03/30/2017
ms.assetid: 7a17e040-93cd-4432-81b9-9f62fec78c8f
ms.openlocfilehash: b367bd6238f85471871c59b393a8f28a40c4ddba
ms.sourcegitcommit: ddf7edb67715a5b9a45e3dd44536dabc153c1de0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/06/2021
ms.locfileid: "99632858"
---
# <a name="replay-attacks"></a>Атаки с повторением

*Атака с воспроизведением* происходит, когда злоумышленник копирует поток сообщений между двумя сторонами и воспроизводит поток на одной или нескольких Сторонах. Если не приняты ответные меры, атакованные компьютеры обрабатывают этот поток как допустимые сообщения, что приводит к ряду негативных последствий, таких как повторные заказы одного элемента.  
  
## <a name="bindings-may-be-subject-to-reflection-attacks"></a>Привязки могут подвергаться атакам отражения  

 *Атаки с отражением* воспроизводят сообщения обратно отправителю, как если бы они поступили от получателя в качестве ответа. Стандартное *обнаружение воспроизведения* в механизме Windows Communication Foundation (WCF) не обрабатывает это автоматически.  
  
 Атаки на отражение по умолчанию устранены, поскольку модель службы WCF добавляет идентификатор подписанного сообщения для запроса сообщений и ждет подписанного `relates-to` заголовка в ответных сообщениях. В результате сообщение запроса не может быть воспроизведено в качестве ответа. В сценариях защищенного надежного обмена сообщениями (RM) для предотвращения атак отражения принимаются следующие меры.  
  
- Схемы сообщения о создании последовательности и ответного сообщения о создании последовательности должны быть различными.  
  
- В симплексных последовательностях сообщения о последовательности, отправляемые клиентом, не могут быть воспроизведены обратно клиенту, поскольку клиент не распознает такие сообщения.  
  
- В дуплексных последовательностях два идентификатора последовательности должны быть уникальными. Таким образом, исходящее сообщение последовательности не может быть воспроизведено в качестве входящего сообщения последовательности (все заголовки последовательности и тела сообщений также являются подписанными).  
  
 Единственным типом привязок, чувствительных к атакам отражения, являются специальные привязки, в которых отключен протокол WS-Addressing и в которых используется защита на основе симметричного ключа. В привязке <xref:System.ServiceModel.BasicHttpBinding> по умолчанию не используется протокол WS-Addressing, однако защита на основе симметричных ключей используется таким образом, что привязка не является уязвимой для атаки такого типа.  
  
 Для устранения рисков специальных привязок следует не устанавливать контекст безопасности или требовать использования заголовков WS-Addressing.  
  
## <a name="web-farm-attacker-replays-request-to-multiple-nodes"></a>Веб-ферма: злоумышленник воспроизводит запрос на нескольких узлах  

 Клиент использует службу, которая реализована на веб-ферме. Злоумышленник воспроизводит запрос, отправленный на один узел фермы, на другом узле фермы. Кроме того, в случае перезапуска службы кэш воспроизведения очищается, что позволяет злоумышленнику воспроизвести запрос. (В кэше содержатся использованные ранее значения подписи сообщения. Кэш не позволяет воспроизводить их, так что такие подписи могут использоваться только один раз. Кэш воспроизведения не является общим в масштабах веб-фермы.)  
  
 Возможные способы устранения рисков  
  
- Использование безопасности режима сообщений с маркерами контекста безопасности с отслеживанием состояния (как с включенным, так и с отключенным безопасным диалогом). Дополнительные сведения см. [в разделе инструкции. Создание маркера контекста безопасности для безопасного сеанса](how-to-create-a-security-context-token-for-a-secure-session.md).  
  
- Настройка службы для использования безопасности уровня транспорта.  
  
## <a name="see-also"></a>См. также

- [Вопросы безопасности](security-considerations-in-wcf.md)
- [Раскрытие информации](information-disclosure.md)
- [Несанкционированное получение привилегий](elevation-of-privilege.md)
- [Отказ в обслуживании](denial-of-service.md)
- [Незаконное изменение](tampering.md)
- [Неподдерживаемые сценарии](unsupported-scenarios.md)
