---
description: Дополнительные сведения см. в статье Создание примеров Windows Communication Foundation
title: Построение примеров Windows Communication Foundation
ms.date: 03/30/2017
ms.assetid: 2899e7a5-9cb2-4e8d-b8d2-f31391549198
ms.openlocfilehash: a53073ac92369574b204dbce998bebb8844fce8d
ms.sourcegitcommit: ddf7edb67715a5b9a45e3dd44536dabc153c1de0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/06/2021
ms.locfileid: "99704190"
---
# <a name="building-the-windows-communication-foundation-samples"></a>Построение примеров Windows Communication Foundation

Примеры Windows Communication Foundation (WCF) можно построить с помощью Visual Studio IDE или с помощью команды **MSBuild** из командной строки. В этом разделе описаны обе эти процедуры.

> [!NOTE]
> Перед сборкой или запуском любого из примеров WCF убедитесь, что вы выполнили [однократную процедуру настройки для Windows Communication Foundation примеров](one-time-setup-procedure-for-the-wcf-samples.md).

## <a name="to-build-the-sample-using-a-command-prompt"></a>Сборка образца с использованием командной строки

1. Откройте Командная строка разработчика для Visual Studio и перейдите к вложенному каталогу, зависящему от языка, в папке, в которой был установлен пример.

2. Введите `msbuild` в командной строке. Файлы клиентской программы создаются в *клиент\бин* , а файлы служебной программы — в *сервице\бин*. Если служба размещена службы IIS (IIS), файлы служебной программы также копируются в каталог *servicemodelsamples* и в подкаталог *\bin* .

> [!NOTE]
> Необходимо задать списки управления доступом на *%системдриве%\инетпуб\ввврут* , чтобы предоставить разрешения на изменение учетной записи, под которой выполняется. В противном случае некоторые события построения могут завершиться сбоем. Либо можно оставить списки управления доступом неизменными и запускать командную строку пакета SDK от имени администратора.

## <a name="to-build-the-sample-using-visual-studio"></a>Сборка образца с использованием Visual Studio

1. В меню **файл** в Visual Studio выберите пункт **Открыть**  >  **проект или решение**. Перейдите в подкаталог, зависящий от языка, в каталоге, в котором был установлен образец, и дважды щелкните значок SLN-файла, чтобы открыть решение в Visual Studio.

1. В меню **Сборка** выберите **Перестроить решение**.

   Файлы построения клиентской программы сохраняются в папке client\bin, а файлы построения служебной программы - в папке service\bin. Если служба размещена в службах IIS, файлы служебной программы также копируются в каталог *servicemodelsamples* и в подкаталог *\bin* .

> [!NOTE]
> Необходимо задать списки управления доступом для каталога %systemdrive%\inetpub\wwwroot, чтобы предоставить разрешения на изменение учетной записи, от имени которой выполняются операции. В противном случае некоторые события построения могут завершиться сбоем. Либо можно оставить списки управления доступом неизменными и запускать командную строку SDK или Visual Studio от имени администратора. Некоторые действия Visual Studio (например, присоединение отладчика к рабочему процессу ASP.NET) также требуют прав администратора.

## <a name="setup-batch-files-and-scripts"></a>Пакетные файлы и скрипты установки

 Setup.exe и Cleanup.exe пакетные файлы и скрипты следует запускать из Командная строка разработчика для Visual Studio. Некоторые файлы установки и очистки выполняют задачи, требующие прав администратора, и должны запускаться с этими правами.

## <a name="important-security-information-about-metadata-endpoints"></a>Важные сведения по безопасности конечных точек метаданных

 Чтобы предотвратить непреднамеренное раскрытие потенциально конфиденциальных метаданных службы, конфигурация по умолчанию для служб Windows Communication Foundation (WCF) отключает публикацию метаданных. Такое расширение функциональности по умолчанию защищено, но это также означает, что при этом невозможно использовать средство импорта метаданных (например, Svcutil.exe) для создания клиентского кода, необходимого для вызова службы, если поведение публикации не включено явно в конфигурации. Чтобы испытывать образец было проще, почти все образцы предоставляют незащищенную конечную точку публикации метаданных. Такие конечные точки являются потенциально доступными для анонимных не прошедших проверку подлинности потребителей, поэтому перед развертыванием таких конечных точек следует соблюдать осторожность и убедиться, что публичное раскрытие метаданных службы уместно. Дополнительные сведения о публикации метаданных службы см. в статье пример [поведения публикации метаданных](metadata-publishing-behavior.md) . Пример защиты конечной точки метаданных см. в примере [пользовательской конечной точки защищенных метаданных](custom-secure-metadata-endpoint.md) .

## <a name="exception-handling"></a>Обработка исключений

 В целом эти образцы не включают обработку исключений для того, чтобы код был сконцентрирован на теме образца. Дополнительные сведения об обработке исключений см. в разделе пример [ожидаемых исключений](expected-exceptions.md) .

## <a name="regenerating-clients-and-configuration-with-svcutil"></a>Восстановление клиентов и конфигурации с помощью средства Svcutil

 Чтобы повторно создать код клиента и конфигурацию для большинства примеров, можно использовать [средство служебной программы метаданных ServiceModel (Svcutil.exe)](../servicemodel-metadata-utility-tool-svcutil-exe.md) . Некоторые образцах требуют редактирования конфигурации вручную. Например, если средство Svcutil.exe используется для восстановления конфигурации образца, использующего учетные данные сертификата клиента, необходимо вручную указать ранее заданные учетные данные. В некоторых образцах используются особые параметры средства Svcutil.exe, влияющие на создаваемый код; эти параметры описаны в соответствующих разделах образце.

### <a name="to-regenerate-the-client-and-configuration-files"></a>Восстановление клиента и файлов конфигурации

1. Откройте окно командной строки SDK и перейдите к языковому подкаталогу в каталоге, где установлен образец.

2. Если служба размещается на веб-сервере, воспользуйтесь следующей командой.

    ```console
    svcutil.exe /n:"http://Microsoft.ServiceModel.Samples,Microsoft.ServiceModel.Samples" http://localhost/servicemodelsamples/service.svc/mex /out:generatedClient.cs
    ```

     Если служба размещается резидентно, воспользуйтесь следующей командой.

    ```console
    svcutil.exe /n:"http://Microsoft.ServiceModel.Samples,Microsoft.ServiceModel.Samples" http://localhost:8000/servicemodelsamples/service.svc/mex /out:generatedClient.cs
    ```

     Замените на `http://localhost:8000/ServiceModelSamples/service.svc/mex` адрес конечной точки обмена метаданными саморазмещенной службы.

     Чтобы создать клиент на языке Visual Basic, воспользуйтесь следующей командой.

    ```console
    svcutil.exe /n:"http://Microsoft.ServiceModel.Samples,Microsoft.ServiceModel.Samples" http://localhost/servicemodelsamples/service.svc/mex /l:vb /out:generatedClient.vb
    ```

     Если служба размещается резидентно, воспользуйтесь следующей командой.

    ```console
    svcutil.exe /n:"http://Microsoft.ServiceModel.Samples,Microsoft.ServiceModel.Samples" http://localhost:8000/servicemodelsamples/service.svc/mex /l:vb /out:generatedClient.vb
    ```

    > [!NOTE]
    > Чтобы пропустить создание конфигурации клиента, добавьте параметр **/noconfig** .

## <a name="see-also"></a>См. также

- [Выполнение примеров Windows Communication Foundation](running-the-samples.md)
- [Служебное средство ServiceModel Metadata Utility Tool (Svcutil.exe)](../servicemodel-metadata-utility-tool-svcutil-exe.md)
