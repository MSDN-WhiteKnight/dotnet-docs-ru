<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>&#1054;&#1092;&#1086;&#1088;&#1084;&#1083;&#1077;&#1085;&#1080;&#1077; &#1074; WPF | &#1053;&#1077;&#1086;&#1092;&#1080;&#1094;&#1080;&#1072;&#1083;&#1100;&#1085;&#1072;&#1103; &#1076;&#1086;&#1082;&#1091;&#1084;&#1077;&#1085;&#1090;&#1072;&#1094;&#1080;&#1103; .NET </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="&#1054;&#1092;&#1086;&#1088;&#1084;&#1083;&#1077;&#1085;&#1080;&#1077; &#1074; WPF | &#1053;&#1077;&#1086;&#1092;&#1080;&#1094;&#1080;&#1072;&#1083;&#1100;&#1085;&#1072;&#1103; &#1076;&#1086;&#1082;&#1091;&#1084;&#1077;&#1085;&#1090;&#1072;&#1094;&#1080;&#1103; .NET ">
    <meta name="generator" content="docfx 2.40.12.0">
    
    <link rel="shortcut icon" href="../../../favicon.ico">
    <link rel="stylesheet" href="../../../styles/docfx.vendor.css">
    <link rel="stylesheet" href="../../../styles/docfx.css">
    <link rel="stylesheet" href="../../../styles/main.css">
    <meta property="docfx:navrel" content="../../../toc.html">
    <meta property="docfx:tocrel" content="toc.html">
    
    
    
  </head>
  <body data-spy="scroll" data-target="#affix" data-offset="120">
    <div id="wrapper">
      <header>
        
        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              
              <a class="navbar-brand" href="../../../index.html">
                <img id="logo" class="svg" src="../../../logo.svg" alt="">
              </a>
            </div>
            <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="search">
                <div class="form-group">
                  <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                </div>
              </form>
            </div>
          </div>
        </nav>
        
        <div class="subnav navbar navbar-default">
          <div class="container hide-when-search" id="breadcrumb">
            <ul class="breadcrumb">
              <li></li>
            </ul>
          </div>
        </div>
      </header>
      <div role="main" class="container body-content hide-when-search">
        
        <div class="sidenav hide-when-search">
          <a class="btn toc-toggle collapse" data-toggle="collapse" href="#sidetoggle" aria-expanded="false" aria-controls="sidetoggle">Show / Hide Table of Contents</a>
          <div class="sidetoggle collapse" id="sidetoggle">
            <div id="sidetoc"></div>
          </div>
        </div>
        <div class="article row grid-right">
          <div class="col-md-10">
            <article class="content wrap" id="_content" data-uid="">
<h1 id="typography-in-wpf">Оформление в WPF</h1>

<p>В этом разделе содержатся вводные сведения об основных типографических возможностях WPF. Эти возможности включают в себя повышение качества и производительности отрисовки текста, типографическую поддержку OpenType, расширенный международный текст, улучшенную поддержку шрифтов и новые текстовые API.</p>
<p><a name="Improved_Quality_and_Performance_of_Text"></a></p>
<h2 id="improved-quality-and-performance-of-text">Улучшенное качество и производительность работы с текстом</h2>
<p>Текст в WPF отрисовывается с помощью Технология Microsoft ClearType, что улучшает четкость и читаемость текста. ClearType — это программная технология, разработанная компанией Microsoft для улучшения удобочитаемости текста на современных ЖК-мониторах (жидкокристаллических дисплеях), например экранах ноутбуков, карманных ПК и плоскопанельных мониторах. ClearType использует Субпиксельная отрисовка, которая позволяет текста, отображаемого с повышенной точностью формы, выравнивая символы до дробной части пикселя. Дополнительное разрешение повышает четкость мелких деталей отображаемого текста, значительно облегчая его длительное чтение. Другим улучшением ClearType в WPF является применение устранения контурных неровностей по направлению оси Y, которое сглаживает неровные края на верхних и нижних частях в текстовых знаках. Дополнительные сведения о возможностях ClearType см. в разделе <a href="cleartype-overview.html">Общие сведения о технологии ClearType</a>.</p>
<p><img src="media/typography-in-wpf/text-y-direction-antialiasing.gif" alt="Текст со сглаживанием ClearType по оси Y"><br>
Текст со сглаживанием ClearType по оси Y</p>
<p>Весь конвейер отрисовки текста может поддерживать аппаратное ускорение в WPF, позволяя применять компьютер с минимальными требованиями к оборудованию. Отрисовка, которая не может быть выполнена на аппаратном уровне, использует программный рендеринг. Аппаратное ускорение влияет на все этапы конвейера отрисовки текста — от сохранения отдельных глифов, их компоновки в глифы для выполнения, применения эффектов и до применения алгоритма смешивания ClearType для окончательной отрисовки. Дополнительные сведения об аппаратном ускорении см. в разделе <a href="graphics-rendering-tiers.html">Уровни графической отрисовки</a>.</p>
<p><img src="media/typography-in-wpf/text-rendering-pipeline.png" alt="Диаграмма конвейера отрисовки текста"></p>
<p>Кроме того, анимированный текст, независимо от того, состоит он их знаков или глифов, использует все преимущества возможностей графического оборудования, работающего под управлением WPF. Это приводит к сглаживанию текстовой анимации.</p>
<p><a name="Rich_Typography"></a></p>
<h2 id="rich-typography">Типография с широкими возможностями</h2>
<p>Формат шрифта OpenType является расширением формата TrueType®. Формат шрифта OpenType был разработан совместно корпорацией Microsoft и Adobe и предоставляет широкий набор дополнительных типографических возможностей. <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.documents.typography">Typography</a> Объект предоставляет многие расширенные возможности OpenType шрифтов, таких как изменение стилей и swash. Windows SDK предоставляет набор образцов шрифтов OpenType, разработанных с широкими возможностями, такие как шрифты Pericles и Pescadero. Дополнительные сведения см. в разделе <a href="sample-opentype-font-pack.html">Пакет образцов шрифтов OpenType</a>.</p>
<p>Шрифт OpenType Pericles содержит дополнительные глифы, поддерживающие изменение стилей для стандартных наборов глифов. Приведенный ниже текст отображает глифы с изменением стиля.</p>
<p><img src="media/typography-in-wpf/opentype-stylistic-alternate-glyphs.gif" alt="Текст, использующий OpenType Стилистические варианты глифов" title="текст, использующий OpenType Стилистические варианты глифов"></p>
<p>Swash-глифы являются декоративными глифами, которые используют сложную орнаментацию, часто связанную с каллиграфией. Следующий текст отображает стандартные и swash-глифы для шрифта Pescadero.</p>
<p><img src="media/typography-in-wpf/opentype-standard-swash-glyphs.gif" alt="Текст, использующий стандартные и swash-глифы OpenType" title="текст, использующий стандартные и swash-глифы OpenType"></p>
<p>Дополнительные сведения о возможностях OpenType см. в разделе <a href="opentype-font-features.html">Возможности шрифта OpenType</a>.</p>
<p><a name="Enhanced_International_Text_Support"></a></p>
<h2 id="enhanced-international-text-support">Расширенная многоязыковая поддержка текста</h2>
<p>WPF поддерживает расширение международного текста, предоставляя следующие возможности:</p>
<ul>
<li><p>Автоматическая расстановка пробелов во всех системах письма с использованием адаптивного измерения.</p>
</li>
<li><p>Широкая поддержка международного текста. Дополнительные сведения см. в разделе <a href="globalization-for-wpf.html">Глобализация для WPF</a>.</p>
</li>
<li><p>Управляемый языком разрыв строки, расстановка переносов и выравнивание.</p>
</li>
</ul>
<p><a name="Enhanced_Font_Support"></a></p>
<h2 id="enhanced-font-support">Расширенная поддержка шрифтов</h2>
<p>WPF предоставляет расширенную поддержку шрифта, предоставляя следующие возможности:</p>
<ul>
<li><p>Юникод для всех текстов. Поведение шрифта и выбор, больше не требующий набора символов или кодовой страницы.</p>
</li>
<li><p>Поведение шрифта зависит от глобальных настроек, таких как язык системы.</p>
</li>
<li><p>Отдельные <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.fontweight">FontWeight</a>, <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.fontstretch">FontStretch</a>, и <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.fontstyle">FontStyle</a> типов для определения <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.fontfamily">FontFamily</a>. Это обеспечивает большую гибкость, чем в программировании Win32, в котором логические сочетания курсивного и полужирного шрифта используются для определения семейства шрифтов.</p>
</li>
<li><p>Направление письма (горизонтальное или вертикальное) обрабатывается в зависимости от имени шрифта.</p>
</li>
<li><p>Связывание и восстановление шрифта в переносимом файле XML с использованием технологии составного шрифта. Составные шрифты позволяют конструировать все шрифты многоязычного диапазона. Составные шрифты также предоставляют механизм, который позволяет избежать отображения отсутствующих глифов. Дополнительные сведения см. в разделе &quot;Примечания&quot; в <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.fontfamily">FontFamily</a> класса.</p>
</li>
<li><p>Международные шрифты, созданные из составных шрифтов с использованием группы одноязыковых шрифтов. Это позволяет избежать затрат ресурсов при разработке шрифтов для нескольких языков.</p>
</li>
<li><p>Составные шрифты внедряются в документ, тем самым обеспечивая его совместимость. Дополнительные сведения см. в разделе &quot;Примечания&quot; в <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.fontfamily">FontFamily</a> класса.</p>
</li>
</ul>
<p><a name="New_Text_APIs"></a></p>
<h2 id="new-text-application-programming-interfaces-apis">Новые API</h2>
<p>WPF предоставляет несколько текстовых API для разработчиков, которые используются при включении текста в своих приложениях. Эти API сгруппированы в три указанные далее категории.</p>
<ul>
<li><p><strong>Макет и пользовательский интерфейс</strong>. Общие элементы управления текстом для графический пользовательский интерфейс (GUI).</p>
</li>
<li><p><strong>Облегченное рисование текста</strong>. Позволяет рисовать текст непосредственно в объектах.</p>
</li>
<li><p><strong>Дополнительное форматирование текста</strong>. Позволяет реализовать пользовательский обработчик текста.</p>
</li>
</ul>
<h3 id="layout-and-user-interface">Макет и пользовательский интерфейс</h3>
<p>На высшем уровне функциональности текстовые API предоставляют Общие UI  элементы управления, например <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.controls.label">Label</a>, <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.controls.textblock">TextBlock</a>, и <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.controls.textbox">TextBox</a>. Эти элементы управления предоставляют основные элементы UI в приложении и способ представления текста и взаимодействия с ним. Элементы управления, например <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.controls.richtextbox">RichTextBox</a> и <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.controls.passwordbox">PasswordBox</a> включить более сложных или специализированные обработки текста. И классы, такие как <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.documents.textrange">TextRange</a>, <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.documents.textselection">TextSelection</a>, и <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.documents.textpointer">TextPointer</a> предоставляют удобное управление текстом. Эти UI элементы управления предоставляют свойства, такие как <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.controls.control.fontfamily">FontFamily</a>, <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.controls.control.fontsize">FontSize</a>, и <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.controls.control.fontstyle">FontStyle</a>, позволяющие управлять шрифтами, используемый для отрисовки текста.</p>
<h4 id="using-bitmap-effects-transforms-and-text-effects">Использование эффектов точечных рисунков и текстовых эффектов</h4>
<p>WPF позволяет создавать визуально интересные применения текста, используя такие эффекты для точечных рисунков, преобразования и текстовые эффекты возможности. В следующем примере показан типичный эффект тени, примененный к тексту.</p>
<p><img src="media/typography-in-wpf/drop-shadow-text-effect.jpg" alt="Тень текста с мягкостью = 0,25"></p>
<p>В следующем примере показан эффект тени и шума, примененный к тексту.</p>
<p><img src="media/typography-in-wpf/drop-shadow-noise-text.jpg" alt="Тень текста с шумом"></p>
<p>В следующем примере показан эффект внешнего свечения, примененный к тексту.</p>
<p><img src="media/typography-in-wpf/text-shadow-glow-effect.jpg" alt="Тень текста с использованием OuterGlowBitmapEffect"></p>
<p>В следующем примере показан эффект размытия, примененный к тексту.</p>
<p><img src="media/typography-in-wpf/text-shadow-blur-effect.jpg" alt="Тень текста с использованием BlurBitmapEffect"></p>
<p>В следующем примере показаны вторая строка текста, масштабированная на 150 % вдоль оси X, и третья строка текста, масштабированная на 150 % вдоль оси Y.</p>
<p><img src="media/typography-in-wpf/scaled-text-scaletransform.jpg" alt="Текст, масштабируемый с использованием ScaleTransform"></p>
<p>В следующем примере показан текст, наклоненный вдоль оси X.</p>
<p><img src="media/typography-in-wpf/skewed-transformed-text.jpg" alt="Текст, искаженный с использованием SkewTransform"></p>
<p>Объект <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.texteffect">TextEffect</a> объект — это вспомогательный объект, который позволяет обрабатывать текст как одну или несколько групп символов в текстовой строке. В следующем примере показан поворот отдельных символов. Поворот каждого символа осуществляется независимо от других с интервалом в 1 секунду.</p>
<p><img src="media/typography-in-wpf/rotating-text-effect.jpg" alt="Снимок экрана текстового эффекта: повернутый текст"></p>
<h4 id="using-flow-documents">Использование документов нефиксированного формата</h4>
<p>Помимо общих UI элементов управления, WPF предлагает элемент управления макетом для презентации текста — <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.documents.flowdocument">FlowDocument</a> элемент. <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.documents.flowdocument">FlowDocument</a> Элемент, в сочетании с <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.controls.documentviewer">DocumentViewer</a> элемент предоставляет элемент управления для больших объемов текста с различными требованиями к макету. Элементы управления макета обеспечивают доступ к дополнительным возможностям оформления посредством <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.documents.typography">Typography</a> объекта и свойств, относящихся к шрифту, других UI элементов управления.</p>
<p>В следующем примере показано текстовое содержимое, размещенное в <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.controls.flowdocumentreader">FlowDocumentReader</a>, который предоставляет поиска, переходов, разбиения на страницы и масштабирования содержимого.</p>
<p><img src="media/typography-in-wpf/typography-text-flowdocumentreader.png" alt="Снимок экрана, показывающий шрифты OpenType."></p>
<p>Дополнительные сведения см. в разделе <a href="documents-in-wpf.html">Документы в WPF</a>.</p>
<h3 id="lightweight-text-drawing">Облегченное рисование текста</h3>
<p>Можно рисовать текст непосредственно в WPF объектов с помощью <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.drawingcontext.drawtext">DrawText</a> метод <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.drawingcontext">DrawingContext</a> объекта. Чтобы использовать этот метод, создайте <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.formattedtext">FormattedText</a> объекта. Этот объект позволяет рисовать многострочный текст, в котором каждый символ в текст можно форматировать отдельно. Функциональные возможности <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.formattedtext">FormattedText</a> объект содержит множество функциональных возможностей флагов DrawText в Windows API. Кроме того <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.formattedtext">FormattedText</a> содержит функциональные возможности, такие как поддержка многоточия, в котором многоточие отображается, когда текст выходит за границы. В следующем примере показан текст, имеющий несколько примененных к нему форматов, в том числе линейный градиент на втором и третьем словах.</p>
<p><img src="media/typography-in-wpf/text-formatted-linear-gradient.jpg" alt="Отображенный текст с использованием объекта FormattedText"></p>
<p>Можно преобразовать форматированный текст в <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.geometry">Geometry</a> объектов, что позволяет создавать другие типы наглядного текста. Например, можно создать <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.geometry">Geometry</a> объект, основанный на контуре строки текста.</p>
<p><img src="media/typography-in-wpf/text-outline-linear-gradient.jpg" alt="Оконтуривание текста с использованием кисти линейного градиента"></p>
<p>В следующих примерах показаны несколько способов создания визуальных эффектов посредством изменения штриха, заливки и выделения преобразованного текста.</p>
<p><img src="media/typography-in-wpf/fill-stroke-text-effect.jpg" alt="Текст с различными цветами для заполнения штриха"></p>
<p><img src="media/typography-in-wpf/image-brush-application.jpg" alt="Текст с кистью изображения, примененной к штриху"></p>
<p><img src="media/typography-in-wpf/image-brush-text-application.jpg" alt="Текст с кистью изображения, примененной для вычерчивания и выделения"></p>
<p>Дополнительные сведения о <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.formattedtext">FormattedText</a> объекта, см. в разделе <a href="drawing-formatted-text.html">Рисование форматированного текста</a>.</p>
<h3 id="advanced-text-formatting">Дополнительное форматирование текста</h3>
<p>На наиболее продвинутом уровне текста API, WPF предлагает возможность создания пользовательской разметки текста с помощью <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.textformatting.textformatter">TextFormatter</a> объектов и других типов в <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.textformatting">System.Windows.Media.TextFormatting</a> пространства имен. <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.textformatting.textformatter">TextFormatter</a> И связанные классы позволяют реализовать макет пользовательского текста, который поддерживает пользовательское определение формата символов, стили абзаца, правила разрыва строки и другие возможности разметки для международного текста. Существует несколько случаев, когда нужно переопределить реализацию по умолчанию поддержки макета текста WPF. Однако если был создан элемент управления или приложение редактирования текста, может потребоваться реализация, отличная от реализации WPF по умолчанию.</p>
<p>В отличие от традиционного текстового API, <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.textformatting.textformatter">TextFormatter</a> взаимодействует с клиентом макета текста через набор методов обратного вызова. Требуется клиент для предоставления этих методов в реализации <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.textformatting.textsource">TextSource</a> класса. Следующая диаграмма иллюстрирует взаимодействие макета текста между клиентским приложением и <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.textformatting.textformatter">TextFormatter</a>.</p>
<p><img src="media/typography-in-wpf/text-layout-text-formatter-interaction.png" alt="Схема клиента структуры текста и TextFormatter"></p>
<p>Дополнительные сведения о создании пользовательского макета текста см. в разделе <a href="advanced-text-formatting.html">Дополнительное форматирование текста</a>.</p>
<h2 id="see-also">См. также</h2>
<ul>
<li><a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.formattedtext">FormattedText</a></li>
<li><a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.textformatting.textformatter">TextFormatter</a></li>
<li><a href="cleartype-overview.html">Общие сведения о технологии ClearType</a></li>
<li><a href="opentype-font-features.html">Возможности шрифта OpenType</a></li>
<li><a href="drawing-formatted-text.html">Рисование форматированного текста</a></li>
<li><a href="advanced-text-formatting.html">Дополнительное форматирование текста</a></li>
<li><a href="optimizing-performance-text.html">Текста</a></li>
<li><a href="https://docs.microsoft.com/typography/">Microsoft Typography</a></li>
</ul>
</article>
          </div>
          
          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">
              <div class="contribution">
                <ul class="nav">
                </ul>
              </div>
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
              <!-- <p><a class="back-to-top" href="#top">Back to top</a><p> -->
              </nav>
            </div>
          </div>
        </div>
      </div>
      
      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right">
              <a href="#top">Back to top</a>
            </span>
            <span><a href="https://github.com/MSDN-WhiteKnight/dotnet-docs-ru">Неофициальная документация по .NET на русском языке</a>. Лицензия: <a href="https://github.com/MSDN-WhiteKnight/dotnet-docs-ru/blob/main/LICENSE">CC-BY 4.0</a>. Основано на <a href="https://docs.microsoft.com/ru-ru/dotnet/">документации по .NET с Microsoft Docs</a><br>Generated by <strong>DocFX</strong></span><script type="text/javascript">(function(m,e,t,r,i,k,a){m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};m[i].l=1*new Date();k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)})(window, document, "script", "https://mc.yandex.ru/metrika/tag.js", "ym");ym(65150713, "init", {clickmap:true,trackLinks:true,accurateTrackBounce:true});</script><noscript><div><img src="https://mc.yandex.ru/watch/65150713" style="position:absolute; left:-9999px;" alt=""></div></noscript>
            
          </div>
        </div>
      </footer>
    </div>
    
    <script type="text/javascript" src="../../../styles/docfx.vendor.js"></script>
    <script type="text/javascript" src="../../../styles/docfx.js"></script>
    <script type="text/javascript" src="../../../styles/main.js"></script>
  </body>
</html>
