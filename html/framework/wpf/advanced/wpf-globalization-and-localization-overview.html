<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>&#1054;&#1073;&#1097;&#1080;&#1077; &#1089;&#1074;&#1077;&#1076;&#1077;&#1085;&#1080;&#1103; &#1086; &#1075;&#1083;&#1086;&#1073;&#1072;&#1083;&#1080;&#1079;&#1072;&#1094;&#1080;&#1080; &#1080; &#1083;&#1086;&#1082;&#1072;&#1083;&#1080;&#1079;&#1072;&#1094;&#1080;&#1080; WPF | &#1053;&#1077;&#1086;&#1092;&#1080;&#1094;&#1080;&#1072;&#1083;&#1100;&#1085;&#1072;&#1103; &#1076;&#1086;&#1082;&#1091;&#1084;&#1077;&#1085;&#1090;&#1072;&#1094;&#1080;&#1103; .NET </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="&#1054;&#1073;&#1097;&#1080;&#1077; &#1089;&#1074;&#1077;&#1076;&#1077;&#1085;&#1080;&#1103; &#1086; &#1075;&#1083;&#1086;&#1073;&#1072;&#1083;&#1080;&#1079;&#1072;&#1094;&#1080;&#1080; &#1080; &#1083;&#1086;&#1082;&#1072;&#1083;&#1080;&#1079;&#1072;&#1094;&#1080;&#1080; WPF | &#1053;&#1077;&#1086;&#1092;&#1080;&#1094;&#1080;&#1072;&#1083;&#1100;&#1085;&#1072;&#1103; &#1076;&#1086;&#1082;&#1091;&#1084;&#1077;&#1085;&#1090;&#1072;&#1094;&#1080;&#1103; .NET ">
    <meta name="generator" content="docfx 2.40.12.0">
    
    <link rel="shortcut icon" href="../../../favicon.ico">
    <link rel="stylesheet" href="../../../styles/docfx.vendor.css">
    <link rel="stylesheet" href="../../../styles/docfx.css">
    <link rel="stylesheet" href="../../../styles/main.css">
    <meta property="docfx:navrel" content="../../../toc.html">
    <meta property="docfx:tocrel" content="toc.html">
    
    
    
  </head>
  <body data-spy="scroll" data-target="#affix" data-offset="120">
    <div id="wrapper">
      <header>
        
        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              
              <a class="navbar-brand" href="../../../index.html">
                <img id="logo" class="svg" src="../../../logo.svg" alt="">
              </a>
            </div>
            <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="search">
                <div class="form-group">
                  <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                </div>
              </form>
            </div>
          </div>
        </nav>
        
        <div class="subnav navbar navbar-default">
          <div class="container hide-when-search" id="breadcrumb">
            <ul class="breadcrumb">
              <li></li>
            </ul>
          </div>
        </div>
      </header>
      <div role="main" class="container body-content hide-when-search">
        
        <div class="sidenav hide-when-search">
          <a class="btn toc-toggle collapse" data-toggle="collapse" href="#sidetoggle" aria-expanded="false" aria-controls="sidetoggle">Show / Hide Table of Contents</a>
          <div class="sidetoggle collapse" id="sidetoggle">
            <div id="sidetoc"></div>
          </div>
        </div>
        <div class="article row grid-right">
          <div class="col-md-10">
            <article class="content wrap" id="_content" data-uid="">
<h1 id="wpf-globalization-and-localization-overview">Общие сведения о глобализации и локализации WPF</h1>

<p>Если доступность продукта ограничена только одним языком, то таким образом ограничивается потенциальная база клиентов до некоторой части всего 6,5-миллиардного мирового населения. Чтобы созданные приложения были доступны мировой аудитории, одним из лучших и наиболее экономичных способов охватить большее количество клиентов является экономически эффективная локализация продукта.</p>
<p>В этом обзоре представлена глобализации и локализации в Windows Presentation Foundation (WPF). Глобализация — это проектирование и разработка приложений, которые выполняются в нескольких расположениях. Например, глобализация поддерживает локализованные пользовательские интерфейсы и региональные данные для пользователей на различных языках. WPF предоставляет глобализованные функциональные возможности проектирования, включая автоматический макет, вспомогательные сборки и локализованные атрибуты и комментарии.</p>
<p>Локализация — это перевод ресурсов приложения в локализованные версии для конкретных языков и региональных параметров, которые поддерживает приложение. При локализации в WPF, используйте API-интерфейсы в <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.markup.localizer">System.Windows.Markup.Localizer</a> пространства имен. Эти API-интерфейсов power <a href="https://go.microsoft.com/fwlink/?LinkID=160016">средства LocBaml</a> средство командной строки. Сведения о том, как создавать и использовать LocBaml, см. в разделе <a href="how-to-localize-an-application.html">локализация приложения</a>.</p>
<h2 id="best-practices-for-globalization-and-localization-in-wpf">Рекомендации по глобализации и локализации в WPF</h2>
<p>Вы можете максимально эффективно использовать функциональные возможности глобализации и локализации, встроенных в WPF , выполнив Дизайн пользовательского интерфейса, а также советы, относящиеся к локализации, которые в этом разделе содержатся.</p>
<h3 id="best-practices-for-wpf-ui-design">Оптимальные методы разработки пользовательского интерфейса WPF</h3>
<p>При проектировании WPF— на основе UI, рассмотрите возможность реализации этих рекомендаций:</p>
<ul>
<li><p>Запись вашего UI в XAML; Избегайте создания UI в коде. При создании вашей UI с помощью XAML, он предоставляется через встроенные интерфейсы API локализации.</p>
</li>
<li><p>Избегайте использования абсолютных положений и фиксированных размеров для размещения содержимого; Вместо этого используйте относительное или автоматическое изменение размеров.</p>
<ul>
<li><p>Используйте <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.window.sizetocontent">SizeToContent</a> ширины и высоты значение <code>Auto</code>.</p>
</li>
<li><p>Избегайте использования <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.controls.canvas">Canvas</a> для размещения UIs.</p>
</li>
<li><p>Используйте <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.controls.grid">Grid</a> и функции общего размера.</p>
</li>
</ul>
</li>
<li><p>Необходимо предусмотреть дополнительное пространство в полях, так как локализованный текст часто занимает больше места. Дополнительное пространство позволит использовать выступающие символы, возможно, присутствующие в конкретном языке.</p>
</li>
<li><p>Включить <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.controls.textblock.textwrapping">TextWrapping</a> на <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.controls.textblock">TextBlock</a> во избежание обрезки.</p>
</li>
<li><p>Задайте атрибут <code>xml:lang</code> . Этот атрибут описывает язык и региональные параметры конкретного элемента и его дочерних элементов. Значение этого свойства изменяет поведение некоторых функциональных возможностей WPF. Например, изменяется процесс переноса по слогам, проверки орфографии, подстановки чисел, формирования сложных скриптов и подмены шрифта. См. в разделе <a href="globalization-for-wpf.html">Глобализация для WPF</a> Дополнительные сведения о параметре <a href="../../xaml-services/xml-lang-handling-in-xaml.md">XML: lang в XAML обработки</a>.</p>
</li>
<li><p>Создание настраиваемого составного шрифта, чтобы получить лучшее управление шрифтами, которые используются для различных языков. По умолчанию WPF использует шрифт globaluserinterface.Composite из папки в папке Windows\Fonts.</p>
</li>
<li><p>При создании приложений навигации, которые могут быть локализованы в языке, использующем представление текста в формате справа налево, необходимо явно установить <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.flowdirection">FlowDirection</a> части каждой страницы, чтобы обеспечить страницы не наследует <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.flowdirection">FlowDirection</a> из <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.navigation.navigationwindow">NavigationWindow</a>.</p>
</li>
<li><p>При создании автономных приложений навигации, размещенных вне браузера, задайте <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.application.startupuri">StartupUri</a> для начального приложения <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.navigation.navigationwindow">NavigationWindow</a> вместо на страницу (например, <code>&lt;Application StartupUri=&quot;NavigationWindow.xaml&quot;&gt;</code>). Такой подход позволяет изменять <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.flowdirection">FlowDirection</a> окна и панели навигации. Дополнительные сведения и пример см. в разделе <a href="https://go.microsoft.com/fwlink/?LinkID=159990">пример Globalization Homepage</a>.</p>
</li>
</ul>
<h3 id="best-practices-for-wpf-localization">Оптимальные методы локализации приложений WPF</h3>
<p>При локализации WPF— приложений, рассмотрите возможность реализации этих рекомендаций:</p>
<ul>
<li><p>Используйте комментарии локализации для обеспечения дополнительного контекста для локализаторов.</p>
</li>
<li><p>Используйте атрибуты локализации для управления локализацией вместо выборочного пропуска <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.markup.localizer.bamllocalizableresourcekey.uid">Uid</a> свойства элементов. См. в разделе <a href="localization-attributes-and-comments.html">атрибуты и комментарии локализации</a> Дополнительные сведения.</p>
</li>
<li><p>Используйте <code>msbuild -t:updateuid</code> и <code>-t:checkuid</code> для добавления и проверки <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.markup.localizer.bamllocalizableresourcekey.uid">Uid</a> свойств в вашей XAML. Используйте <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.markup.localizer.bamllocalizableresourcekey.uid">Uid</a> свойства для отслеживания изменений между разработкой и локализацией. <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.markup.localizer.bamllocalizableresourcekey.uid">Uid</a> свойства помогают локализовать новые изменения в разработке. Если вручную добавить <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.markup.localizer.bamllocalizableresourcekey.uid">Uid</a> свойства UI, задача является трудоемкой и менее точным.</p>
<ul>
<li><p>Не следует редактировать или изменять <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.markup.localizer.bamllocalizableresourcekey.uid">Uid</a> свойства после начала локализации.</p>
</li>
<li><p>Не используйте дубликат <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.markup.localizer.bamllocalizableresourcekey.uid">Uid</a> свойства (помните этот совет при использовании команды копирования и вставки).</p>
</li>
<li><p>Задайте <code>UltimateResourceFallback</code> расположение в AssemblyInfo.*, чтобы указать соответствующий язык для резервной проверки подлинности (например, <code>[assembly: NeutralResourcesLanguage(&quot;en-US&quot;, UltimateResourceFallbackLocation.Satellite)]</code>).</p>
<p>Если вы решили включить исходный язык в основную сборку путем пропуска <code>&lt;UICulture&gt;</code> тег в файле проекта, задайте <code>UltimateResourceFallback</code> расположении, что и основной сборки вместо вспомогательной (например, <code>[assembly: NeutralResourcesLanguage(&quot;en-US&quot;, UltimateResourceFallbackLocation.MainAssembly)]</code>).</p>
</li>
</ul>
</li>
</ul>
<h2 id="localize-a-wpf-application">Локализация приложения WPF</h2>
<p>При локализации WPF приложения можно несколькими способами. Например, можно привязать локализованные ресурсы в приложении XML файл, хранить локализуемый текст в resx-таблицах или же указать локализатору использовать XAML файлов. В этом разделе рассматривается рабочий процесс локализации, использующий BAML-формы XAML, который предоставляет несколько преимуществ:</p>
<ul>
<li><p>Вы можете локализовать после построения.</p>
</li>
<li><p>Можно обновить до более новой версии BAML-формы XAML с локализациями из более старой версии BAML-формы XAML таким образом, вы можете локализовать, в то же время, которое разрабатывается.</p>
</li>
<li><p>Можно проверить исходные исходные элементы и семантику во время компиляции, так как форма BAML кода XAML является скомпилированной формой XAML.</p>
</li>
</ul>
<h3 id="localization-build-process">Процесс построения локализации</h3>
<p>При разработке WPF приложения, процесс построения локализации выглядит следующим образом:</p>
<ul>
<li><p>Разработчик создает и глобализует WPF приложения. В файле проекта разработчик задает <code>&lt;UICulture&gt;en-US&lt;/UICulture&gt;</code> таким образом, чтобы при компиляции приложения, не зависящий от языка основная сборка. Эта сборка имеет вспомогательный файл .resources.dll, содержащий все локализуемые ресурсы. При необходимости можно хранить исходный язык в основную сборку, так как наша локализация API - интерфейсы поддерживают извлечение из основной сборки.</p>
</li>
<li><p>Когда файл компилируется в сборку, XAML преобразуется в BAML-форму XAML. Независимый от языка <code>MyDialog.exe</code> и языку и региональным параметрам зависимые (на английском языке) <code>MyDialog.resources.dll</code> файлы выпущены для англоговорящего клиента.</p>
</li>
</ul>
<h3 id="localization-workflow">Рабочий процесс локализации</h3>
<p>Процесс локализации начинается после сборки нелокализованного <code>MyDialog.resources.dll</code> файла. UI Элементы и свойства в исходном XAML извлекаются из BAML-формы XAML в пары &quot;ключ значение&quot; с помощью API - интерфейсы под <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.markup.localizer">System.Windows.Markup.Localizer</a>. Локализаторы используют пары &quot;ключ —значение&quot; для локализации приложения. После завершения локализации можно создать файл .resource.dll на основе новых значений.</p>
<p>Ключи пар &quot;ключ значение&quot; <code>x:Uid</code> значения, которые помещаются разработчиком в исходный XAML. Эти <code>x:Uid</code> включить значения API для отслеживания и объединения изменений, разработчик и локализатором во время локализации. Например, если разработчик изменяет UI после начала локализации, можно слить изменения с уже выполненной работой по локализации, так что теряется минимум работы по переводу.</p>
<p>На приведенном ниже рисунке показан типичный рабочий процесс локализации на основе BAML-формы XAML. Эта диаграмма предполагает, что разработчик создает приложение на английском языке. Разработчик создает и глобализует приложение WPF. В файле проекта разработчик задает <code>&lt;UICulture&gt;en-US&lt;/UICulture&gt;</code> , чтобы на сборки, от основного языка сборка получает созданный вспомогательной. resources.dll, содержащий все локализуемые ресурсы. Кроме того, можно сохранить исходный язык в основной сборке, так как интерфейсы API локализации WPF поддерживают извлечение из основной сборки. По завершении процесса сборки XAML компилируется в BAML. Независимый от языка и региональных параметров файл MyDialog.exe.resources.dll поставляется англоязычному пользователю.</p>
<p><img src="media/wpf-globalization-and-localization-overview/localization-workflow.png" alt="Схема, показывающая рабочий процесс локализации."></p>
<p><img src="media/wpf-globalization-and-localization-overview/unlocalized-workflow.png" alt="Схема, показывающая нелокализованный рабочий процесс."></p>
<h2 id="examples-of-wpf-localization">Примеры локализации WPF</h2>
<p>Этот раздел содержит примеры локализованных приложений, которые помогут понять, как сборки и локализации WPF приложений.</p>
<h4 id="run-dialog-box-example">Пример диалогового окна &quot;Выполнить&quot;</h4>
<p>На следующем рисунке показаны выходные данные <strong>запуска</strong> пример диалогового окна.</p>
<p><strong>Английский.</strong></p>
<p><img src="media/wpf-globalization-and-localization-overview/run-dialog-box-english.png" alt="Снимок экрана, показывающий в диалоговом окне запуска на английском языке."></p>
<p><strong>Немецкий.</strong></p>
<p><img src="media/wpf-globalization-and-localization-overview/run-dialog-box-german.png" alt="Снимок экрана: диалоговое окно запуска немецкий."></p>
<p><strong>Разработка глобального диалогового окна &quot;Выполнить&quot;</strong></p>
<p>Этот пример выводит <strong>запуска</strong> диалоговое окно с помощью WPF и XAML. Это диалоговое окно эквивалентно <strong>запуска</strong> диалоговое окно, которое доступно из Microsoft Windows меню &quot;Пуск&quot;.</p>
<p>Некоторые замечания по созданию глобальных диалоговых окон</p>
<p><strong>Автоматический макет</strong></p>
<p><em>В файле Window1.xaml</em></p>
<p><code>&lt;Window SizeToContent=&quot;WidthAndHeight&quot;&gt;</code></p>
<p>Предыдущее свойство Window автоматически изменяет размер окна в соответствии с размером содержимого. Это свойство предотвращает обрезание содержимого окна, которое увеличивается в размере после локализации. Кроме того, оно также удаляет лишнее пространство, если содержимое уменьшается в размерах после локализации.</p>
<p><code>&lt;Grid x:Uid=&quot;Grid_1&quot;&gt;</code></p>
<p><a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.markup.localizer.bamllocalizableresourcekey.uid">Uid</a> для того, требуются свойства WPF локализации API - интерфейсы для правильной работы.</p>
<p>Они используются WPF локализации API - интерфейсы для отслеживания изменений между разработкой и локализацией пользовательский интерфейс. <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.markup.localizer.bamllocalizableresourcekey.uid">Uid</a> свойства позволяют выполнить слияние более новой версии UI со старой локализацией UI. Добавляемые <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.markup.localizer.bamllocalizableresourcekey.uid">Uid</a> свойства, выполнив <code>msbuild -t:updateuid RunDialog.csproj</code> в командной строке. Это рекомендуемый способ добавления <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.markup.localizer.bamllocalizableresourcekey.uid">Uid</a> свойства тем, что добавление их вручную обычно требует много времени и менее точным. Можно убедиться, что <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.markup.localizer.bamllocalizableresourcekey.uid">Uid</a> правильно заданы свойства, выполнив <code>msbuild -t:checkuid RunDialog.csproj</code>.</p>
<p>UI Структурирован с помощью <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.controls.grid">Grid</a> управления, который является полезным управления преимуществами автоматического макета в WPF. Обратите внимание, что диалоговое окно разделено на три строки и пять столбцов. Не в одном из определений строк и столбцов имеет фиксированный размер; Таким образом UI элементы, которые располагаются в каждой ячейке могут адаптироваться к увеличению и уменьшению размеров во время локализации.</p>
<pre><code class="lang-xaml" name="GlobalizationRunDialog#GridColumnDef">&lt;Grid.ColumnDefinitions&gt;
  &lt;ColumnDefinition x:Uid=&quot;ColumnDefinition_1&quot; /&gt;
  &lt;ColumnDefinition x:Uid=&quot;ColumnDefinition_2&quot; /&gt;
</code></pre>
<p>Первые два столбца где <strong>откройте:</strong> метки и <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.controls.combobox">ComboBox</a> помещаются использует 10 процентов UI всей ширины.</p>
<pre><code class="lang-xaml" name="GlobalizationRunDialog#GridColumnDef2">  &lt;ColumnDefinition x:Uid=&quot;ColumnDefinition_3&quot; SharedSizeGroup=&quot;Buttons&quot; /&gt;
  &lt;ColumnDefinition x:Uid=&quot;ColumnDefinition_4&quot; SharedSizeGroup=&quot;Buttons&quot; /&gt;
  &lt;ColumnDefinition x:Uid=&quot;ColumnDefinition_5&quot; SharedSizeGroup=&quot;Buttons&quot; /&gt;
&lt;/Grid.ColumnDefinitions&gt;
</code></pre>
<p>Обратите внимание, что в примере используется функция общего изменения размера <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.controls.grid">Grid</a>. Последние три столбца используют это преимущество, размещаясь в том же <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.controls.definitionbase.sharedsizegroup">SharedSizeGroup</a>. Как следует из имени свойства, это позволяет столбцам использовать один и тот же размер. Поэтому при «Обзор...» получает локализации в более длинную строку «Durchsuchen …», всех кнопок увеличивается ширина маленькую кнопку «ОК» и непропорционально большой кнопкой «Durchsuchen …».</p>
<p><strong>xml:lang</strong></p>
<p><code>xml:lang=&quot;en-US&quot;</code></p>
<p>Обратите внимание, что <a href="../../xaml-services/xml-lang-handling-in-xaml.md">XML: lang в XAML обработки</a> размещается в корневом элементе UI. Это свойство описывает язык и региональные параметры конкретного элемента и его потомков. Это значение используется несколькими функциональными возможностями в WPF и должно быть соответствующим образом изменено во время локализации. Это значение изменяется в зависимости от того, какой языковой словарь используется для расстановки переносов и проверки орфографии слов. Оно также влияет на отображение цифр и на то, как система подмены шрифтов выбирает шрифт для использования. Наконец, это свойство влияет на способ отображения чисел и на способ написания текста в сложных скриптах. По умолчанию используется значение en-US.</p>
<p><strong>Создание вспомогательной сборки ресурсов</strong></p>
<p><em>В файле .csproj</em></p>
<p>Изменить <code>.csproj</code> и добавьте следующий тег безусловной операции <code>&lt;PropertyGroup&gt;</code>:</p>
<p><code>&lt;UICulture&gt;en-US&lt;/UICulture&gt;</code></p>
<p>Обратите внимание на добавленную <code>UICulture</code> значение. Если присвоено значение на допустимый <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.globalization.cultureinfo">CultureInfo</a> значение, например en US, построение проекта будет создана вспомогательная сборка со всеми локализуемыми ресурсами в нем.</p>
<p><code>&lt;Resource Include=&quot;RunIcon.JPG&quot;&gt;</code></p>
<p><code>&lt;Localizable&gt;False&lt;/Localizable&gt;</code></p>
<p><code>&lt;/Resource&gt;</code></p>
<p><code>RunIcon.JPG</code> Необходимо локализовать, потому что он должен быть одинаков для всех языков и региональных параметров. <code>Localizable</code> имеет значение <code>false</code> так что он остается в независимой от языка основной сборке, вместо вспомогательной сборки. Значение по умолчанию для всех некомпилируемых ресурсов — <code>Localizable</code> присвоено <code>true</code>.</p>
<p><strong>Локализация диалогового окна &quot;Выполнить&quot;</strong></p>
<p><strong>Анализ</strong></p>
<p>После сборки приложения первым шагом в локализации является анализ локализуемых ресурсов из вспомогательной сборки. В целях этого раздела используется демонстрационное средство LocBaml, которую можно найти в <a href="https://go.microsoft.com/fwlink/?LinkID=160016">средства LocBaml</a>. Обратите внимание, что LocBaml ― только демонстрационное средство, предназначенное помочь начать работу по созданию средства локализации, встраиваемого в процесс локализации. С помощью LocBaml выполните следующую команду, чтобы проанализировать: <strong>LocBaml/parse RunDialog.resources.dll/out:</strong> создать файл «Команду».</p>
<p><strong>Локализация</strong></p>
<p>Для редактирования этого файла можно воспользоваться любым редактором CSV, поддерживающим Юникод. Исключите все записи с категорией локализации &quot;Нет&quot;. Должны остаться следующие записи.</p>
<table>
<thead>
<tr>
<th>Ключ ресурса</th>
<th>Категория локализации</th>
<th>Значение</th>
</tr>
</thead>
<tbody>
<tr>
<td>Button_1:System.Windows.Controls.Button.$Content</td>
<td>Кнопка</td>
<td>ОК</td>
</tr>
<tr>
<td>Button_2:System.Windows.Controls.Button.$Content</td>
<td>Кнопка</td>
<td>Отмена</td>
</tr>
<tr>
<td>Button_3:System.Windows.Controls.Button.$Content</td>
<td>Кнопка</td>
<td>Обзор...</td>
</tr>
<tr>
<td>ComboBox_1:System.Windows.Controls.ComboBox.$Content</td>
<td>ComboBox</td>
<td></td>
</tr>
<tr>
<td>TextBlock_1:System.Windows.Controls.TextBlock.$Content</td>
<td>Текста</td>
<td>Введите имя программы, папки, документа или ресурса Интернета, и Windows откроет их.</td>
</tr>
<tr>
<td>TextBlock_2:System.Windows.Controls.TextBlock.$Content</td>
<td>Текста</td>
<td>Открыть:</td>
</tr>
<tr>
<td>Window_1:System.Windows.Window.Title</td>
<td>Заголовок</td>
<td>Выполнить</td>
</tr>
</tbody>
</table>
<p>Для локализации приложений в немецком языке потребуются следующие переводы.</p>
<table>
<thead>
<tr>
<th>Ключ ресурса</th>
<th>Категория локализации</th>
<th>Значение</th>
</tr>
</thead>
<tbody>
<tr>
<td>Button_1:System.Windows.Controls.Button.$Content</td>
<td>Кнопка</td>
<td>ОК</td>
</tr>
<tr>
<td>Button_2:System.Windows.Controls.Button.$Content</td>
<td>Кнопка</td>
<td>Abbrechen</td>
</tr>
<tr>
<td>Button_3:System.Windows.Controls.Button.$Content</td>
<td>Кнопка</td>
<td>Durchsuchen…</td>
</tr>
<tr>
<td>ComboBox_1:System.Windows.Controls.ComboBox.$Content</td>
<td>ComboBox</td>
<td></td>
</tr>
<tr>
<td>TextBlock_1:System.Windows.Controls.TextBlock.$Content</td>
<td>Text</td>
<td>Geben Sie den Namen eines Programms, Ordners, Dokuments oder einer Internetresource an.</td>
</tr>
<tr>
<td>TextBlock_2:System.Windows.Controls.TextBlock.$Content</td>
<td>Текста</td>
<td>Öffnen:</td>
</tr>
<tr>
<td>Window_1:System.Windows.Window.Title</td>
<td>Заголовок</td>
<td>Выполнить</td>
</tr>
</tbody>
</table>
<p><strong>Создание</strong></p>
<p>Последний шаг локализации включает создание только что локализованной вспомогательной сборки. Эту задачу можно решить с помощью следующей команды LocBaml.</p>
<p><strong>LocBaml.exe /generate RunDialog.resources.dll /trans:RunDialog.resources.dll.CSV /out: . /cul:de-DE</strong></p>
<p>В немецкой Windows, если файл resources.dll размещен в папке de-DE главной сборки, этот ресурс будет автоматически загружаться вместо того, в папке en US. Если у вас используется немецкая версия Windows Чтобы проверить это, установите язык и региональные параметры региональные Windows вы используете (например, <code>en-US</code>) и заменить исходные ресурсы библиотеки DLL.</p>
<p><strong>Загрузка вспомогательных ресурсов</strong></p>
<table>
<thead>
<tr>
<th>MyDialog.exe</th>
<th>en-US\MyDialog.resources.dll</th>
<th>de-DE\MyDialog.resources.dll</th>
</tr>
</thead>
<tbody>
<tr>
<td>Код</td>
<td>Исходный английский BAML</td>
<td>Локализованный BAML</td>
</tr>
<tr>
<td>Ресурсы, не зависящие от языка и региональных параметров</td>
<td>Другие ресурсы на английском языке</td>
<td>Другие ресурсы, локализованные для немецкого языка</td>
</tr>
</tbody>
</table>
<p>Платформа .NET framework автоматически выбирает вспомогательную сборку ресурсов для загрузки в зависимости от приложения <code>Thread.CurrentThread.CurrentUICulture</code>. По умолчанию используется язык и региональные параметры вашего Windows операционной системы. Таким образом, если вы используете немецкий Windows, загружается de-DE\MyDialog.resources.dll, если используется английский Windows, загружается en-US\MyDialog.resources.dll. Можно задать для приложения резервный ресурс, указав NeutralResourcesLanguage в AssemblyInfo.* проекта. Например, если будет указано:</p>
<p><code>[assembly: NeutralResourcesLanguage(&quot;en-US&quot;, UltimateResourceFallbackLocation.Satellite)]</code></p>
<p>то в случае недоступности de-DE\MyDialog.resources.dll и de\MyDialog.resources.dll немецкой версией Windows будет использоваться en-US\MyDialog.resources.dll.</p>
<h3 id="microsoft-saudi-arabia-homepage">Домашняя страница сайта Майкрософт для Саудовской Аравии</h3>
<p>На рисунке ниже показаны английская и арабская домашние страницы. Полный пример создания такой графики см. в разделе <a href="https://go.microsoft.com/fwlink/?LinkID=159990">пример Globalization Homepage</a>.</p>
<p><strong>Английский.</strong></p>
<p><img src="media/wpf-globalization-and-localization-overview/english-home-page-sample.jpg" alt="Снимок экрана домашней страницы, на английском языке."></p>
<p><strong>Арабский:</strong></p>
<p><img src="media/wpf-globalization-and-localization-overview/arabic-home-page-sample.jpg" alt="Снимок экрана, показывающий Арабская страница home."></p>
<h3 id="designing-a-global-microsoft-home-page">Разработка Microsoft глобальной домашней страницы</h3>
<p>Этот макет веб-сайта Майкрософт для Саудовской Аравии показывает функциональные возможности глобализации, предоставляемые для языков с порядком чтения справа налево (RightToLeft). Языки, такие как иврит и арабский имеют порядок чтения справа налево, поэтому макет UI необходимо часто надо компоновать совершенно иначе, нежели было бы на языках слева направо, например в английском языке. Локализация с языка с направлением письма слева направо на язык с направлением письма справа налево или наоборот может быть достаточно сложной. WPF разработан так, чтобы значительно упростить подобные локализации.</p>
<p><strong>FlowDirection</strong></p>
<p><em>Homepage.xaml:</em></p>
<pre><code class="lang-xaml" name="GlobalizationHomepage#Homepage">&lt;Page x:Uid=&quot;Page_1&quot; x:Class=&quot;MicrosoftSaudiArabiaHomepage.Homepage&quot;
    xmlns=&quot;http://schemas.microsoft.com/winfx/2006/xaml/presentation&quot;
    xmlns:x=&quot;http://schemas.microsoft.com/winfx/2006/xaml&quot;   
    FlowDirection=&quot;LeftToRight&quot; 
    Localization.Comments=&quot;FlowDirection(This FlowDirection controls the actual content of the homepage)&quot;
    xml:lang=&quot;en-US&quot;&gt;
</code></pre>
<p>Обратите внимание, что <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.frameworkelement.flowdirection">FlowDirection</a> свойство <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.controls.page">Page</a>. Изменение этого свойства для <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.flowdirection#System_Windows_FlowDirection_RightToLeft">RightToLeft</a> приведет к изменению <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.frameworkelement.flowdirection">FlowDirection</a> из <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.controls.page">Page</a> и ее дочерних элементов, чтобы макет этого UI зеркально отразится справа налево, как и ожидает Арабский пользователь. Поведение наследования можно переопределить, указав явный <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.frameworkelement.flowdirection">FlowDirection</a> для любого элемента. <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.frameworkelement.flowdirection">FlowDirection</a> Свойство доступно на любом <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.frameworkelement">FrameworkElement</a> или документа связанного элемента, и имеет неявное значение <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.flowdirection#System_Windows_FlowDirection_LeftToRight">LeftToRight</a>.</p>
<p>Обратите внимание, что даже фоновые градиентные кисти соответствующим образом при корневой <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.frameworkelement.flowdirection">FlowDirection</a> изменяется:</p>
<p><strong>FlowDirection=&quot;LeftToRight&quot;</strong></p>
<p><img src="media/wpf-globalization-and-localization-overview/gradient-flow-left-right.png" alt="Снимок экрана градиента потока слева направо."></p>
<p><strong>FlowDirection=&quot;RightToLeft&quot;</strong></p>
<p><img src="media/wpf-globalization-and-localization-overview/gradient-flow-right-left.png" alt="Снимок экрана градиента потока справа налево."></p>
<p><strong>Избегайте использования фиксированных размеров для панелей и элементов управления</strong></p>
<p>Посмотрите на Homepage.xaml, обратите внимание, что помимо фиксированной ширины и высоты, заданной для всего UI вверху <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.controls.dockpanel">DockPanel</a>, существуют другие фиксированные размеры. Не следует использовать фиксированные размеры, чтобы предотвратить отсечение локализованного текста, который может быть больше, чем исходный текст. Панели и элементы управления WPF будут автоматически изменяться в размерах в зависимости от находящегося в них содержимого. Большинство элементов управления также имеют минимальные и максимальные размеры, которые можно задать для большего контроля (например, MinWidth = «20»). С помощью <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.controls.grid">Grid</a>, также можно задать относительную ширину и высоту с помощью &quot;*&quot; (например, <code>Width=&quot;0.25*&quot;</code>) или использования функции совместного использования размера ячейки.</p>
<p><strong>Комментарии о локализации</strong></p>
<p>Во многих случаях содержимое может быть неоднозначным и трудным для перевода. Разработчик и проектировщик имеют возможность предоставить локализаторам дополнительный контекст и примечания в комментариях локализации. Например, в приведенных ниже комментариях локализации уточняется использование символа &quot;|&quot;.</p>
<pre><code class="lang-xaml" name="GlobalizationHomepage#LocalizationComment">&lt;TextBlock 
  x:Uid=&quot;TextBlock_2&quot; 
  DockPanel.Dock=&quot;Right&quot; 
  Foreground=&quot;White&quot; 
  Margin=&quot;5,0,5,0&quot;
  Localization.Comments=&quot;$Content(This character is used as a decorative rule.)&quot;&gt;
  |
&lt;/TextBlock&gt;
</code></pre>
<p>Этот комментарий становится связанным с содержимым TextBlock_1 и средство LocBaml (см. в разделе <a href="how-to-localize-an-application.html">локализация приложения</a>), его можно увидеть в шестом столбце строки TextBlock_1 в выходном CSV-файле:</p>
<table>
<thead>
<tr>
<th>Ключ ресурса</th>
<th>Категория</th>
<th>Доступен для чтения</th>
<th>Изменяемый</th>
<th>Комментарий</th>
<th>Значение</th>
</tr>
</thead>
<tbody>
<tr>
<td>TextBlock_1:System.Windows.Controls.TextBlock.$Content</td>
<td>Текста</td>
<td>true</td>
<td>true</td>
<td>Этот символ используется в качестве декоративного правила.</td>
<td>|</td>
</tr>
</tbody>
</table>
<p>Комментарии могут быть помещены в содержимое или в свойство любого элемента посредством следующего синтаксиса.</p>
<pre><code class="lang-xaml" name="GlobalizationHomepage#LocalizationCommentsProp">&lt;TextBlock 
  x:Uid=&quot;TextBlock_1&quot; 
  DockPanel.Dock=&quot;Right&quot; 
  Foreground=&quot;White&quot; 
  Margin=&quot;5,0,5,0&quot;
  Localization.Comments=&quot;$Content(This is a comment on the TextBlock's content.)
     Margin(This is a comment on the TextBlock's Margin property.)&quot;&gt;
  |
 &lt;/TextBlock&gt;
</code></pre>
<p><strong>Атрибуты локализации</strong></p>
<p>Разработчику или менеджеру локализации часто бывает необходимо управлять тем, что локализаторы могут читать и изменять. Например, может быть нежелательно, чтобы локализатор переводил название компании или юридическую формулировку. В WPF имеются атрибуты, позволяющие задать возможность чтения, возможность изменения, а также категорию содержимого или свойства элемента. Эти атрибуты можно использовать в средстве локализации для блокировки, скрытия или сортировки элементов. Дополнительные сведения см. в разделе <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.localization.attributes">Attributes</a>. В этом примере средство LocBaml только выводит значения этих атрибутов. Во всех элементах управления WPF эти атрибуты имеют значения по умолчанию, но их можно переопределять. Например, в приведенном ниже примере переопределяются атрибуты локализации по умолчанию для <code>TextBlock_1</code> и задает невозможность изменения содержимого на чтение для локализаторов.</p>
<pre><code class="lang-xaml" name="LocalizationComAtt#LocalizationAttributes">&lt;TextBlock
x:Uid=&quot;TextBlock_1&quot;
Localization.Attributes=
&quot;$Content(Readable Unmodifiable)&quot;&gt;
  Microsoft Corporation
&lt;/TextBlock&gt;
</code></pre>
<p>В дополнение к читаемость и атрибуты Изменяемости WPF предоставляет перечисление общих категорий пользовательского интерфейса (<a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.localizationcategory">LocalizationCategory</a>), может использоваться для предоставления локализаторам дополнительного контекста. WPF Категории по умолчанию для элементов управления платформы могут переопределяться в XAML также:</p>
<pre><code class="lang-xaml" name="LocalizationComAtt#LocalizationAttributesOverridden">&lt;TextBlock x:Uid=&quot;TextBlock_2&quot;&gt;
&lt;TextBlock.ToolTip&gt;
&lt;TextBlock
x:Uid=&quot;TextBlock_3&quot;
Localization.Attributes=
&quot;$Content(ToolTip Readable Unmodifiable)&quot;&gt;
Microsoft Corporation
&lt;/TextBlock&gt;
&lt;/TextBlock.ToolTip&gt;
Windows Vista
&lt;/TextBlock&gt;
</code></pre>
<p>Атрибуты локализации по умолчанию, который WPF предоставляет также могут быть переопределены в коде, так что можно корректно установить правильные значения по умолчанию для пользовательских элементов управления. Пример:</p>
<pre><code class="lang-csharp">[Localizability(Readability = Readability.Readable, Modifiability=Modifiability.Unmodifiable, LocalizationCategory.None)] 
public class CorporateLogo : TextBlock
{
    // ...
}
</code></pre>
<p>Каждый набор атрибутов экземпляра XAML будет иметь приоритет над значениями, заданными в коде для пользовательских элементов управления. Дополнительные сведения об атрибутах и комментариях см. в разделе <a href="localization-attributes-and-comments.html">атрибуты и комментарии локализации</a>.</p>
<p><strong>Подмена шрифтов и составные шрифты</strong></p>
<p>Если задан шрифт, который не поддерживает данный диапазон кодовых точек, WPF будет автоматически использовать его с помощью шрифта Global User Interface.compositefont, расположенного в папке Windows\Fonts. Составные шрифты работают так же как и любой другой шрифт и может использоваться явным образом задав элемента <code>FontFamily</code> (например, <code>FontFamily=&quot;Global User Interface&quot;</code>). Вы можете задавать собственные предпочтения для подмены шрифта путем создания собственного составного шрифта и указания его использования для конкретных языков и диапазонов кодовых точек.</p>
<p>Дополнительные сведения о составных шрифтах см. в разделе <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.fontfamily">FontFamily</a>.</p>
<p><strong>Локализация домашней страницы Майкрософт</strong></p>
<p>Для локализации этого приложения можно выполнить те же действия, что и в примере локализации диалогового окна &quot;Выполнить&quot;. Локализованный CSV-файл для арабского языка доступен для вас в <a href="https://go.microsoft.com/fwlink/?LinkID=159990">пример Globalization Homepage</a>.</p>
</article>
          </div>
          
          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">
              <div class="contribution">
                <ul class="nav">
                </ul>
              </div>
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
              <!-- <p><a class="back-to-top" href="#top">Back to top</a><p> -->
              </nav>
            </div>
          </div>
        </div>
      </div>
      
      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right">
              <a href="#top">Back to top</a>
            </span>
            <span><a href="https://github.com/MSDN-WhiteKnight/dotnet-docs-ru">Неофициальная документация по .NET на русском языке</a>. Лицензия: <a href="https://github.com/MSDN-WhiteKnight/dotnet-docs-ru/blob/main/LICENSE">CC-BY 4.0</a>. Основано на <a href="https://docs.microsoft.com/ru-ru/dotnet/">документации по .NET с Microsoft Docs</a><br>Generated by <strong>DocFX</strong></span><script type="text/javascript">(function(m,e,t,r,i,k,a){m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};m[i].l=1*new Date();k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)})(window, document, "script", "https://mc.yandex.ru/metrika/tag.js", "ym");ym(65150713, "init", {clickmap:true,trackLinks:true,accurateTrackBounce:true});</script><noscript><div><img src="https://mc.yandex.ru/watch/65150713" style="position:absolute; left:-9999px;" alt=""></div></noscript>
            
          </div>
        </div>
      </footer>
    </div>
    
    <script type="text/javascript" src="../../../styles/docfx.vendor.js"></script>
    <script type="text/javascript" src="../../../styles/docfx.js"></script>
    <script type="text/javascript" src="../../../styles/main.js"></script>
  </body>
</html>
