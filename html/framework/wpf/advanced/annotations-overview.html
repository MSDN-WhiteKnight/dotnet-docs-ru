<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>&#1054;&#1073;&#1097;&#1080;&#1077; &#1089;&#1074;&#1077;&#1076;&#1077;&#1085;&#1080;&#1103; &#1086; &#1079;&#1072;&#1084;&#1077;&#1090;&#1082;&#1072;&#1093; | &#1053;&#1077;&#1086;&#1092;&#1080;&#1094;&#1080;&#1072;&#1083;&#1100;&#1085;&#1072;&#1103; &#1076;&#1086;&#1082;&#1091;&#1084;&#1077;&#1085;&#1090;&#1072;&#1094;&#1080;&#1103; .NET </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="&#1054;&#1073;&#1097;&#1080;&#1077; &#1089;&#1074;&#1077;&#1076;&#1077;&#1085;&#1080;&#1103; &#1086; &#1079;&#1072;&#1084;&#1077;&#1090;&#1082;&#1072;&#1093; | &#1053;&#1077;&#1086;&#1092;&#1080;&#1094;&#1080;&#1072;&#1083;&#1100;&#1085;&#1072;&#1103; &#1076;&#1086;&#1082;&#1091;&#1084;&#1077;&#1085;&#1090;&#1072;&#1094;&#1080;&#1103; .NET ">
    <meta name="generator" content="docfx 2.40.12.0">
    
    <link rel="shortcut icon" href="../../../favicon.ico">
    <link rel="stylesheet" href="../../../styles/docfx.vendor.css">
    <link rel="stylesheet" href="../../../styles/docfx.css">
    <link rel="stylesheet" href="../../../styles/main.css">
    <meta property="docfx:navrel" content="../../../toc.html">
    <meta property="docfx:tocrel" content="toc.html">
    
    
    
  </head>
  <body data-spy="scroll" data-target="#affix" data-offset="120">
    <div id="wrapper">
      <header>
        
        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              
              <a class="navbar-brand" href="../../../index.html">
                <img id="logo" class="svg" src="../../../logo.svg" alt="">
              </a>
            </div>
            <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="search">
                <div class="form-group">
                  <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                </div>
              </form>
            </div>
          </div>
        </nav>
        
        <div class="subnav navbar navbar-default">
          <div class="container hide-when-search" id="breadcrumb">
            <ul class="breadcrumb">
              <li></li>
            </ul>
          </div>
        </div>
      </header>
      <div role="main" class="container body-content hide-when-search">
        
        <div class="sidenav hide-when-search">
          <a class="btn toc-toggle collapse" data-toggle="collapse" href="#sidetoggle" aria-expanded="false" aria-controls="sidetoggle">Show / Hide Table of Contents</a>
          <div class="sidetoggle collapse" id="sidetoggle">
            <div id="sidetoc"></div>
          </div>
        </div>
        <div class="article row grid-right">
          <div class="col-md-10">
            <article class="content wrap" id="_content" data-uid="">
<h1 id="annotations-overview">Общие сведения о заметках</h1>

<p>Добавление заметок или примечаний на печатные документы — это настолько обыденное действие, что мы воспринимаем его как должное. Такие примечания или комментарии являются &quot;заметками&quot;, которые мы добавляем в документ для пометки информации или выделения интересующих элементов, к которым будем обращаться в дальнейшем. Хотя написание заметок на печатных документах является простым и обыденным, возможность добавлять личные примечания в электронные документы, как правило, очень ограниченна, если вообще доступна.</p>
<p>В этом разделе рассматриваются распространенные типы заметок, в частности записки и выделения и показано, как Microsoft Annotations Framework облегчает использование этих типов заметок в приложениях с помощью документов Windows Presentation Foundation (WPF) элементы управления для просмотра.  WPF включить элементы управления для просмотра документа, поддерживающие заметки <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.controls.flowdocumentreader">FlowDocumentReader</a> и <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.controls.flowdocumentscrollviewer">FlowDocumentScrollViewer</a>, а также, как элементы управления, производного от <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.controls.primitives.documentviewerbase">DocumentViewerBase</a> например <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.controls.documentviewer">DocumentViewer</a> и <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.controls.flowdocumentpageviewer">FlowDocumentPageViewer</a>.</p>
<p><a name="caf1_type_stickynotes"></a></p>
<h2 id="sticky-notes">Записки</h2>
<p>Обычная записка содержит информацию, написанную на маленьком листке цветной бумаги, который затем &quot;приклеивается&quot; к документу. Цифровые записки предоставляют аналогичные функциональные возможности для электронных документов, однако обеспечивают дополнительную гибкость благодаря включению многих других типов содержимого, например печатного текста, рукописных заметок (например, рукописного ввода Планшетный ПК) или веб-ссылок.</p>
<p>Ниже показаны некоторые примеры заметок: выделение, текстовая записка и рукописная записка.</p>
<p><img src="media/caf-stickynote.jpg" alt="Выделение, текстовая и рукописная записка" title="CAF_StickyNote"></p>
<p>В следующем примере показан метод, который можно использовать для включения поддержки заметок в приложении.</p>
<pre><code class="lang-csharp" name="DocViewerAnnotationsXml#DocViewXmlStartAnnotations">// ------------------------ StartAnnotations --------------------------
/// &lt;summary&gt;
///   Enables annotations and displays all that are viewable.&lt;/summary&gt;
private void StartAnnotations()
{
    // If there is no AnnotationService yet, create one.
    if (_annotService == null)
        // docViewer is a document viewing control named in Window1.xaml.
        _annotService = new AnnotationService(docViewer);

    // If the AnnotationService is currently enabled, disable it.
    if (_annotService.IsEnabled == true)
        _annotService.Disable();

    // Open a stream to the file for storing annotations.
    _annotStream = new FileStream(
        _annotStorePath, FileMode.OpenOrCreate, FileAccess.ReadWrite);

    // Create an AnnotationStore using the file stream.
    _annotStore = new XmlStreamStore(_annotStream);

    // Enable the AnnotationService using the new store.
    _annotService.Enable(_annotStore);
}// end:StartAnnotations()
</code></pre>
<p><a name="caf1_type_callouts"></a></p>
<h2 id="highlights">Выделение</h2>
<p>Люди используют различные способы для привлечения внимания к интересующим элементам в бумажном документе, такие как подчеркивание, выделение, заключение слов в предложении в кружок или рисование пометок и примечаний на полях.  Заметки типа &quot;выделение&quot; в Microsoft Annotations Framework предоставляют подобную функцию для информации, отображаемой в элементах управления для просмотра документа WPF.</p>
<p>На следующем рисунке показан пример заметки-выделения.</p>
<p><img src="media/caf-callouts.png" alt="Заметка-выделение" title="CAF_Callouts"></p>
<p>Пользователи обычно создают заметки, сначала выбирая некоторый текст или интересующий элемент, а затем щелкните правой кнопкой мыши для отображения <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.controls.contextmenu">ContextMenu</a> для параметров заметки.  В следующем примере показан XAML можно использовать для объявления <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.controls.contextmenu">ContextMenu</a> с маршрутизированных команд, доступных пользователям для создания заметок и управления ими.</p>
<pre><code class="lang-xaml" name="DocViewerAnnotationsXps#CreateDeleteAnnotations">&lt;DocumentViewer.ContextMenu&gt;
  &lt;ContextMenu&gt;
    &lt;MenuItem Command=&quot;ApplicationCommands.Copy&quot; /&gt;
    &lt;Separator /&gt;
    &lt;!-- Add a Highlight annotation to a user selection. --&gt;
    &lt;MenuItem Command=&quot;ann:AnnotationService.CreateHighlightCommand&quot;
              Header=&quot;Add Highlight&quot; /&gt;
    &lt;!-- Add a Text Note annotation to a user selection. --&gt;
    &lt;MenuItem Command=&quot;ann:AnnotationService.CreateTextStickyNoteCommand&quot;
              Header=&quot;Add Text Note&quot; /&gt;
    &lt;!-- Add an Ink Note annotation to a user selection. --&gt;
    &lt;MenuItem Command=&quot;ann:AnnotationService.CreateInkStickyNoteCommand&quot;
              Header=&quot;Add Ink Note&quot; /&gt;
    &lt;Separator /&gt;
    &lt;!-- Remove Highlights from a user selection. --&gt;
    &lt;MenuItem Command=&quot;ann:AnnotationService.ClearHighlightsCommand&quot;
              Header=&quot;Remove Highlights&quot; /&gt;
    &lt;!-- Remove Text Notes and Ink Notes from a user selection. --&gt;
    &lt;MenuItem Command=&quot;ann:AnnotationService.DeleteStickyNotesCommand&quot;
              Header=&quot;Remove Notes&quot; /&gt;
    &lt;!-- Remove Highlights, Text Notes, Ink Notes from a selection. --&gt;
    &lt;MenuItem Command=&quot;ann:AnnotationService.DeleteAnnotationsCommand&quot;
              Header=&quot;Remove Highlights &amp;amp; Notes&quot; /&gt;
  &lt;/ContextMenu&gt;
&lt;/DocumentViewer.ContextMenu&gt;
</code></pre>
<p><a name="caf1_framework_data_anchoring"></a></p>
<h2 id="data-anchoring">Привязка данных</h2>
<p>Annotations Framework привязывает заметки к данным, выбранным пользователем, а не только к расположению. Таким образом, при изменении представления документа, например когда пользователь прокручивает его или изменяет размер окна отображения, заметка остается привязанной к выбранным данным. Например, на следующем графике показана заметка, которую пользователь задал для выделенного текста. При изменении представления документа (прокрутка, изменение размера, масштаба и т. д.) заметка-выделение перемещается вместе с исходным фрагментом данных.</p>
<p><img src="media/caf-dataanchoring.png" alt="Привязка данных заметки" title="CAF_DataAnchoring"></p>
<p><a name="matching_annotations_with_annotated_objects"></a></p>
<h2 id="matching-annotations-with-annotated-objects">Сопоставление заметок с объектами заметок</h2>
<p>Можно сопоставить заметки с соответствующими объектами заметок. Например, рассмотрим простое приложение для чтения документа, имеющее панель комментариев. Панель комментариев может быть полем со списком, в котором отображается текст из списка заметок, привязанных к документу. Когда пользователь выбирает элемент в списке, приложение загружает в представление абзац в документе, к которому привязан соответствующий объект заметки.</p>
<p>Ниже приведен пример, демонстрирующий реализацию обработчика событий такого списка, который служит в качестве панели комментариев.</p>
<pre><code class="lang-csharp" name="FlowDocumentAnnotatedViewer#Handler">void annotationsListBox_SelectionChanged(object sender, SelectionChangedEventArgs e)
{

    Annotation comment = (sender as ListBox).SelectedItem as Annotation;
    if (comment != null)
    {
        // IAnchorInfo info;
        // service is an AnnotationService object
        // comment is an Annotation object
        info = AnnotationHelper.GetAnchorInfo(this.service, comment);
        TextAnchor resolvedAnchor = info.ResolvedAnchor as TextAnchor;
        TextPointer textPointer = (TextPointer)resolvedAnchor.BoundingStart;
        textPointer.Paragraph.BringIntoView();
    }
}
</code></pre>
<p>Другой пример сценария касается приложений, позволяющих производить обмен заметками и записками между читателями документа по электронной почте. Эта функция позволяет таким приложениям направлять пользователя на страницу, содержащую заметку для обмена.</p>
<h2 id="see-also">См. также</h2>
<ul>
<li><a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.controls.primitives.documentviewerbase">DocumentViewerBase</a></li>
<li><a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.controls.documentviewer">DocumentViewer</a></li>
<li><a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.controls.flowdocumentpageviewer">FlowDocumentPageViewer</a></li>
<li><a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.controls.flowdocumentscrollviewer">FlowDocumentScrollViewer</a></li>
<li><a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.controls.flowdocumentreader">FlowDocumentReader</a></li>
<li><a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.annotations.ianchorinfo">IAnchorInfo</a></li>
<li><a href="annotations-schema.html">Схема примечаний</a></li>
<li><a href="../controls/contextmenu-overview.html">Общие сведения о ContextMenu</a></li>
<li><a href="commanding-overview.html">Общие сведения о системе команд</a></li>
<li><a href="flow-document-overview.html">Общие сведения о документах нефиксированного формата</a></li>
<li><a href="https://docs.microsoft.com/previous-versions/dotnet/netframework-3.5/ms741839(v=vs.90)">Практическое руководство. Добавление команды в объект MenuItem</a></li>
</ul>
</article>
          </div>
          
          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">
              <div class="contribution">
                <ul class="nav">
                </ul>
              </div>
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
              <!-- <p><a class="back-to-top" href="#top">Back to top</a><p> -->
              </nav>
            </div>
          </div>
        </div>
      </div>
      
      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right">
              <a href="#top">Back to top</a>
            </span>
            <span><a href="https://github.com/MSDN-WhiteKnight/dotnet-docs-ru">Неофициальная документация по .NET на русском языке</a>. Лицензия: <a href="https://github.com/MSDN-WhiteKnight/dotnet-docs-ru/blob/main/LICENSE">CC-BY 4.0</a>. Основано на <a href="https://docs.microsoft.com/ru-ru/dotnet/">документации по .NET с Microsoft Docs</a><br>Generated by <strong>DocFX</strong></span><script type="text/javascript">(function(m,e,t,r,i,k,a){m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};m[i].l=1*new Date();k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)})(window, document, "script", "https://mc.yandex.ru/metrika/tag.js", "ym");ym(65150713, "init", {clickmap:true,trackLinks:true,accurateTrackBounce:true});</script><noscript><div><img src="https://mc.yandex.ru/watch/65150713" style="position:absolute; left:-9999px;" alt=""></div></noscript>
            
          </div>
        </div>
      </footer>
    </div>
    
    <script type="text/javascript" src="../../../styles/docfx.vendor.js"></script>
    <script type="text/javascript" src="../../../styles/docfx.js"></script>
    <script type="text/javascript" src="../../../styles/main.js"></script>
  </body>
</html>
