<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>&#1054;&#1073;&#1097;&#1080;&#1077; &#1089;&#1074;&#1077;&#1076;&#1077;&#1085;&#1080;&#1103; &#1086;&#1073; &#1086;&#1073;&#1088;&#1072;&#1073;&#1086;&#1090;&#1082;&#1077; &#1080;&#1079;&#1086;&#1073;&#1088;&#1072;&#1078;&#1077;&#1085;&#1080;&#1081; | &#1053;&#1077;&#1086;&#1092;&#1080;&#1094;&#1080;&#1072;&#1083;&#1100;&#1085;&#1072;&#1103; &#1076;&#1086;&#1082;&#1091;&#1084;&#1077;&#1085;&#1090;&#1072;&#1094;&#1080;&#1103; .NET </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="&#1054;&#1073;&#1097;&#1080;&#1077; &#1089;&#1074;&#1077;&#1076;&#1077;&#1085;&#1080;&#1103; &#1086;&#1073; &#1086;&#1073;&#1088;&#1072;&#1073;&#1086;&#1090;&#1082;&#1077; &#1080;&#1079;&#1086;&#1073;&#1088;&#1072;&#1078;&#1077;&#1085;&#1080;&#1081; | &#1053;&#1077;&#1086;&#1092;&#1080;&#1094;&#1080;&#1072;&#1083;&#1100;&#1085;&#1072;&#1103; &#1076;&#1086;&#1082;&#1091;&#1084;&#1077;&#1085;&#1090;&#1072;&#1094;&#1080;&#1103; .NET ">
    <meta name="generator" content="docfx 2.40.12.0">
    
    <link rel="shortcut icon" href="../../../favicon.ico">
    <link rel="stylesheet" href="../../../styles/docfx.vendor.css">
    <link rel="stylesheet" href="../../../styles/docfx.css">
    <link rel="stylesheet" href="../../../styles/main.css">
    <meta property="docfx:navrel" content="../../../toc.html">
    <meta property="docfx:tocrel" content="toc.html">
    
    
    
  </head>
  <body data-spy="scroll" data-target="#affix" data-offset="120">
    <div id="wrapper">
      <header>
        
        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              
              <a class="navbar-brand" href="../../../index.html">
                <img id="logo" class="svg" src="../../../logo.svg" alt="">
              </a>
            </div>
            <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="search">
                <div class="form-group">
                  <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                </div>
              </form>
            </div>
          </div>
        </nav>
        
        <div class="subnav navbar navbar-default">
          <div class="container hide-when-search" id="breadcrumb">
            <ul class="breadcrumb">
              <li></li>
            </ul>
          </div>
        </div>
      </header>
      <div role="main" class="container body-content hide-when-search">
        
        <div class="sidenav hide-when-search">
          <a class="btn toc-toggle collapse" data-toggle="collapse" href="#sidetoggle" aria-expanded="false" aria-controls="sidetoggle">Show / Hide Table of Contents</a>
          <div class="sidetoggle collapse" id="sidetoggle">
            <div id="sidetoc"></div>
          </div>
        </div>
        <div class="article row grid-right">
          <div class="col-md-10">
            <article class="content wrap" id="_content" data-uid="">
<h1 id="imaging-overview">Общие сведения об обработке изображений</h1>

<p>В этом разделе содержатся общие сведения о платформе Компонент обработки изображений Microsoft Windows Presentation Foundation. Обработка изображений в WPF позволяет разработчикам для отображения, преобразование и форматирование изображений.</p>
<p><a name="_wpfImaging"></a></p>
<h2 id="wpf-imaging-component">Компонент обработки изображений WPF</h2>
<p>Обработка изображений в WPF предоставляет значительные усовершенствования возможностей обработки изображений в Microsoft Windows. Возможности обработки изображений, например вывод растрового изображения или использование изображения на общем элементе управления были ранее реализованы с помощью библиотек Интерфейс графических устройств (GDI) Microsoft Windows и Microsoft Windows GDI+. Эти библиотеки API обеспечивают базовые функции обработки изображений, но в них отсутствуют такие возможности, как поддержка расширяемости кодеков и изображений высокого качества. Обработка изображений в WPF предназначен для преодоления недостатков GDI и GDI+ и предоставляет новый набор API для отображения и использования изображений в приложениях.</p>
<p>Существует два способа доступа к Обработка изображений в WPF API — управляемый компонент и неуправляемый компонент. Неуправляемый компонент предоставляет следующие возможности.</p>
<ul>
<li><p>Модель расширяемости для новых или собственных форматов изображений.</p>
</li>
<li><p>Повышение производительности и безопасности при работе с собственными форматами изображений, включая точечный рисунок (BMP), Формат JPEG (Joint Photographics Experts Group), Формат PNG (Portable Network Graphics), Формат TIFF (Tagged Image File Format), Microsoft Windows Media Photo, Формат GIF (Graphics Interchange Format) и формат значка (ICO).</p>
</li>
<li><p>Сохранение изображений с большой глубиной цвета — до 8 бит на канал (32 бита на пиксель).</p>
</li>
<li><p>Неразрушающее масштабирование, обрезка и повороты.</p>
</li>
<li><p>Упрощенное управление цветом.</p>
</li>
<li><p>Поддержка собственных метаданных в файле.</p>
</li>
<li><p>Управляемый компонент использует неуправляемую инфраструктуру для обеспечения плавной интеграции изображений с другими функциями WPF, такими как пользовательский интерфейс, анимация и графика. Управляемый компонент также использует преимущества Windows Presentation Foundation (WPF) работы с образами модели расширяемости кодека которая позволяет автоматически распознавать новые форматы изображений в WPF приложений.</p>
</li>
</ul>
<p>Большинство управляемых Обработка изображений в WPF API находятся в <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.imaging">System.Windows.Media.Imaging</a> пространства имен, хотя несколько важных типов, таких как <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.imagebrush">ImageBrush</a> и <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.imagedrawing">ImageDrawing</a> находятся в <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media">System.Windows.Media</a> пространства имен и <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.controls.image">Image</a> находится в <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.controls">System.Windows.Controls</a> пространства имен.</p>
<p>В этом разделе содержатся дополнительные сведения об управляемом компоненте. Дополнительные сведения о неуправляемом компоненте API см. в документации по <a href="/windows/desktop/wic/-wic-lh">неуправляемому компоненту обработки изображений WPF</a>.</p>
<p><a name="_imageformats"></a></p>
<h2 id="wpf-image-formats">Форматы изображений в WPF</h2>
<p>Для кодирования и декодирования конкретного формата мультимедиа используются кодеки. Обработка изображений в WPF включает в себя кодек для BMP, JPEG, PNG, TIFF, Windows Media Photo, GIFи значок форматы изображений. Каждый из этих кодеков позволяет приложениям декодировать и, за исключением формата ICON, кодировать изображения соответствующих форматов.</p>
<p><a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.imaging.bitmapsource">BitmapSource</a> важным классом, используемым для декодирования и кодирования изображений. Это основной строительный блок конвейера Обработка изображений в WPF. Он представляет отдельный постоянный набор точек определенного размера и разрешения. Объект <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.imaging.bitmapsource">BitmapSource</a> можно отдельных кадров из многокадрового изображения, или он может быть результатом преобразования, выполненного на <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.imaging.bitmapsource">BitmapSource</a>. Он является родителем многих основных классов, используемых в WPF imaging, такие как <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.imaging.bitmapframe">BitmapFrame</a>.</p>
<p>Объект <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.imaging.bitmapframe">BitmapFrame</a> используется для хранения растровых данных формата изображения. Многие форматы изображения поддерживают использование только одного <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.imaging.bitmapframe">BitmapFrame</a>, хотя форматы, такие как GIF и TIFF поддерживают несколько кадров в изображении. Кадры используются декодерами в качестве входных данных и передаются кодировщикам для создания файлов изображений.</p>
<p>В следующем примере показано, как <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.imaging.bitmapframe">BitmapFrame</a> создается на основе <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.imaging.bitmapsource">BitmapSource</a> и затем добавляются TIFF изображения.</p>
<pre><code class="lang-csharp" name="BitmapFrameExample#10">BitmapSource image5 = BitmapSource.Create(
    width,
    height,
    96,
    96,
    PixelFormats.Indexed1,
    BitmapPalettes.WebPalette,
    pixels,
    stride);

FileStream stream5 = new FileStream(&quot;palette.tif&quot;, FileMode.Create);
TiffBitmapEncoder encoder5 = new TiffBitmapEncoder();
encoder5.Frames.Add(BitmapFrame.Create(image5));
encoder5.Save(stream5);
</code></pre><div class="WARNING">
<h5>Warning</h5>
<p>It looks like the sample you are looking for does not exist.</p>
</div><h3 id="image-format-decoding">Декодирование изображений разных форматов</h3>
<p>Декодирование изображения — это преобразование изображения в некотором формате в данные изображения, которые могут быть использованы системой. Данные изображения затем могут использоваться для отображения, обработки или кодирования в другой формат. Выбор декодера зависит от формата изображения. Выбор кодека производится автоматически, если не указан определенный декодер. Примеры в разделе <a href="#_displayingimages">Отображение изображений в WPF</a> демонстрируют автоматическое декодирование. Декодеры пользовательских форматов, разработанные с помощью неуправляемых интерфейсов Обработка изображений в WPF и зарегистрированные в системе, автоматически участвуют в выборе декодера. Благодаря этому пользовательские форматы могут автоматически отображаться в приложениях WPF.</p>
<p>В следующем примере показано использование декодера точечных рисунков для декодирования изображения формата BMP.</p>
<div class="WARNING">
<h5>Warning</h5>
<p>It looks like the sample you are looking for does not exist.</p>
</div><pre><code class="lang-csharp" name="BmpBitmapDecoderEncoder#5">
// Open a Uri and decode a BMP image
Uri myUri = new Uri(&quot;tulipfarm.bmp&quot;, UriKind.RelativeOrAbsolute);
BmpBitmapDecoder decoder2 = new BmpBitmapDecoder(myUri, BitmapCreateOptions.PreservePixelFormat, BitmapCacheOption.Default);
BitmapSource bitmapSource2 = decoder2.Frames[0];

// Draw the Image
Image myImage2 = new Image();
myImage2.Source = bitmapSource2;
myImage2.Stretch = Stretch.None;
myImage2.Margin = new Thickness(20);
</code></pre><div class="WARNING">
<h5>Warning</h5>
<p>It looks like the sample you are looking for does not exist.</p>
</div><h3 id="image-format-encoding">Кодирование изображений разных форматов</h3>
<p>Кодирование изображения — это преобразование данных изображения в определенный формат. Кодированные данные изображения могут затем быть использованы для создания новых файлов изображений. Обработка изображений в WPF предоставляет кодировщики для каждого из описанных выше форматов изображения.</p>
<p>В следующем примере показано использование кодировщика для сохранения вновь созданного точечного рисунка.</p>
<div class="WARNING">
<h5>Warning</h5>
<p>It looks like the sample you are looking for does not exist.</p>
</div><pre><code class="lang-csharp" name="BmpBitmapDecoderEncoder#3">FileStream stream = new FileStream(&quot;new.bmp&quot;, FileMode.Create);
BmpBitmapEncoder encoder = new BmpBitmapEncoder();
TextBlock myTextBlock = new TextBlock();
myTextBlock.Text = &quot;Codec Author is: &quot; + encoder.CodecInfo.Author.ToString();
encoder.Frames.Add(BitmapFrame.Create(image));
encoder.Save(stream);
</code></pre><div class="WARNING">
<h5>Warning</h5>
<p>It looks like the sample you are looking for does not exist.</p>
</div>
<p><a name="_displayingimages"></a></p>
<h2 id="displaying-images-in-wpf">Отображение изображений в WPF</h2>
<p>Существует несколько способов отображения изображений в приложении Windows Presentation Foundation (WPF). Изображения могут отображаться с помощью <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.controls.image">Image</a> элемента управления, нарисованный в визуального элемента с помощью <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.imagebrush">ImageBrush</a>, или отображаются с помощью <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.imagedrawing">ImageDrawing</a>.</p>
<h3 id="using-the-image-control">Использование элемента управления Image</h3>
<p><a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.controls.image">Image</a> — Это элемент платформы и основной способ отображения изображений в приложениях. В XAML, <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.controls.image">Image</a> можно использовать в двух способов; синтаксис атрибутов или синтаксис свойств. В следующем примере показано, как можно отобразить изображение размером 200 пикселей в ширину, используя синтаксис атрибута и синтаксис тега свойства. Дополнительные сведения о синтаксисе атрибутов и синтаксисе свойств см. в разделе <a href="../advanced/dependency-properties-overview.html">Общие сведения о свойствах зависимостей</a>.</p>
<pre><code class="lang-xaml" name="ImageElementExample_snip#ImageSimpleExampleInlineMarkup">&lt;!-- Simple image rendering. However, rendering an image this way may not
     result in the best use of application memory. See markup below which
     creates the same end result but using less memory. --&gt;
&lt;Image Width=&quot;200&quot; 
Source=&quot;C:\Documents and Settings\All Users\Documents\My Pictures\Sample Pictures\Water Lilies.jpg&quot;/&gt;

&lt;Image Width=&quot;200&quot;&gt;
  &lt;Image.Source&gt;
    &lt;!-- To save significant application memory, set the DecodePixelWidth or  
     DecodePixelHeight of the BitmapImage value of the image source to the desired 
     height and width of the rendered image. If you don't do this, the application will 
     cache the image as though it were rendered as its normal size rather then just 
     the size that is displayed. --&gt;
    &lt;!-- Note: In order to preserve aspect ratio, only set either DecodePixelWidth
         or DecodePixelHeight but not both. --&gt;
    &lt;BitmapImage DecodePixelWidth=&quot;200&quot;  
     UriSource=&quot;C:\Documents and Settings\All Users\Documents\My Pictures\Sample Pictures\Water Lilies.jpg&quot; /&gt;
  &lt;/Image.Source&gt;
&lt;/Image&gt;
</code></pre>
<p>Во многих примерах используется <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.imaging.bitmapimage">BitmapImage</a> объект для ссылки на файл изображения. <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.imaging.bitmapimage">BitmapImage</a> является специализированным <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.imaging.bitmapsource">BitmapSource</a> , оптимизированный для Язык XAML загрузки и простой способ отображения изображений в качестве <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.controls.image.source">Source</a> из <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.controls.image">Image</a> элемента управления.</p>
<p>В следующем примере показано, как построить изображение шириной 200 пикселей с использованием кода.</p>
<div class="NOTE">
<h5>Note</h5>
<p><a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.imaging.bitmapimage">BitmapImage</a> реализует <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.componentmodel.isupportinitialize">ISupportInitialize</a> интерфейс для оптимизации инициализации на нескольких свойствах. Изменения свойств происходят только во время инициализации объекта. Вызовите <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.imaging.bitmapimage.begininit">BeginInit</a> для обозначения начала инициализации и <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.imaging.bitmapimage.endinit">EndInit</a> для обозначения завершения инициализации. После инициализации изменения свойств игнорируются.</p>
</div>
<pre><code class="lang-csharp" name="ImageElementExample_snip#ImageSimpleExampleInlineCode1">// Create Image Element
Image myImage = new Image();
myImage.Width = 200;

// Create source
BitmapImage myBitmapImage = new BitmapImage();

// BitmapImage.UriSource must be in a BeginInit/EndInit block
myBitmapImage.BeginInit();
myBitmapImage.UriSource = new Uri(@&quot;C:\Documents and Settings\All Users\Documents\My Pictures\Sample Pictures\Water Lilies.jpg&quot;);

// To save significant application memory, set the DecodePixelWidth or
// DecodePixelHeight of the BitmapImage value of the image source to the desired
// height or width of the rendered image. If you don't do this, the application will
// cache the image as though it were rendered as its normal size rather then just
// the size that is displayed.
// Note: In order to preserve aspect ratio, set DecodePixelWidth
// or DecodePixelHeight but not both.
myBitmapImage.DecodePixelWidth = 200;
myBitmapImage.EndInit();
//set image source
myImage.Source = myBitmapImage;
</code></pre><div class="WARNING">
<h5>Warning</h5>
<p>It looks like the sample you are looking for does not exist.</p>
</div><h4 id="rotating-converting-and-cropping-images">Вращение, преобразование и обрезка изображений</h4>
<p>WPF позволяет пользователям осуществлять преобразования изображений с помощью свойств объекта <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.imaging.bitmapimage">BitmapImage</a> или с помощью дополнительных <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.imaging.bitmapsource">BitmapSource</a> объекты, такие как <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.imaging.croppedbitmap">CroppedBitmap</a> или <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.imaging.formatconvertedbitmap">FormatConvertedBitmap</a>. С помощью этих преобразований можно масштабировать или поворачивать изображения, изменять формат пикселей изображения и обрезать изображения.</p>
<p>Вращение изображения осуществляется с помощью <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.imaging.bitmapimage.rotation">Rotation</a> свойство <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.imaging.bitmapimage">BitmapImage</a>. Вращение возможно только с шагом 90 градусов. В следующем примере изображение поворачивается на 90 градусов.</p>
<pre><code class="lang-xaml" name="ImageElementExample#TransformedXAML2">&lt;Image Width=&quot;150&quot; Margin=&quot;5&quot; Grid.Column=&quot;0&quot; Grid.Row=&quot;1&quot;&gt;
  &lt;Image.Source&gt;
    &lt;TransformedBitmap Source=&quot;/sampleImages/watermelon.jpg&quot; &gt;
      &lt;TransformedBitmap.Transform&gt;
        &lt;RotateTransform Angle=&quot;90&quot;/&gt;
      &lt;/TransformedBitmap.Transform&gt;
    &lt;/TransformedBitmap&gt;
  &lt;/Image.Source&gt;
&lt;/Image&gt;
</code></pre><pre><code class="lang-csharp" name="ImageElementExample#TransformedCSharp1">// Create Image element.
Image rotated90 = new Image();
rotated90.Width = 150;

// Create the TransformedBitmap to use as the Image source.
TransformedBitmap tb = new TransformedBitmap();

// Create the source to use as the tb source.
BitmapImage bi = new BitmapImage();
bi.BeginInit();
bi.UriSource = new Uri(@&quot;sampleImages/watermelon.jpg&quot;, UriKind.RelativeOrAbsolute);
bi.EndInit();

// Properties must be set between BeginInit and EndInit calls.
tb.BeginInit();
tb.Source = bi;
// Set image rotation.
RotateTransform transform = new RotateTransform(90);
tb.Transform = transform;
tb.EndInit();
// Set the Image source.
rotated90.Source = tb;
</code></pre><div class="WARNING">
<h5>Warning</h5>
<p>It looks like the sample you are looking for does not exist.</p>
</div>
<p>Преобразование изображения к другому формату, такие как серого выполняется с помощью <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.imaging.formatconvertedbitmap">FormatConvertedBitmap</a>. В следующих примерах изображения преобразуются в <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.pixelformats.gray4">Gray4</a>.</p>
<pre><code class="lang-xaml" name="ImageElementExample_snip#ConvertedXAML2">&lt;!-- Grayscale XAML Image --&gt;
&lt;Image Width=&quot;200&quot; Grid.Column=&quot;0&quot; Grid.Row=&quot;1&quot;&gt;
   &lt;Image.Source&gt;
      &lt;FormatConvertedBitmap Source=&quot;/sampleImages/rocks.jpg&quot;  DestinationFormat=&quot;Gray4&quot; /&gt;
   &lt;/Image.Source&gt;
&lt;/Image&gt;
</code></pre><pre><code class="lang-csharp" name="ImageElementExample_snip#ConvertedCSharp1">//Create Image Element
Image grayImage = new Image();
grayImage.Width = 200;
grayImage.Margin = new Thickness(5);

//Create source using xaml defined resource.
FormatConvertedBitmap fcb = new FormatConvertedBitmap(
   (BitmapImage)this.Resources[&quot;masterImage&quot;],PixelFormats.Gray4,null,0);
//set image source
grayImage.Source = fcb;
</code></pre><div class="WARNING">
<h5>Warning</h5>
<p>It looks like the sample you are looking for does not exist.</p>
</div>
<p>Чтобы обрезать изображение, либо <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.uielement.clip">Clip</a> свойство <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.controls.image">Image</a> или <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.imaging.croppedbitmap">CroppedBitmap</a> может использоваться. Как правило, если вы просто хотите отобразить часть изображения, <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.uielement.clip">Clip</a> следует использовать. Если вам нужно закодировать и сохранить обрезанное изображения, <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.imaging.croppedbitmap">CroppedBitmap</a> следует использовать. В следующем примере изображение обрезается с помощью свойства Clip с помощью <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.ellipsegeometry">EllipseGeometry</a>.</p>
<pre><code class="lang-xaml" name="ImageElementExample_snip#CroppedXAMLUsingClip1">&lt;!-- Cropping an Image using Clip --&gt;
&lt;Image Width=&quot;200&quot; Grid.Column=&quot;0&quot; Grid.Row=&quot;5&quot; Margin=&quot;5&quot;
   Source=&quot;/sampleImages/gecko.jpg&quot;&gt;
  &lt;Image.Clip&gt;
    &lt;EllipseGeometry Center=&quot;75,50&quot; RadiusX=&quot;50&quot; RadiusY=&quot;25&quot; /&gt;
  &lt;/Image.Clip&gt;
&lt;/Image&gt;
</code></pre><pre><code class="lang-csharp" name="ImageElementExample_snip#CroppedCSharpUsingClip1">//Create the image for clipping
Image clipImage = new Image();
clipImage.Width = 200;
clipImage.Margin = new Thickness(5);

//Create &amp; Set source
BitmapImage bi = new BitmapImage();
//BitmapImage.UriSource must be in a BeginInit/EndInit block
bi.BeginInit();
bi.UriSource = new Uri(&quot;pack://application:,,/sampleImages/gecko.jpg&quot;);
bi.EndInit();
clipImage.Source = bi;

//Clip the using an EllipseGeometry
EllipseGeometry clipGeometry = new EllipseGeometry(new Point(75, 50), 50, 25);
clipImage.Clip = clipGeometry;
</code></pre><div class="WARNING">
<h5>Warning</h5>
<p>It looks like the sample you are looking for does not exist.</p>
</div><h4 id="stretching-images">Растягивание изображений</h4>
<p><a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.controls.image.stretch">Stretch</a> Свойство определяет, как изображение растягивается для заполнения его контейнера. <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.controls.image.stretch">Stretch</a> Свойство принимает следующие значения, определенные <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.stretch">Stretch</a> перечисления:</p>
<ul>
<li><p><a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.stretch#System_Windows_Media_Stretch_None">None</a>: Изображение не растягивается для заполнения области вывода. Если изображение больше, чем область вывода, изображение заполняет область вывода с обрезкой тех частей, которые не входят.</p>
</li>
<li><p><a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.stretch#System_Windows_Media_Stretch_Fill">Fill</a>: Изображение масштабируется в соответствии с области вывода. Так как высота и ширина изображения масштабируются независимо друг от друга, исходные пропорции изображения могут не сохраниться. То есть изображение может быть деформировано для полного заполнения контейнера вывода.</p>
</li>
<li><p><a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.stretch#System_Windows_Media_Stretch_Uniform">Uniform</a>: Изображение масштабируется таким образом, чтобы полностью уместиться внутри области вывода. Пропорции изображения сохраняются.</p>
</li>
<li><p><a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.stretch#System_Windows_Media_Stretch_UniformToFill">UniformToFill</a>: Изображение масштабируется таким образом, чтобы полностью заполнить область вывода при этом сохранить исходные пропорции изображения.</p>
</li>
</ul>
<p>В следующем примере применяется, каждое из доступных <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.stretch">Stretch</a> перечислений для <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.controls.image">Image</a>.</p>
<p>Ниже показаны выходные данные из примера и демонстрируется влияние различных <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.controls.image.stretch">Stretch</a> параметров изображения.</p>
<p><img src="media/img-mmgraphics-stretchenum.jpg" alt="Различные параметры растяжения TileBrush" title="img_mmgraphics_stretchenum"><br>
Различные параметры растяжения</p>
<pre><code class="lang-xaml" name="ImageElementExample_snip#ImageStretchExampleWholePage">&lt;Page xmlns=&quot;http://schemas.microsoft.com/winfx/2006/xaml/presentation&quot;
  xmlns:x=&quot;http://schemas.microsoft.com/winfx/2006/xaml&quot; &gt;
  &lt;DockPanel&gt;

    &lt;Border DockPanel.Dock=&quot;Top&quot; Background=&quot;Black&quot;&gt;
      &lt;TextBlock Foreground=&quot;White&quot; HorizontalAlignment=&quot;Stretch&quot; FontSize=&quot;20&quot;&gt;
        Stretching an Image
      &lt;/TextBlock&gt;
    &lt;/Border&gt;

    &lt;Grid Name=&quot;simpleGrid&quot; Background=&quot;{StaticResource CheckeredBrushResource}&quot; 
       Margin=&quot;10&quot; 
       ShowGridLines=&quot;True&quot;
       VerticalAlignment=&quot;Center&quot;
       HorizontalAlignment=&quot;Center&quot;&gt;
      &lt;Grid.ColumnDefinitions&gt;
        &lt;ColumnDefinition Width=&quot;175&quot; /&gt;
        &lt;ColumnDefinition Width=&quot;175&quot; /&gt;
        &lt;ColumnDefinition Width=&quot;175&quot; /&gt;
        &lt;ColumnDefinition Width=&quot;175&quot; /&gt;
      &lt;/Grid.ColumnDefinitions&gt;
      &lt;Grid.RowDefinitions&gt;
        &lt;RowDefinition /&gt;
        &lt;RowDefinition Height=&quot;200&quot;/&gt;
      &lt;/Grid.RowDefinitions&gt;
      &lt;!-- Labels --&gt;
      &lt;TextBlock Style=&quot;{StaticResource Header1}&quot; 
        Grid.Column=&quot;0&quot; Grid.Row=&quot;0&quot;&gt;None&lt;/TextBlock&gt;
      &lt;TextBlock Style=&quot;{StaticResource Header1}&quot; 
        Grid.Column=&quot;1&quot; Grid.Row=&quot;0&quot;&gt;Uniform&lt;/TextBlock&gt;
      &lt;TextBlock Style=&quot;{StaticResource Header1}&quot; 
        Grid.Column=&quot;2&quot; Grid.Row=&quot;0&quot;&gt;UniformToFill&lt;/TextBlock&gt;
      &lt;TextBlock Style=&quot;{StaticResource Header1}&quot;
        Grid.Column=&quot;3&quot; Grid.Row=&quot;0&quot;&gt;Fill&lt;/TextBlock&gt;
      &lt;Border Grid.Column=&quot;0&quot; Grid.Row=&quot;1&quot; BorderThickness=&quot;1&quot; BorderBrush=&quot;Black&quot;&gt;
        &lt;!-- None: Image is not scaled. If image is larger than the
             output area, the image will be cropped to the size of the output area.--&gt;
        &lt;Image
          Source=&quot;sampleImages/gecko.jpg&quot; 
          Stretch=&quot;None&quot; /&gt;
      &lt;/Border&gt;
      &lt;Border Grid.Column=&quot;1&quot; Grid.Row=&quot;1&quot; BorderThickness=&quot;1&quot; BorderBrush=&quot;Black&quot;&gt;
        &lt;!-- Uniform: Scale to fit output area.
             Aspect ratio is preserved.--&gt;
        &lt;Image
          Source=&quot;sampleImages/gecko.jpg&quot; 
          Stretch=&quot;Uniform&quot; /&gt;
      &lt;/Border&gt;
      &lt;Border Grid.Column=&quot;2&quot; Grid.Row=&quot;1&quot; BorderThickness=&quot;1&quot; BorderBrush=&quot;Black&quot;&gt;
        &lt;!-- UniformToFill: Scale to completely fill output area.
             Aspect ratio is preserved. Cropping may occur.--&gt;
        &lt;Image  
          Source=&quot;sampleImages/gecko.jpg&quot; 
        Stretch=&quot;UniformToFill&quot; /&gt;
      &lt;/Border&gt;
      &lt;Border Grid.Column=&quot;3&quot; Grid.Row=&quot;1&quot; BorderThickness=&quot;1&quot; BorderBrush=&quot;Black&quot;&gt;
      &lt;!-- Fill: Scale to completely fill output area.
             Aspect ratio may not be preserved.--&gt;
      &lt;Image 
        Source=&quot;sampleImages/gecko.jpg&quot; 
        Stretch=&quot;Fill&quot; /&gt;
      &lt;/Border&gt;
    &lt;/Grid&gt;
  &lt;/DockPanel&gt;
&lt;/Page&gt;
</code></pre><h3 id="painting-with-images">Закрашивание с помощью изображений</h3>
<p>Изображения могут также отображаться в приложении путем рисования с помощью <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.brush">Brush</a>. Кисти позволяют заполнять объекты ИП различными изображениями, начиная с просто сплошного цвета и заканчивая сложными наборами шаблонов и изображений. Для заполнения изображением используйте <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.imagebrush">ImageBrush</a>. <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.imagebrush">ImageBrush</a> — Это разновидность <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.tilebrush">TileBrush</a> , определяющей содержимое как растровое изображение. <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.imagebrush">ImageBrush</a> Отображает одно изображение, которое определяется ее <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.imagebrush.imagesource">ImageSource</a> свойство. Способом растяжения изображения, выравнивания и заполнения мозаикой можно управлять, что позволяет избегать искажений, создавать шаблоны и применять другие эффекты. На следующем рисунке показан некоторые эффекты, которые могут быть обеспечены <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.imagebrush">ImageBrush</a>.</p>
<p><img src="media/wcpsdk-mmgraphics-imagebrushexamples.gif" alt="Примеры вывода ImageBrush" title="wcpsdk_mmgraphics_imagebrushexamples"><br>
Используя кисти изображения, можно заполнять фигуры, элементы управления, текст и многое другое</p>
<p>Следующий пример демонстрирует рисования фона кнопки с образа с помощью <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.imagebrush">ImageBrush</a>.</p>
<pre><code class="lang-xaml" name="UsingImageBrush#4">&lt;!-- Sets the button's Background property with an ImageBrush. The resulting
     button has an image as its background. --&gt;
&lt;Button Grid.Row=&quot;3&quot; Grid.Column=&quot;2&quot; 
 Height=&quot;75&quot; Width=&quot;100&quot; Foreground=&quot;White&quot; FontWeight=&quot;Bold&quot;
 HorizontalAlignment=&quot;Left&quot;&gt;
  A Button
  &lt;Button.Background&gt;
    &lt;ImageBrush ImageSource=&quot;sampleImages\blueberries.jpg&quot; /&gt;
  &lt;/Button.Background&gt;
&lt;/Button&gt;
</code></pre>
<p>Дополнительные сведения о <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.imagebrush">ImageBrush</a> и закрашивании изображений см. в разделе <a href="painting-with-images-drawings-and-visuals.html">Рисование с помощью изображений, рисунков и визуальных элементов</a>.</p>
<p><a name="_metadata"></a></p>
<h2 id="image-metadata">Метаданные изображений</h2>
<p>Некоторые файлы изображений содержат метаданные, описывающие содержимое или характеристики файла. Например, большинство цифровых фотоаппаратов создают изображения, содержащие метаданные об изготовителе и модели фотоаппарата, использованного для создания изображения. В разных форматах изображения метаданные обрабатываются по-разному. Платформа Обработка изображений в WPF предоставляет универсальный способ хранения и извлечения метаданных для всех поддерживаемых форматов изображения.</p>
<p>Доступ к метаданным предоставляется через <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.imaging.bitmapsource.metadata">Metadata</a> свойство <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.imaging.bitmapsource">BitmapSource</a> объекта. <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.imaging.bitmapsource.metadata">Metadata</a> Возвращает <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.imaging.bitmapmetadata">BitmapMetadata</a> объекта, который содержит все метаданные, содержащиеся в изображении. Эти данные могут представлять собой одну схему метаданных или комбинацию различных схем. Обработка изображений в WPF поддерживает следующие схемы метаданных изображения: Файл формата EXIF (Exchangeable image file), текст (текстовые данные PNG), IFD (image file directory — каталог файла изображения), Международный совет по прессе и телекоммуникациям (International Press Telecommunications Council, IPTC), и Платформа расширяемых метаданных (XMP).</p>
<p>Для упрощения процесса чтения метаданных <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.imaging.bitmapmetadata">BitmapMetadata</a> предоставляет несколько именованных свойств, которые легко доступны такие как <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.imaging.bitmapmetadata.author">Author</a>, <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.imaging.bitmapmetadata.title">Title</a>, и <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.imaging.bitmapmetadata.cameramodel">CameraModel</a>. Многие из этих именованных свойств могут также использоваться для записи метаданных. Дополнительная поддержка чтения метаданных обеспечивается благодаря использованию считывателя запросов метаданных. <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.imaging.bitmapmetadata.getquery">GetQuery</a> Метод используется для извлечения считывателя запросов метаданных, предоставляя строки запроса, такие как <em>«/ app1/exif /»</em>. В следующем примере <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.imaging.bitmapmetadata.getquery">GetQuery</a> используется для получения текста, хранящегося в <em>«/ Text/Description»</em> расположение.</p>
<div class="WARNING">
<h5>Warning</h5>
<p>It looks like the sample you are looking for does not exist.</p>
</div><pre><code class="lang-csharp" name="BitmapMetadata#GetQuery">
// Add the metadata of the bitmap image to the text block.
TextBlock myTextBlock = new TextBlock();
myTextBlock.Text = &quot;The Description metadata of this image is: &quot; + pngInplace.GetQuery(&quot;/Text/Description&quot;).ToString();
</code></pre><div class="WARNING">
<h5>Warning</h5>
<p>It looks like the sample you are looking for does not exist.</p>
</div>
<p>Для написания метаданных используется мастер написания запросов метаданных. <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.imaging.bitmapmetadata.setquery">SetQuery</a> Получает запрос и задает требуемое значение. В следующем примере <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.imaging.bitmapmetadata.setquery">SetQuery</a> используется для записи текста, хранящегося в <em>«/ Text/Description»</em> расположение.</p>
<div class="WARNING">
<h5>Warning</h5>
<p>It looks like the sample you are looking for does not exist.</p>
</div><pre><code class="lang-csharp" name="BitmapMetadata#SetQuery">Stream pngStream = new System.IO.FileStream(&quot;smiley.png&quot;, FileMode.Open, FileAccess.ReadWrite, FileShare.ReadWrite);
PngBitmapDecoder pngDecoder = new PngBitmapDecoder(pngStream, BitmapCreateOptions.PreservePixelFormat, BitmapCacheOption.Default);
BitmapFrame pngFrame = pngDecoder.Frames[0];
InPlaceBitmapMetadataWriter pngInplace = pngFrame.CreateInPlaceBitmapMetadataWriter();
if (pngInplace.TrySave() == true)
{ pngInplace.SetQuery(&quot;/Text/Description&quot;, &quot;Have a nice day.&quot;); }
pngStream.Close();
</code></pre><div class="WARNING">
<h5>Warning</h5>
<p>It looks like the sample you are looking for does not exist.</p>
</div>
<p><a name="_extensibility"></a></p>
<h2 id="codec-extensibility">Расширяемость кодеков</h2>
<p>Основной особенностью Обработка изображений в WPF является модель расширяемости для новых кодеков изображений. Эти неуправляемые интерфейсы позволяют разработчикам кодеков интегрировать кодеки в WPF. Благодаря этому новые форматы изображений могут автоматически использоваться приложениями WPF.</p>
<p>Пример расширяемости API см. в разделе <a href="https://go.microsoft.com/fwlink/?LinkID=160052">Пример кодека Win32</a>. В этом примере показано создание декодера и кодировщика для пользовательского формата изображения.</p>
<div class="NOTE">
<h5>Note</h5>
<p>Чтобы система могла распознать кодек, он должен иметь цифровую подпись.</p>
</div>
<h2 id="see-also">См. также</h2>
<ul>
<li><a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.imaging.bitmapsource">BitmapSource</a></li>
<li><a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.imaging.bitmapimage">BitmapImage</a></li>
<li><a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.controls.image">Image</a></li>
<li><a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.imaging.bitmapmetadata">BitmapMetadata</a></li>
<li><a href="../advanced/optimizing-performance-2d-graphics-and-imaging.html">Двумерная графика и изображения</a></li>
<li><a href="https://go.microsoft.com/fwlink/?LinkID=160052">Пример кодека Win32</a></li>
</ul>
</article>
          </div>
          
          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">
              <div class="contribution">
                <ul class="nav">
                </ul>
              </div>
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
              <!-- <p><a class="back-to-top" href="#top">Back to top</a><p> -->
              </nav>
            </div>
          </div>
        </div>
      </div>
      
      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right">
              <a href="#top">Back to top</a>
            </span>
            <span><a href="https://github.com/MSDN-WhiteKnight/dotnet-docs-ru">Неофициальная документация по .NET на русском языке</a>. Лицензия: <a href="https://github.com/MSDN-WhiteKnight/dotnet-docs-ru/blob/main/LICENSE">CC-BY 4.0</a>. Основано на <a href="https://docs.microsoft.com/ru-ru/dotnet/">документации по .NET с Microsoft Docs</a><br>Generated by <strong>DocFX</strong></span><script type="text/javascript">(function(m,e,t,r,i,k,a){m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};m[i].l=1*new Date();k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)})(window, document, "script", "https://mc.yandex.ru/metrika/tag.js", "ym");ym(65150713, "init", {clickmap:true,trackLinks:true,accurateTrackBounce:true});</script><noscript><div><img src="https://mc.yandex.ru/watch/65150713" style="position:absolute; left:-9999px;" alt=""></div></noscript>
            
          </div>
        </div>
      </footer>
    </div>
    
    <script type="text/javascript" src="../../../styles/docfx.vendor.js"></script>
    <script type="text/javascript" src="../../../styles/docfx.js"></script>
    <script type="text/javascript" src="../../../styles/main.js"></script>
  </body>
</html>
