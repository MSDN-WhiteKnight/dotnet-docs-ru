<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>&#1056;&#1080;&#1089;&#1086;&#1074;&#1072;&#1085;&#1080;&#1077; &#1089; &#1087;&#1086;&#1084;&#1086;&#1097;&#1100;&#1102; &#1086;&#1073;&#1098;&#1077;&#1082;&#1090;&#1086;&#1074; Image, Drawing &#1080; Visual | &#1053;&#1077;&#1086;&#1092;&#1080;&#1094;&#1080;&#1072;&#1083;&#1100;&#1085;&#1072;&#1103; &#1076;&#1086;&#1082;&#1091;&#1084;&#1077;&#1085;&#1090;&#1072;&#1094;&#1080;&#1103; .NET </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="&#1056;&#1080;&#1089;&#1086;&#1074;&#1072;&#1085;&#1080;&#1077; &#1089; &#1087;&#1086;&#1084;&#1086;&#1097;&#1100;&#1102; &#1086;&#1073;&#1098;&#1077;&#1082;&#1090;&#1086;&#1074; Image, Drawing &#1080; Visual | &#1053;&#1077;&#1086;&#1092;&#1080;&#1094;&#1080;&#1072;&#1083;&#1100;&#1085;&#1072;&#1103; &#1076;&#1086;&#1082;&#1091;&#1084;&#1077;&#1085;&#1090;&#1072;&#1094;&#1080;&#1103; .NET ">
    <meta name="generator" content="docfx 2.40.12.0">
    
    <link rel="shortcut icon" href="../../../favicon.ico">
    <link rel="stylesheet" href="../../../styles/docfx.vendor.css">
    <link rel="stylesheet" href="../../../styles/docfx.css">
    <link rel="stylesheet" href="../../../styles/main.css">
    <meta property="docfx:navrel" content="../../../toc.html">
    <meta property="docfx:tocrel" content="toc.html">
    
    
    
  </head>
  <body data-spy="scroll" data-target="#affix" data-offset="120">
    <div id="wrapper">
      <header>
        
        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              
              <a class="navbar-brand" href="../../../index.html">
                <img id="logo" class="svg" src="../../../logo.svg" alt="">
              </a>
            </div>
            <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="search">
                <div class="form-group">
                  <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                </div>
              </form>
            </div>
          </div>
        </nav>
        
        <div class="subnav navbar navbar-default">
          <div class="container hide-when-search" id="breadcrumb">
            <ul class="breadcrumb">
              <li></li>
            </ul>
          </div>
        </div>
      </header>
      <div role="main" class="container body-content hide-when-search">
        
        <div class="sidenav hide-when-search">
          <a class="btn toc-toggle collapse" data-toggle="collapse" href="#sidetoggle" aria-expanded="false" aria-controls="sidetoggle">Show / Hide Table of Contents</a>
          <div class="sidetoggle collapse" id="sidetoggle">
            <div id="sidetoc"></div>
          </div>
        </div>
        <div class="article row grid-right">
          <div class="col-md-10">
            <article class="content wrap" id="_content" data-uid="">
<h1 id="painting-with-images-drawings-and-visuals">Рисование с помощью объектов Image, Drawing и Visual</h1>

<p>В этом разделе описывается использование <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.imagebrush">ImageBrush</a>, <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.drawingbrush">DrawingBrush</a>, и <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.visualbrush">VisualBrush</a> объекты Заливка области с изображением, <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.drawing">Drawing</a>, или <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.visual">Visual</a>.</p>
<p><a name="prereqs"></a></p>
<h2 id="prerequisites">Предварительные требования</h2>
<p>Для понимания этого раздела необходимо ознакомиться с различными типами кистей, имеющихся в Windows Presentation Foundation (WPF), и их основными возможностями. Общие сведения см. в разделе <a href="wpf-brushes-overview.html">Общие сведения о кистях WPF</a>.</p>
<p><a name="image"></a></p>
<h2 id="paint-an-area-with-an-image">Закрашивание области с помощью Image</h2>
<p><a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.imagebrush">ImageBrush</a> Закрашивает область с <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.imagesource">ImageSource</a>. Это наиболее распространенный тип <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.imagesource">ImageSource</a> для использования с <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.imagebrush">ImageBrush</a> является <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.imaging.bitmapimage">BitmapImage</a>, которая описывает растрового изображения. Можно использовать <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.drawingimage">DrawingImage</a> для заполнения с помощью <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.drawing">Drawing</a> , но проще использовать <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.drawingbrush">DrawingBrush</a> вместо этого. Дополнительные сведения о <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.imagesource">ImageSource</a> объектов, см. в разделе <a href="imaging-overview.html">Обзор работы с образами</a>.</p>
<p>Для заполнения с помощью <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.imagebrush">ImageBrush</a>, создание <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.imaging.bitmapimage">BitmapImage</a> и используйте его для загрузки содержимого точечного рисунка. Затем с помощью <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.imaging.bitmapimage">BitmapImage</a> присвоить <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.imagebrush.imagesource">ImageSource</a> свойство <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.imagebrush">ImageBrush</a>. Наконец, примените <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.imagebrush">ImageBrush</a> на объект, который нужно нарисовать.  В Язык XAML, можно просто задать <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.imagebrush.imagesource">ImageSource</a> свойство <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.imagebrush">ImageBrush</a> на путь к загружаемому изображению.</p>
<p>Как и все <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.brush">Brush</a> объектов, <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.imagebrush">ImageBrush</a> может использоваться для рисования объектов, таких как фигуры, панели, элементы управления и текст. На следующем рисунке показан некоторые эффекты, которые могут быть обеспечены <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.imagebrush">ImageBrush</a>.</p>
<p><img src="media/wcpsdk-mmgraphics-imagebrushexamples.gif" alt="Примеры вывода ImageBrush" title="wcpsdk_mmgraphics_imagebrushexamples"><br>
Объекты, заполненные при помощи ImageBrush</p>
<p>По умолчанию <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.imagebrush">ImageBrush</a> растягивает изображения до полного заполнения области закрашиваемой, возможно искажение изображения, если область рисования имеет другие пропорции изображения. Это поведение можно изменить, изменив <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.tilebrush.stretch">Stretch</a> свойство со значения по умолчанию <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.stretch#System_Windows_Media_Stretch_Fill">Fill</a> для <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.stretch#System_Windows_Media_Stretch_None">None</a>, <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.stretch#System_Windows_Media_Stretch_Uniform">Uniform</a>, или <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.stretch#System_Windows_Media_Stretch_UniformToFill">UniformToFill</a>. Так как <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.imagebrush">ImageBrush</a> — это разновидность <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.tilebrush">TileBrush</a>, можно указать точно в том случае, как кисть изображения заполняет область вывода и даже создать шаблоны. Дополнительные сведения о дополнительных <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.tilebrush">TileBrush</a> функции, см. в разделе <a href="tilebrush-overview.html">Общие сведения о TileBrush</a>.</p>
<p><a name="fillingpanelwithimage"></a></p>
<h2 id="example-paint-an-object-with-a-bitmap-image">Пример Заполнение объекта с растровым изображением</h2>
<p>В следующем примере используется <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.imagebrush">ImageBrush</a> для закрашивания <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.controls.panel.background">Background</a> из <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.controls.canvas">Canvas</a>.</p>
<pre><code class="lang-xaml" name="BrushOverviewExamples_snip#GraphicsMMImageBrushAsCanvasBackgroundExampleWholePage">&lt;Page
  xmlns=&quot;http://schemas.microsoft.com/winfx/2006/xaml/presentation&quot;
  xmlns:x=&quot;http://schemas.microsoft.com/winfx/2006/xaml&quot;
  x:Class=&quot;Microsoft.Samples.BrushExamples.ImageBrushExample&quot;
  WindowTitle=&quot;ImageBrush Example&quot;
  Background=&quot;White&quot;&gt;

  &lt;StackPanel&gt;

    &lt;Canvas
      Height=&quot;200&quot; Width=&quot;300&quot;&gt;
      &lt;Canvas.Background&gt;
        &lt;ImageBrush ImageSource=&quot;sampleImages\Waterlilies.jpg&quot; /&gt;
      &lt;/Canvas.Background&gt;
    &lt;/Canvas&gt;

    
  &lt;/StackPanel&gt;
&lt;/Page&gt;
</code></pre><pre><code class="lang-csharp" name="BrushOverviewExamples_procedural_snip#GraphicsMMImageBrushAsCanvasBackgroundExampleWholePage">using System;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Media;
using System.Windows.Media.Imaging;

namespace Microsoft.Samples.BrushExamples
{

    public class ImageBrushExample : Page
    {

        public ImageBrushExample()
        {

            StackPanel mainPanel = new StackPanel();
            canvasBackgroundExample(mainPanel);
            this.Content = mainPanel;
        }

        private void canvasBackgroundExample(Panel mainPanel)
        {

            BitmapImage theImage = new BitmapImage
                (new Uri(&quot;sampleImages\\Waterlilies.jpg&quot;, UriKind.Relative));

            ImageBrush myImageBrush = new ImageBrush(theImage);

            Canvas myCanvas = new Canvas();
            myCanvas.Width = 300;
            myCanvas.Height = 200;
            myCanvas.Background = myImageBrush;

            mainPanel.Children.Add(myCanvas);
        }
    }
}
</code></pre><div class="WARNING">
<h5>Warning</h5>
<p>It looks like the sample you are looking for does not exist.</p>
</div>
<p><a name="drawingbrushintro"></a></p>
<h2 id="paint-an-area-with-a-drawing">Закрашивание области с помощью Drawing</h2>
<p>Объект <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.drawingbrush">DrawingBrush</a> позволяет закрасить область фигуры, текст, изображения и видео. Фигуры внутри закрашивающей кисти сами могут быть закрашены сплошным цветом, градиент, изображения, или даже другим <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.drawingbrush">DrawingBrush</a>. На следующем рисунке показано несколько способов использования <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.drawingbrush">DrawingBrush</a>.</p>
<p><img src="media/wcpsdk-mmgraphics-drawingbrushexamples.png" alt="Примеры вывода DrawingBrush" title="wcpsdk_mmgraphics_drawingbrushexamples"><br>
Объекты, заполненные при помощи DrawingBrush</p>
<p>Объект <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.drawingbrush">DrawingBrush</a> закрашивает область с <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.drawing">Drawing</a> объекта. Объект <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.drawing">Drawing</a> объект описывает отображаемое содержимое, например фигуру, растровое изображение, видео или строку текста. Различные типы рисунков описывают различные типы содержимого. Ниже приведен список различных типов объектов-рисунков.</p>
<ul>
<li><p><a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.geometrydrawing">GeometryDrawing</a> — Выводит фигуру.</p>
</li>
<li><p><a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.imagedrawing">ImageDrawing</a> — Выводит изображение.</p>
</li>
<li><p><a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.glyphrundrawing">GlyphRunDrawing</a> — Выводит текст.</p>
</li>
<li><p><a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.videodrawing">VideoDrawing</a> — Воспроизводит аудио-или видео.</p>
</li>
<li><p><a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.drawinggroup">DrawingGroup</a> — Выводит другие рисунки. Для объединения рисунков в один составной используйте группирование рисунков.</p>
</li>
</ul>
<p>Дополнительные сведения о <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.drawing">Drawing</a> объектов, см. в разделе <a href="drawing-objects-overview.html">Обзор объектов Drawing</a>.</p>
<p>Как и <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.imagebrush">ImageBrush</a>, <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.drawingbrush">DrawingBrush</a> растягивает его <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.drawingbrush.drawing">Drawing</a> для заполнения области вывода. Это поведение можно переопределить, изменив <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.tilebrush.stretch">Stretch</a> свойства из значения по умолчанию <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.stretch#System_Windows_Media_Stretch_Fill">Fill</a>. Дополнительные сведения см. в описании свойства <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.tilebrush.stretch">Stretch</a>.</p>
<p><a name="fillingareawithdrawingbrushexample"></a></p>
<h2 id="example-paint-an-object-with-a-drawing">Пример Заполнение объекта с помощью рисунка</h2>
<p>В следующем примере показано, как можно заполнить объект с помощью рисунка с изображением трех эллипсов. Объект <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.geometrydrawing">GeometryDrawing</a> используется для описания эллипсов.</p>
<pre><code class="lang-xaml" name="BrushOverviewExamples_snip#GraphicsMMDrawingBrushAsButtonBackgroundExample">&lt;Button Content=&quot;A Button&quot;&gt;
  &lt;Button.Background&gt;
    &lt;DrawingBrush&gt;
      &lt;DrawingBrush.Drawing&gt;
        &lt;GeometryDrawing Brush=&quot;LightBlue&quot;&gt;
          &lt;GeometryDrawing.Geometry&gt;
            &lt;GeometryGroup&gt;
              &lt;EllipseGeometry RadiusX=&quot;12.5&quot; RadiusY=&quot;25&quot; Center=&quot;25,50&quot; /&gt;
              &lt;EllipseGeometry RadiusX=&quot;12.5&quot; RadiusY=&quot;25&quot; Center=&quot;50,50&quot; /&gt;
              &lt;EllipseGeometry RadiusX=&quot;12.5&quot; RadiusY=&quot;25&quot; Center=&quot;75,50&quot; /&gt;
            &lt;/GeometryGroup&gt;
          &lt;/GeometryDrawing.Geometry&gt;
          &lt;GeometryDrawing.Pen&gt;
            &lt;Pen Thickness=&quot;1&quot; Brush=&quot;Gray&quot; /&gt;
          &lt;/GeometryDrawing.Pen&gt;
        &lt;/GeometryDrawing&gt;
      &lt;/DrawingBrush.Drawing&gt;
    &lt;/DrawingBrush&gt;
  &lt;/Button.Background&gt;
&lt;/Button&gt;
</code></pre><pre><code class="lang-csharp" name="BrushOverviewExamples_procedural_snip#GraphicsMMDrawingBrushAsButtonBackgroundExample1">// Create a DrawingBrush.
DrawingBrush myDrawingBrush = new DrawingBrush();

// Create a drawing.
GeometryDrawing myGeometryDrawing = new GeometryDrawing();
myGeometryDrawing.Brush = Brushes.LightBlue;
myGeometryDrawing.Pen = new Pen(Brushes.Gray, 1);
GeometryGroup ellipses = new GeometryGroup();
ellipses.Children.Add(new EllipseGeometry(new Point(25,50), 12.5, 25));
ellipses.Children.Add(new EllipseGeometry(new Point(50,50), 12.5, 25));
ellipses.Children.Add(new EllipseGeometry(new Point(75,50), 12.5, 25));

myGeometryDrawing.Geometry = ellipses;
myDrawingBrush.Drawing = myGeometryDrawing;

Button myButton = new Button();
myButton.Content = &quot;A Button&quot;;

// Use the DrawingBrush to paint the button's background.
myButton.Background = myDrawingBrush;
</code></pre><div class="WARNING">
<h5>Warning</h5>
<p>It looks like the sample you are looking for does not exist.</p>
</div>
<p><a name="visualbrushsection"></a></p>
<h2 id="paint-an-area-with-a-visual">Закрашивание области с помощью Visual</h2>
<p>Наиболее гибкая и мощная из всех кистей, <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.visualbrush">VisualBrush</a> закрашивает область с <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.visual">Visual</a>. Объект <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.visual">Visual</a> является низкоуровневым графическим типом, который служит в качестве предка для многих полезных графических компонентов. Например <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.window">Window</a>, <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.frameworkelement">FrameworkElement</a>, и <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.controls.control">Control</a> классы представляют собой различные типы <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.visual">Visual</a> объектов. С помощью <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.visualbrush">VisualBrush</a>, им можно рисовать заполнить область практически любым Windows Presentation Foundation (WPF) графического объекта.</p>
<div class="NOTE">
<h5>Note</h5>
<p>Несмотря на то что <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.visualbrush">VisualBrush</a> — это разновидность <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.freezable">Freezable</a> объекта, он не может быть заморожен (доступным только для чтения) при его <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.visualbrush.visual">Visual</a> свойству присвоено значение, отличное от <code>null</code>.</p>
</div>
<p>Существует два способа задания <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.visualbrush.visual">Visual</a> содержимое <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.visualbrush">VisualBrush</a>.</p>
<ul>
<li><p>Создайте новый <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.visual">Visual</a> и использовать его для задания <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.visualbrush.visual">Visual</a> свойство <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.visualbrush">VisualBrush</a>. Например, см. в разделе <a href="#examplevisualbrush1">пример: Заполнение объекта с помощью Visual</a> в следующем разделе.</p>
</li>
<li><p>Использовать существующее <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.visual">Visual</a>, который создает дубликат изображения целевого объекта <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.visual">Visual</a>. Затем можно использовать <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.visualbrush">VisualBrush</a> для создания интересных эффектов, например отражения и увеличения. Например, см. в разделе <a href="#examplevisualbrush2">пример: Создание отражения</a> раздел.</p>
</li>
</ul>
<p>При определении нового <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.visualbrush.visual">Visual</a> для <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.visualbrush">VisualBrush</a> и что <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.visual">Visual</a> — <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.uielement">UIElement</a> (например, панель или элемент управления), система разметки выполняется <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.uielement">UIElement</a> и его дочерних элементов при <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.visualbrush.autolayoutcontent">AutoLayoutContent</a> свойству <code>true</code>. Однако корневой <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.uielement">UIElement</a> фактически изолирован от остальной части системы: стили и внешний макет не могут перейти эту границу. Таким образом, следует явно указать размер корневого <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.uielement">UIElement</a>, так как его единственным родительским объектом является <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.visualbrush">VisualBrush</a> и таким образом его размер не может автоматически подобран по заполняемой области. Дополнительные сведения о макете в Windows Presentation Foundation (WPF) см. в разделе <a href="../advanced/layout.html">Макет</a>.</p>
<p>Как и <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.imagebrush">ImageBrush</a> и <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.drawingbrush">DrawingBrush</a>, <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.visualbrush">VisualBrush</a> растягивает свое содержимое до заполнения области вывода. Это поведение можно переопределить, изменив <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.tilebrush.stretch">Stretch</a> свойства из значения по умолчанию <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.stretch#System_Windows_Media_Stretch_Fill">Fill</a>. Дополнительные сведения см. в описании свойства <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.tilebrush.stretch">Stretch</a>.</p>
<p><a name="examplevisualbrush1"></a></p>
<h2 id="example-paint-an-object-with-a-visual">Пример Заполнение объекта с помощью Visual</h2>
<p>В следующем примере несколько элементов управления и панель используются для заполнения прямоугольника.</p>
<pre><code class="lang-xaml" name="BrushOverviewExamples_snip#GraphicsMMVisualBrushAsRectangleBackgroundExample">&lt;Rectangle Width=&quot;150&quot; Height=&quot;150&quot; Stroke=&quot;Black&quot; Margin=&quot;5,0,5,0&quot;&gt;
  &lt;Rectangle.Fill&gt;
    &lt;VisualBrush&gt;
      &lt;VisualBrush.Visual&gt;
        &lt;StackPanel Background=&quot;White&quot;&gt;
          &lt;Rectangle Width=&quot;25&quot; Height=&quot;25&quot; Fill=&quot;Red&quot; Margin=&quot;2&quot; /&gt;
          &lt;TextBlock FontSize=&quot;10pt&quot; Margin=&quot;2&quot;&gt;Hello, World!&lt;/TextBlock&gt;
          &lt;Button Margin=&quot;2&quot;&gt;A Button&lt;/Button&gt;
        &lt;/StackPanel&gt;
      &lt;/VisualBrush.Visual&gt;
    &lt;/VisualBrush&gt;
  &lt;/Rectangle.Fill&gt;
&lt;/Rectangle&gt;
</code></pre><pre><code class="lang-csharp" name="BrushOverviewExamples_procedural_snip#GraphicsMMVisualBrushAsRectangleBackgroundExample1">VisualBrush myVisualBrush = new VisualBrush();

// Create the visual brush's contents.
StackPanel myStackPanel = new StackPanel();
myStackPanel.Background = Brushes.White;

Rectangle redRectangle = new Rectangle();
redRectangle.Width = 25;
redRectangle.Height =25;
redRectangle.Fill = Brushes.Red;
redRectangle.Margin = new Thickness(2);
myStackPanel.Children.Add(redRectangle);

TextBlock someText = new TextBlock();
FontSizeConverter myFontSizeConverter = new FontSizeConverter();
someText.FontSize = (double)myFontSizeConverter.ConvertFrom(&quot;10pt&quot;);
someText.Text = &quot;Hello, World!&quot;;
someText.Margin = new Thickness(2);
myStackPanel.Children.Add(someText);

Button aButton = new Button();
aButton.Content = &quot;A Button&quot;;
aButton.Margin = new Thickness(2);
myStackPanel.Children.Add(aButton);

// Use myStackPanel as myVisualBrush's content.
myVisualBrush.Visual = myStackPanel;

// Create a rectangle to paint.
Rectangle myRectangle = new Rectangle();
myRectangle.Width = 150;
myRectangle.Height = 150;
myRectangle.Stroke = Brushes.Black;
myRectangle.Margin = new Thickness(5,0,5,0);

// Use myVisualBrush to paint myRectangle.
myRectangle.Fill = myVisualBrush;

</code></pre><div class="WARNING">
<h5>Warning</h5>
<p>It looks like the sample you are looking for does not exist.</p>
</div>
<p><a name="examplevisualbrush2"></a></p>
<h2 id="example-create-a-reflection">Пример Создание отражения</h2>
<p>В предыдущем примере показано, как создать новый <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.visual">Visual</a> для использования в качестве фона. Можно также использовать <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.visualbrush">VisualBrush</a> для отображения существующего визуального; эта возможность позволяет создавать интересные визуальные эффекты, например отражения и увеличения. В следующем примере используется <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.visualbrush">VisualBrush</a> для создания отражения <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.controls.border">Border</a> , содержащего несколько элементов. На следующей иллюстрации показан результат выполнения этого примера.</p>
<p><img src="media/graphicsmm-visualbrush-reflection-small.jpg" alt="Объект отражены визуальный объект" title="graphicsmm_visualbrush_reflection_small"><br>
Отраженный объект Visual</p>
<pre><code class="lang-csharp" name="visualbrush_markup_snip#GraphicsMMVisualBrushReflectionExampleWholePage">using System;
using System.Windows;
using System.Windows.Data;
using System.Windows.Controls;
using System.Windows.Media;
using System.Windows.Media.Effects;
using System.Windows.Media.Imaging;
using System.IO;
using System.Collections.ObjectModel;
using System.Windows.Shapes;
namespace SDKSample
{
    public partial class ReflectionExample : Page
    {
        public ReflectionExample()
        {
            // Create a name scope for the page.
            NameScope.SetNameScope(this, new NameScope());

            this.Background = Brushes.Black;
            StackPanel myStackPanel = new StackPanel();
            myStackPanel.Margin = new Thickness(50);

            Border myReflectedBorder = new Border();
            this.RegisterName(&quot;ReflectedVisual&quot;, myReflectedBorder);

            // Create a gradient background for the border.
            GradientStop firstStop = new GradientStop();
            firstStop.Offset = 0.0;
            Color firstStopColor = new Color();
            firstStopColor.R = 204;
            firstStopColor.G = 204;
            firstStopColor.B = 255;
            firstStopColor.A = 255;
            firstStop.Color = firstStopColor;
            GradientStop secondStop = new GradientStop();
            secondStop.Offset = 1.0;
            secondStop.Color = Colors.White;

            GradientStopCollection myGradientStopCollection = new GradientStopCollection();
            myGradientStopCollection.Add(firstStop);
            myGradientStopCollection.Add(secondStop);

            LinearGradientBrush myLinearGradientBrush = new LinearGradientBrush();
            myLinearGradientBrush.StartPoint = new Point(0, 0.5);
            myLinearGradientBrush.EndPoint = new Point(1, 0.5);
            myLinearGradientBrush.GradientStops = myGradientStopCollection;

            myReflectedBorder.Background = myLinearGradientBrush;

            // Add contents to the border.
            StackPanel borderStackPanel = new StackPanel();
            borderStackPanel.Orientation = Orientation.Horizontal;
            borderStackPanel.Margin = new Thickness(10);

            TextBlock myTextBlock = new TextBlock();
            myTextBlock.TextWrapping = TextWrapping.Wrap;
            myTextBlock.Width = 200;
            myTextBlock.Text = &quot;Lorem ipsum dolor sit amet, consectetuer adipiscing elit.&quot; +
                               &quot; Suspendisse vel ante. Donec luctus tortor sit amet est.&quot; +
                               &quot; Nullam pulvinar odio et wisi.&quot; +
                               &quot; Pellentesque quis magna. Sed pellentesque.&quot; +
                               &quot; Nulla euismod.&quot; +
                               &quot;Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas.&quot;;

            borderStackPanel.Children.Add(myTextBlock);

            StackPanel ellipseStackPanel = new StackPanel();

            Ellipse ellipse1 = new Ellipse();
            ellipse1.Margin = new Thickness(10);
            ellipse1.Height = 50;
            ellipse1.Width = 50;
            ellipse1.Fill = Brushes.Black;
            ellipseStackPanel.Children.Add(ellipse1);
            Ellipse ellipse2 = new Ellipse();
            ellipse2.Margin = new Thickness(10);
            ellipse2.Height = 50;
            ellipse2.Width = 50;
            ellipse2.Fill = Brushes.Black;
            ellipseStackPanel.Children.Add(ellipse2);
            Ellipse ellipse3 = new Ellipse();
            ellipse3.Margin = new Thickness(10);
            ellipse3.Height = 50;
            ellipse3.Width = 50;
            ellipse3.Fill = Brushes.Black;
            ellipseStackPanel.Children.Add(ellipse3);
            borderStackPanel.Children.Add(ellipseStackPanel);

            myReflectedBorder.Child = borderStackPanel;

            // Create divider rectangle
            Rectangle dividerRectangle = new Rectangle();
            dividerRectangle.Height = 1;
            dividerRectangle.Fill = Brushes.Gray;
            dividerRectangle.HorizontalAlignment = HorizontalAlignment.Stretch;

            // Create the object to contain the reflection.
            Rectangle reflectionRectangle = new Rectangle();

            // Bind the height of the rectangle to the border height.
            Binding heightBinding = new Binding();
            heightBinding.ElementName = &quot;ReflectedVisual&quot;;
            heightBinding.Path = new PropertyPath(Rectangle.HeightProperty);
            BindingOperations.SetBinding(reflectionRectangle, Rectangle.HeightProperty, heightBinding);

            // Bind the width of the rectangle to the border width.
            Binding widthBinding = new Binding();
            widthBinding.ElementName = &quot;ReflectedVisual&quot;;
            widthBinding.Path = new PropertyPath(Rectangle.WidthProperty);
            BindingOperations.SetBinding(reflectionRectangle, Rectangle.WidthProperty, widthBinding);

            // Creates the reflection.
            VisualBrush myVisualBrush = new VisualBrush();
            myVisualBrush.Opacity = 0.75;
            myVisualBrush.Stretch = Stretch.None;
            Binding reflectionBinding = new Binding();
            reflectionBinding.ElementName = &quot;ReflectedVisual&quot;;
            BindingOperations.SetBinding(myVisualBrush, VisualBrush.VisualProperty, reflectionBinding);

            ScaleTransform myScaleTransform = new ScaleTransform();
            myScaleTransform.ScaleX = 1;
            myScaleTransform.ScaleY = -1;
            TranslateTransform myTranslateTransform = new TranslateTransform();
            myTranslateTransform.Y = 1;

            TransformGroup myTransformGroup = new TransformGroup();
            myTransformGroup.Children.Add(myScaleTransform);
            myTransformGroup.Children.Add(myTranslateTransform);

            myVisualBrush.RelativeTransform = myTransformGroup;

            reflectionRectangle.Fill = myVisualBrush;

            // Create a gradient background for the border.
            GradientStop firstStop2 = new GradientStop();
            firstStop2.Offset = 0.0;
            Color c1 = new Color();
            c1.R = 0;
            c1.G = 0;
            c1.B = 0;
            c1.A = 255;
            firstStop2.Color = c1;
            GradientStop secondStop2 = new GradientStop();
            secondStop2.Offset = 0.5;
            Color c2 = new Color();
            c2.R = 0;
            c2.G = 0;
            c2.B = 0;
            c2.A = 51;
            firstStop2.Color = c2;
            GradientStop thirdStop = new GradientStop();
            thirdStop.Offset = 0.75;
            Color c3 = new Color();
            c3.R = 0;
            c3.G = 0;
            c3.B = 0;
            c3.A = 0;
            thirdStop.Color = c3;

            GradientStopCollection myGradientStopCollection2 = new GradientStopCollection();
            myGradientStopCollection2.Add(firstStop2);
            myGradientStopCollection2.Add(secondStop2);
            myGradientStopCollection2.Add(thirdStop);

            LinearGradientBrush myLinearGradientBrush2 = new LinearGradientBrush();
            myLinearGradientBrush2.StartPoint = new Point(0.5, 0);
            myLinearGradientBrush2.EndPoint = new Point(0.5, 1);
            myLinearGradientBrush2.GradientStops = myGradientStopCollection2;

            reflectionRectangle.OpacityMask = myLinearGradientBrush2;

            BlurBitmapEffect myBlurBitmapEffect = new BlurBitmapEffect();
            myBlurBitmapEffect.Radius = 1.5;

            reflectionRectangle.BitmapEffect = myBlurBitmapEffect;

            myStackPanel.Children.Add(myReflectedBorder);
            myStackPanel.Children.Add(dividerRectangle);
            myStackPanel.Children.Add(reflectionRectangle);
            this.Content = myStackPanel;
        }
        /*
    &lt;Rectangle
      Height=&quot;{Binding Path=ActualHeight, ElementName=ReflectedVisual}&quot;
      Width=&quot;{Binding Path=ActualWidth, ElementName=ReflectedVisual}&quot;&gt;

      &lt;Rectangle.OpacityMask&gt;
        &lt;LinearGradientBrush StartPoint=&quot;0.5,0&quot; EndPoint=&quot;0.5,1&quot;&gt;
          &lt;GradientStop Color=&quot;#FF000000&quot; Offset=&quot;0.0&quot; /&gt;
          &lt;GradientStop Color=&quot;#33000000&quot; Offset=&quot;0.5&quot; /&gt;
          &lt;GradientStop Color=&quot;#00000000&quot; Offset=&quot;0.75&quot; /&gt;
        &lt;/LinearGradientBrush&gt;
      &lt;/Rectangle.OpacityMask&gt;

      &lt;Rectangle.BitmapEffect&gt;
        &lt;BlurBitmapEffect Radius=&quot;1.5&quot; /&gt;
      &lt;/Rectangle.BitmapEffect&gt;

    &lt;/Rectangle&gt;
  &lt;/StackPanel&gt;
&lt;/Page&gt;

*/
    }
}
</code></pre><div class="WARNING">
<h5>Warning</h5>
<p>It looks like the sample you are looking for does not exist.</p>
</div><pre><code class="lang-xaml" name="visualbrush_markup_snip#GraphicsMMVisualBrushReflectionExampleWholePage">&lt;Page  
  xmlns=&quot;http://schemas.microsoft.com/winfx/2006/xaml/presentation&quot; 
  xmlns:x=&quot;http://schemas.microsoft.com/winfx/2006/xaml&quot; 
  Background=&quot;Black&quot;&gt;


  &lt;StackPanel Margin=&quot;50&quot;&gt;

    &lt;!-- The object to reflect. --&gt;
    &lt;Border Name=&quot;ReflectedVisual&quot; Width=&quot;400&quot;&gt;
      &lt;Border.Background&gt;
        &lt;LinearGradientBrush StartPoint=&quot;0,0.5&quot; EndPoint=&quot;1,0.5&quot;&gt;
          &lt;GradientStop Offset=&quot;0.0&quot; Color=&quot;#CCCCFF&quot; /&gt;
          &lt;GradientStop Offset=&quot;1.0&quot; Color=&quot;White&quot; /&gt;
        &lt;/LinearGradientBrush&gt;
      &lt;/Border.Background&gt;
      &lt;StackPanel Orientation=&quot;Horizontal&quot; Margin=&quot;10&quot;&gt;        
        &lt;TextBlock TextWrapping=&quot;Wrap&quot; Width=&quot;200&quot; Margin=&quot;10&quot;&gt;
          Lorem ipsum dolor sit amet, consectetuer adipiscing elit.
          Suspendisse vel ante. Donec luctus tortor sit amet est.
          Nullam pulvinar odio et wisi.
          Pellentesque quis magna. Sed pellentesque.
          Nulla euismod.
          Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas.
        &lt;/TextBlock&gt;
        &lt;StackPanel&gt;
          &lt;Ellipse Margin=&quot;10&quot; Height=&quot;50&quot; Width=&quot;50&quot; Fill=&quot;Black&quot; /&gt;
          &lt;Ellipse Margin=&quot;10&quot; Height=&quot;50&quot; Width=&quot;50&quot; Fill=&quot;Black&quot; /&gt;
          &lt;Ellipse Margin=&quot;10&quot; Height=&quot;50&quot; Width=&quot;50&quot; Fill=&quot;Black&quot; /&gt;
        &lt;/StackPanel&gt;
      &lt;/StackPanel&gt;
    &lt;/Border&gt;

    &lt;Rectangle Height=&quot;1&quot; Fill=&quot;Gray&quot; HorizontalAlignment=&quot;Stretch&quot; /&gt;

    &lt;!-- The object to contain the reflection.--&gt;
    &lt;Rectangle 
      Height=&quot;{Binding Path=ActualHeight, ElementName=ReflectedVisual}&quot; 
      Width=&quot;{Binding Path=ActualWidth, ElementName=ReflectedVisual}&quot;&gt;
      &lt;Rectangle.Fill&gt;

        &lt;!-- Creates the reflection. --&gt;
        &lt;VisualBrush 
          Opacity=&quot;0.75&quot; Stretch=&quot;None&quot;
          Visual=&quot;{Binding ElementName=ReflectedVisual}&quot;&gt;
          &lt;VisualBrush.RelativeTransform&gt;

            &lt;!-- Flip the reflection. --&gt;
            &lt;TransformGroup&gt;
              &lt;ScaleTransform ScaleX=&quot;1&quot; ScaleY=&quot;-1&quot; /&gt;
              &lt;TranslateTransform  Y=&quot;1&quot; /&gt;
            &lt;/TransformGroup&gt;
          &lt;/VisualBrush.RelativeTransform&gt;
        &lt;/VisualBrush&gt;
      &lt;/Rectangle.Fill&gt;

      &lt;Rectangle.OpacityMask&gt;
        &lt;LinearGradientBrush StartPoint=&quot;0.5,0&quot; EndPoint=&quot;0.5,1&quot;&gt;
          &lt;GradientStop Color=&quot;#FF000000&quot; Offset=&quot;0.0&quot; /&gt;
          &lt;GradientStop Color=&quot;#33000000&quot; Offset=&quot;0.5&quot; /&gt;
          &lt;GradientStop Color=&quot;#00000000&quot; Offset=&quot;0.75&quot; /&gt;
        &lt;/LinearGradientBrush&gt;
      &lt;/Rectangle.OpacityMask&gt;

      &lt;Rectangle.BitmapEffect&gt;
        &lt;BlurBitmapEffect Radius=&quot;1.5&quot; /&gt;
      &lt;/Rectangle.BitmapEffect&gt;
      
    &lt;/Rectangle&gt;
  &lt;/StackPanel&gt;
&lt;/Page&gt;

</code></pre>
<p>Дополнительные примеры, демонстрирующие увеличение частей экрана и создание отражений, см. в разделе <a href="https://go.microsoft.com/fwlink/?LinkID=160049">Пример VisualBrush</a>.</p>
<p><a name="tilebrush"></a></p>
<h2 id="tilebrush-features">Функции TileBrush</h2>
<p><a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.imagebrush">ImageBrush</a>, <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.drawingbrush">DrawingBrush</a>, и <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.visualbrush">VisualBrush</a> типов <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.tilebrush">TileBrush</a> объектов. <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.tilebrush">TileBrush</a> объекты предоставляют высокую степень контроля над закрашивание области с изображения, рисунок или visual. Например, можно заполнить область не одним растянутым изображением, а элементами мозаики, которые образуют узор.</p>
<p>Объект <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.tilebrush">TileBrush</a> имеет три основных компонента: содержимое, плитки и область вывода.</p>
<p><img src="media/wcpsdk-mmgraphics-defaultcontentprojection2.png" alt="Компоненты TileBrush" title="wcpsdk_mmgraphics_defaultcontentprojection2"><br>
Компоненты TileBrush с одним элементом мозаики</p>
<p><img src="media/graphicsmm-tiledprojection.png" alt="Компоненты мозаичного TileBrush" title="graphicsmm_tiledprojection"><br>
Компоненты TileBrush с несколькими элементами мозаики</p>
<p>Дополнительные сведения о функциях мозаики из <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.tilebrush">TileBrush</a> объектов, см. в разделе <a href="tilebrush-overview.html">Общие сведения о TileBrush</a>.</p>
<h2 id="see-also">См. также</h2>
<ul>
<li><a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.imagebrush">ImageBrush</a></li>
<li><a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.drawingbrush">DrawingBrush</a></li>
<li><a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.visualbrush">VisualBrush</a></li>
<li><a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.tilebrush">TileBrush</a></li>
<li><a href="tilebrush-overview.html">Общие сведения о TileBrush</a></li>
<li><a href="wpf-brushes-overview.html">Общие сведения о кистях WPF</a></li>
<li><a href="imaging-overview.html">Общие сведения об обработке изображений</a></li>
<li><a href="drawing-objects-overview.html">Обзор объектов Drawing</a></li>
<li><a href="opacity-masks-overview.html">Общие сведения о масках непрозрачности</a></li>
<li><a href="wpf-graphics-rendering-overview.html">Общие сведения об отрисовке графики в WPF</a></li>
<li><a href="https://go.microsoft.com/fwlink/?LinkID=160005">Пример использования кистей</a></li>
<li><a href="https://go.microsoft.com/fwlink/?LinkID=160049">Пример использования VisualBrush</a></li>
</ul>
</article>
          </div>
          
          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">
              <div class="contribution">
                <ul class="nav">
                </ul>
              </div>
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
              <!-- <p><a class="back-to-top" href="#top">Back to top</a><p> -->
              </nav>
            </div>
          </div>
        </div>
      </div>
      
      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right">
              <a href="#top">Back to top</a>
            </span>
            <span><a href="https://github.com/MSDN-WhiteKnight/dotnet-docs-ru">Неофициальная документация по .NET на русском языке</a>. Лицензия: <a href="https://github.com/MSDN-WhiteKnight/dotnet-docs-ru/blob/main/LICENSE">CC-BY 4.0</a>. Основано на <a href="https://docs.microsoft.com/ru-ru/dotnet/">документации по .NET с Microsoft Docs</a><br>Generated by <strong>DocFX</strong></span><script type="text/javascript">(function(m,e,t,r,i,k,a){m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};m[i].l=1*new Date();k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)})(window, document, "script", "https://mc.yandex.ru/metrika/tag.js", "ym");ym(65150713, "init", {clickmap:true,trackLinks:true,accurateTrackBounce:true});</script><noscript><div><img src="https://mc.yandex.ru/watch/65150713" style="position:absolute; left:-9999px;" alt=""></div></noscript>
            
          </div>
        </div>
      </footer>
    </div>
    
    <script type="text/javascript" src="../../../styles/docfx.vendor.js"></script>
    <script type="text/javascript" src="../../../styles/docfx.js"></script>
    <script type="text/javascript" src="../../../styles/main.js"></script>
  </body>
</html>
