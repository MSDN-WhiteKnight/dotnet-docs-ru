<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>&#1054;&#1073;&#1079;&#1086;&#1088; &#1086;&#1073;&#1098;&#1077;&#1082;&#1090;&#1086;&#1074; Drawing | &#1053;&#1077;&#1086;&#1092;&#1080;&#1094;&#1080;&#1072;&#1083;&#1100;&#1085;&#1072;&#1103; &#1076;&#1086;&#1082;&#1091;&#1084;&#1077;&#1085;&#1090;&#1072;&#1094;&#1080;&#1103; .NET </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="&#1054;&#1073;&#1079;&#1086;&#1088; &#1086;&#1073;&#1098;&#1077;&#1082;&#1090;&#1086;&#1074; Drawing | &#1053;&#1077;&#1086;&#1092;&#1080;&#1094;&#1080;&#1072;&#1083;&#1100;&#1085;&#1072;&#1103; &#1076;&#1086;&#1082;&#1091;&#1084;&#1077;&#1085;&#1090;&#1072;&#1094;&#1080;&#1103; .NET ">
    <meta name="generator" content="docfx 2.40.12.0">
    
    <link rel="shortcut icon" href="../../../favicon.ico">
    <link rel="stylesheet" href="../../../styles/docfx.vendor.css">
    <link rel="stylesheet" href="../../../styles/docfx.css">
    <link rel="stylesheet" href="../../../styles/main.css">
    <meta property="docfx:navrel" content="../../../toc.html">
    <meta property="docfx:tocrel" content="toc.html">
    
    
    
  </head>
  <body data-spy="scroll" data-target="#affix" data-offset="120">
    <div id="wrapper">
      <header>
        
        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              
              <a class="navbar-brand" href="../../../index.html">
                <img id="logo" class="svg" src="../../../logo.svg" alt="">
              </a>
            </div>
            <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="search">
                <div class="form-group">
                  <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                </div>
              </form>
            </div>
          </div>
        </nav>
        
        <div class="subnav navbar navbar-default">
          <div class="container hide-when-search" id="breadcrumb">
            <ul class="breadcrumb">
              <li></li>
            </ul>
          </div>
        </div>
      </header>
      <div role="main" class="container body-content hide-when-search">
        
        <div class="sidenav hide-when-search">
          <a class="btn toc-toggle collapse" data-toggle="collapse" href="#sidetoggle" aria-expanded="false" aria-controls="sidetoggle">Show / Hide Table of Contents</a>
          <div class="sidetoggle collapse" id="sidetoggle">
            <div id="sidetoc"></div>
          </div>
        </div>
        <div class="article row grid-right">
          <div class="col-md-10">
            <article class="content wrap" id="_content" data-uid="">
<h1 id="drawing-objects-overview">Обзор объектов Drawing</h1>

<p>В данном разделе представлены <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.drawing">Drawing</a> объектов и описывает их использование для эффективного рисования фигур, точечных рисунков, текста и мультимедиа. Используйте <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.drawing">Drawing</a> объектов при создании коллекции картинок, рисовании с помощью <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.drawingbrush">DrawingBrush</a>, или использовать <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.visual">Visual</a> объектов.</p>
<p><a name="whatisadrawingsection"></a></p>
<h2 id="what-is-a-drawing-object">Что такое объект-рисунок?</h2>
<p>Объект <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.drawing">Drawing</a> объект описывает отображаемое содержимое, например фигуру, растровое изображение, видео или строку текста. Различные типы рисунков описывают различные типы содержимого. Ниже приведен список различных типов объектов-рисунков.</p>
<ul>
<li><p><a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.geometrydrawing">GeometryDrawing</a> — Выводит фигуру.</p>
</li>
<li><p><a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.imagedrawing">ImageDrawing</a> — Выводит изображение.</p>
</li>
<li><p><a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.glyphrundrawing">GlyphRunDrawing</a> — Выводит текст.</p>
</li>
<li><p><a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.videodrawing">VideoDrawing</a> — Воспроизводит аудио-или видео.</p>
</li>
<li><p><a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.drawinggroup">DrawingGroup</a> — Выводит другие рисунки. Для объединения рисунков в один составной используйте группирование рисунков.</p>
</li>
</ul>
<p><a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.drawing">Drawing</a> объекты являются универсальными. Существует много способов, которые можно использовать <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.drawing">Drawing</a> объекта.</p>
<ul>
<li><p>Можно отобразить его как изображение с помощью <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.drawingimage">DrawingImage</a> и <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.controls.image">Image</a> элемента управления.</p>
</li>
<li><p>Вы можете использовать его с <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.drawingbrush">DrawingBrush</a> для рисования объекта, такие как <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.controls.page.background">Background</a> из <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.controls.page">Page</a>.</p>
</li>
<li><p>Его можно использовать для описания внешнего вида <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.drawingvisual">DrawingVisual</a>.</p>
</li>
<li><p>Его можно использовать для перечисления содержимого <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.visual">Visual</a>.</p>
</li>
</ul>
<p>WPF предоставляет другие типы объектов, которые поддерживают рисование фигур, растровых изображений, текста и мультимедиа. Например, можно также использовать <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.shapes.shape">Shape</a> объектов для рисования фигур и <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.controls.mediaelement">MediaElement</a> управления предоставляют еще один способ добавить видео в приложение. Поэтому когда следует использовать <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.drawing">Drawing</a> объектов? Когда можно пожертвовать возможностями уровня среды ради улучшения производительности или при необходимости <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.freezable">Freezable</a> функции. Так как <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.drawing">Drawing</a> объектов не поддерживают <a href="../advanced/layout.html">макета</a>, ввод и режим фокусировки, они обеспечивают выигрыш в производительности, делает их идеальными для описания фона, коллекций картинок и низкоуровневых рисунков с <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.visual">Visual</a> объектов.</p>
<p>Так как они представляют собой тип <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.freezable">Freezable</a> объекта, <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.drawing">Drawing</a> объекты получают некоторые специальные особенности, которые включают следующие: они могут объявляться как <a href="../advanced/xaml-resources.html">ресурсы</a>, общие для нескольких объектов, делать доступными только для чтения с целью повышения производительности, клонировать и делать потокобезопасными. Дополнительные сведения о различных возможностях, предоставляемых <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.freezable">Freezable</a> объектов, см. в разделе <a href="../advanced/freezable-objects-overview.html">Freezable Общие сведения об объектах</a>.</p>
<p><a name="drawinggeometriessection"></a></p>
<h2 id="draw-a-shape">Рисование фигуры</h2>
<p>Чтобы нарисовать фигуру, используйте <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.geometrydrawing">GeometryDrawing</a>. Прорисовки <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.geometrydrawing.geometry">Geometry</a> свойство описывает форму, его <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.geometrydrawing.brush">Brush</a> свойство описывает закрашивание внутренней части фигуры и его <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.geometrydrawing.pen">Pen</a> свойство описывает, как должно отображаться его контура.</p>
<p>В следующем примере используется <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.geometrydrawing">GeometryDrawing</a> для рисования фигуры. Фигура описывается <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.geometrygroup">GeometryGroup</a> и два <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.ellipsegeometry">EllipseGeometry</a> объектов. Фигуры закрашивается кистью <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.lineargradientbrush">LinearGradientBrush</a> и ее контур рисуется пером <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.brushes.black">Black</a> <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.pen">Pen</a>.</p>
<p>В этом примере создаются следующие <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.geometrydrawing">GeometryDrawing</a>.</p>
<p><img src="media/graphicsmm-geodraw.jpg" alt="GeometryDrawing двух эллипсов" title="graphicsmm_geodraw"><br>
Объект GeometryDrawing</p>
<pre><code class="lang-csharp" name="DrawingMiscSnippets_snip#GeometryDrawingExampleInline">//
// Create the Geometry to draw.
//
GeometryGroup ellipses = new GeometryGroup();
ellipses.Children.Add(
    new EllipseGeometry(new Point(50,50), 45, 20)
    );
ellipses.Children.Add(
    new EllipseGeometry(new Point(50, 50), 20, 45)
    );

//
// Create a GeometryDrawing.
//
GeometryDrawing aGeometryDrawing = new GeometryDrawing();
aGeometryDrawing.Geometry = ellipses;

// Paint the drawing with a gradient.
aGeometryDrawing.Brush =
    new LinearGradientBrush(
        Colors.Blue,
        Color.FromRgb(204,204,255),
        new Point(0,0),
        new Point(1,1));

// Outline the drawing with a solid color.
aGeometryDrawing.Pen = new Pen(Brushes.Black, 10);
</code></pre><pre><code class="lang-xaml" name="DrawingMiscSnippets_snip#GeometryDrawingExampleInline">&lt;GeometryDrawing&gt;
  &lt;GeometryDrawing.Geometry&gt;

    &lt;!-- Create a composite shape. --&gt;
    &lt;GeometryGroup&gt;
      &lt;EllipseGeometry Center=&quot;50,50&quot; RadiusX=&quot;45&quot; RadiusY=&quot;20&quot; /&gt;
      &lt;EllipseGeometry Center=&quot;50,50&quot; RadiusX=&quot;20&quot; RadiusY=&quot;45&quot; /&gt;
    &lt;/GeometryGroup&gt;
  &lt;/GeometryDrawing.Geometry&gt;
  &lt;GeometryDrawing.Brush&gt;

    &lt;!-- Paint the drawing with a gradient. --&gt;
    &lt;LinearGradientBrush&gt;
      &lt;GradientStop Offset=&quot;0.0&quot; Color=&quot;Blue&quot; /&gt;
      &lt;GradientStop Offset=&quot;1.0&quot; Color=&quot;#CCCCFF&quot; /&gt;
    &lt;/LinearGradientBrush&gt;
  &lt;/GeometryDrawing.Brush&gt;
  &lt;GeometryDrawing.Pen&gt;

    &lt;!-- Outline the drawing with a solid color. --&gt;
    &lt;Pen Thickness=&quot;10&quot; Brush=&quot;Black&quot; /&gt;
  &lt;/GeometryDrawing.Pen&gt;
&lt;/GeometryDrawing&gt;
</code></pre>
<p>Полный пример см. в разделе <a href="how-to-create-a-geometrydrawing.html">Создание GeometryDrawing</a>.</p>
<p>Другие <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.geometry">Geometry</a> классов, таких как <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.pathgeometry">PathGeometry</a> позволяют создавать более сложные фигуры, кривых и дуг. Дополнительные сведения о <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.geometry">Geometry</a> объектов, см. в разделе <a href="geometry-overview.html">Общие сведения о геометрии</a>.</p>
<p>Дополнительные сведения о других способах рисования фигур, которые не используют <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.drawing">Drawing</a> объектов, см. в разделе <a href="shapes-and-basic-drawing-in-wpf-overview.html">фигур и базовых средств рисования в WPF Обзор</a>.</p>
<p><a name="drawingimagessection"></a></p>
<h2 id="draw-an-image">Рисование изображения</h2>
<p>Для рисования изображения, следует использовать <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.imagedrawing">ImageDrawing</a>. <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.imagedrawing">ImageDrawing</a> Объекта <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.imagedrawing.imagesource">ImageSource</a> свойство описывает изображения для рисования и его <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.imagedrawing.rect">Rect</a> свойство определяет область, где рисуется изображение.</p>
<p>В следующем примере изображение рисуется в прямоугольнике, расположенном в точке (75,75) и имеющем размер 100 на 100 пикселей. На следующем рисунке показано <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.imagedrawing">ImageDrawing</a> созданный в примере. Серая рамка был добавлен, чтобы показать границы <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.imagedrawing">ImageDrawing</a>.</p>
<p><img src="media/graphicsmm-simple-imagedrawing-offset.png" alt="100 на 100 ImageDrawing размером (75,75)" title="graphicsmm_simple_imagedrawing_offset"><br>
ImageDrawing размером 100 на 100</p>
<pre><code class="lang-csharp" name="DrawingMiscSnippets_snip#ImageDrawing100by100Inline">// Create a 100 by 100 image with an upper-left point of (75,75).
ImageDrawing bigKiwi = new ImageDrawing();
bigKiwi.Rect = new Rect(75, 75, 100, 100);
bigKiwi.ImageSource = new BitmapImage(
    new Uri(@&quot;sampleImages\kiwi.png&quot;, UriKind.Relative));
</code></pre><pre><code class="lang-xaml" name="DrawingMiscSnippets_snip#ImageDrawing100by100Inline">&lt;!-- The Rect property specifies that the image only fill a 100 by 100
     rectangular area. --&gt;
&lt;ImageDrawing Rect=&quot;75,75,100,100&quot; ImageSource=&quot;sampleImages\kiwi.png&quot;/&gt;
</code></pre>
<p>Дополнительную информацию об изображениях см. в разделе <a href="imaging-overview.html">Общие сведения об изображениях</a>.</p>
<p><a name="playmedia"></a></p>
<h2 id="play-media-code-only">Воспроизведение мультимедиа (только код)</h2>
<div class="NOTE">
<h5>Note</h5>
<p>Несмотря на то, что можно объявить <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.videodrawing">VideoDrawing</a> в XAML, вы можете только загружать и воспроизводить соответствующие мультимедиа с помощью кода. Чтобы воспроизвести видео в XAML, используйте <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.controls.mediaelement">MediaElement</a> вместо этого.</p>
</div>
<p>Для воспроизведения аудио-или видео, используйте <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.videodrawing">VideoDrawing</a> и <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.mediaplayer">MediaPlayer</a>. Есть два способа загрузки и воспроизведения мультимедиа. Первый заключается в использовании <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.mediaplayer">MediaPlayer</a> и <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.videodrawing">VideoDrawing</a> , а второй способ состоит в создании собственных <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.mediatimeline">MediaTimeline</a> для использования с <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.mediaplayer">MediaPlayer</a> и <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.videodrawing">VideoDrawing</a>.</p>
<div class="NOTE">
<h5>Note</h5>
<p>При распространении мультимедиа с приложением, в отличие от изображений, файл мультимедиа нельзя использовать как ресурс проекта. Вместо этого в файле проекта необходимо выбрать тип мультимедиа <code>Content</code> и задать для <code>CopyToOutputDirectory</code> значение <code>PreserveNewest</code> или <code>Always</code>.</p>
</div>
<p>Для воспроизведения файлов мультимедиа без создания собственной <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.mediatimeline">MediaTimeline</a>, выполните следующие действия.</p>
<ol>
<li><p>Создание объекта <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.mediaplayer">MediaPlayer</a>.</p>
<pre><code class="lang-csharp" name="DrawingMiscSnippets_snip#VideoDrawingExampleInline1">MediaPlayer player = new MediaPlayer();
</code></pre></li>
<li><p>Используйте <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.mediaplayer.open">Open</a> метод для загрузки файла мультимедиа.</p>
<pre><code class="lang-csharp" name="DrawingMiscSnippets_snip#VideoDrawingExampleInline2">player.Open(new Uri(@&quot;sampleMedia\xbox.wmv&quot;, UriKind.Relative));
</code></pre></li>
<li><p>Создайте таблицу <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.videodrawing">VideoDrawing</a>.</p>
<pre><code class="lang-csharp" name="DrawingMiscSnippets_snip#VideoDrawingExampleInline3">VideoDrawing aVideoDrawing = new VideoDrawing();
</code></pre></li>
<li><p>Укажите размер и расположение для отображения мультимедиа, задав <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.videodrawing.rect">Rect</a> свойство <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.videodrawing">VideoDrawing</a>.</p>
<pre><code class="lang-csharp" name="DrawingMiscSnippets_snip#VideoDrawingExampleInline4">aVideoDrawing.Rect = new Rect(0, 0, 100, 100);
</code></pre></li>
<li><p>Задайте <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.videodrawing.player">Player</a> свойство <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.videodrawing">VideoDrawing</a> с <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.mediaplayer">MediaPlayer</a> был создан.</p>
<pre><code class="lang-csharp" name="DrawingMiscSnippets_snip#VideoDrawingExampleInline5">aVideoDrawing.Player = player;
</code></pre></li>
<li><p>Используйте <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.mediaplayer.play">Play</a> метод <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.mediaplayer">MediaPlayer</a> для начала воспроизведения мультимедиа.</p>
<pre><code class="lang-csharp" name="DrawingMiscSnippets_snip#VideoDrawingExampleInline6">// Play the video once.
player.Play();
</code></pre></li>
</ol>
<p>В следующем примере используется <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.videodrawing">VideoDrawing</a> и <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.mediaplayer">MediaPlayer</a> для однократного воспроизведения видеофайла.</p>
<pre><code class="lang-csharp" name="DrawingMiscSnippets_snip#VideoDrawingExampleInline">//
// Create a VideoDrawing.
//
MediaPlayer player = new MediaPlayer();

player.Open(new Uri(@&quot;sampleMedia\xbox.wmv&quot;, UriKind.Relative));

VideoDrawing aVideoDrawing = new VideoDrawing();

aVideoDrawing.Rect = new Rect(0, 0, 100, 100);

aVideoDrawing.Player = player;

// Play the video once.
player.Play();

</code></pre>
<p>Чтобы получить дополнительное управление временем для мультимедиа, используйте <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.mediatimeline">MediaTimeline</a> с <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.mediaplayer">MediaPlayer</a> и <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.videodrawing">VideoDrawing</a> объектов. <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.mediatimeline">MediaTimeline</a> Позволяет указать, следует ли повторять видео. Чтобы использовать <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.mediatimeline">MediaTimeline</a> с <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.videodrawing">VideoDrawing</a>, выполните следующие действия:</p>
<ol>
<li><p>Объявите <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.mediatimeline">MediaTimeline</a> и задайте ее временные характеристики.</p>
<pre><code class="lang-csharp" name="DrawingMiscSnippets_snip#RepeatingVideoDrawingExampleInline1">// Create a MediaTimeline.
MediaTimeline mTimeline =
    new MediaTimeline(new Uri(@&quot;sampleMedia\xbox.wmv&quot;, UriKind.Relative));

// Set the timeline to repeat.
mTimeline.RepeatBehavior = RepeatBehavior.Forever;
</code></pre></li>
<li><p>Создание <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.mediaclock">MediaClock</a> из <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.mediatimeline">MediaTimeline</a>.</p>
<pre><code class="lang-csharp" name="DrawingMiscSnippets_snip#RepeatingVideoDrawingExampleInline2">// Create a clock from the MediaTimeline.
MediaClock mClock = mTimeline.CreateClock();
</code></pre></li>
<li><p>Создание <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.mediaplayer">MediaPlayer</a> и использовать <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.mediaclock">MediaClock</a> присвоить его <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.mediaplayer.clock">Clock</a> свойство.</p>
<pre><code class="lang-csharp" name="DrawingMiscSnippets_snip#RepeatingVideoDrawingExampleInline3">MediaPlayer repeatingVideoDrawingPlayer = new MediaPlayer();
repeatingVideoDrawingPlayer.Clock = mClock;
</code></pre></li>
<li><p>Создание <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.videodrawing">VideoDrawing</a> и назначить <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.mediaplayer">MediaPlayer</a> для <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.videodrawing.player">Player</a> свойство <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.videodrawing">VideoDrawing</a>.</p>
<pre><code class="lang-csharp" name="DrawingMiscSnippets_snip#RepeatingVideoDrawingExampleInline4">VideoDrawing repeatingVideoDrawing = new VideoDrawing();
repeatingVideoDrawing.Rect = new Rect(150, 0, 100, 100);
repeatingVideoDrawing.Player = repeatingVideoDrawingPlayer;
</code></pre></li>
</ol>
<p>В следующем примере используется <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.mediatimeline">MediaTimeline</a> с <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.mediaplayer">MediaPlayer</a> и <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.videodrawing">VideoDrawing</a> для воспроизведения видео.</p>
<pre><code class="lang-csharp" name="DrawingMiscSnippets_snip#RepeatingVideoDrawingExampleInline">//
// Create a VideoDrawing that repeats.
//

// Create a MediaTimeline.
MediaTimeline mTimeline =
    new MediaTimeline(new Uri(@&quot;sampleMedia\xbox.wmv&quot;, UriKind.Relative));

// Set the timeline to repeat.
mTimeline.RepeatBehavior = RepeatBehavior.Forever;

// Create a clock from the MediaTimeline.
MediaClock mClock = mTimeline.CreateClock();

MediaPlayer repeatingVideoDrawingPlayer = new MediaPlayer();
repeatingVideoDrawingPlayer.Clock = mClock;

VideoDrawing repeatingVideoDrawing = new VideoDrawing();
repeatingVideoDrawing.Rect = new Rect(150, 0, 100, 100);
repeatingVideoDrawing.Player = repeatingVideoDrawingPlayer;
</code></pre>
<p>Обратите внимание, что при использовании <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.mediatimeline">MediaTimeline</a>, интерактивный <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.animation.clockcontroller">ClockController</a> возвращаемые <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.animation.clock.controller">Controller</a> свойство <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.mediaclock">MediaClock</a> для управления воспроизведением мультимедиа, а не интерактивные методы <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.mediaplayer">MediaPlayer</a>.</p>
<p><a name="drawtext"></a></p>
<h2 id="draw-text">Рисование текста</h2>
<p>Для рисования текста, следует использовать <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.glyphrundrawing">GlyphRunDrawing</a> и <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.glyphrun">GlyphRun</a>. В следующем примере используется <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.glyphrundrawing">GlyphRunDrawing</a> для рисования текста «Hello, World!».</p>
<pre><code class="lang-csharp" name="DrawingMiscSnippets_snip#GlyphRunDrawingExampleInline">GlyphRun theGlyphRun = new GlyphRun(
    new GlyphTypeface(new Uri(@&quot;C:\WINDOWS\Fonts\TIMES.TTF&quot;)),
    0,
    false,
    13.333333333333334,
    new ushort[]{43, 72, 79, 79, 82, 3, 58, 82, 85, 79, 71},
    new Point(0, 12.29),
    new double[]{
        9.62666666666667, 7.41333333333333, 2.96,
        2.96, 7.41333333333333, 3.70666666666667,
        12.5866666666667, 7.41333333333333,
        4.44, 2.96, 7.41333333333333},
    null,
    null,
    null,
    null,
    null,
    null

    );

GlyphRunDrawing gDrawing = new GlyphRunDrawing(Brushes.Black, theGlyphRun);
</code></pre><pre><code class="lang-xaml" name="DrawingMiscSnippets_snip#GlyphRunDrawingExampleInline">&lt;GlyphRunDrawing ForegroundBrush=&quot;Black&quot;&gt;
  &lt;GlyphRunDrawing.GlyphRun&gt;
    &lt;GlyphRun 
      CaretStops=&quot;{x:Null}&quot; 
      ClusterMap=&quot;{x:Null}&quot; 
      IsSideways=&quot;False&quot; 
      GlyphOffsets=&quot;{x:Null}&quot; 
      GlyphIndices=&quot;43 72 79 79 82 3 58 82 85 79 71&quot; 
      BaselineOrigin=&quot;0,12.29&quot;  
      FontRenderingEmSize=&quot;13.333333333333334&quot; 
      DeviceFontName=&quot;{x:Null}&quot; 
      AdvanceWidths=&quot;9.62666666666667 7.41333333333333 2.96 2.96 7.41333333333333 3.70666666666667 12.5866666666667 7.41333333333333 4.44 2.96 7.41333333333333&quot; 
      BidiLevel=&quot;0&quot;&gt;
      &lt;GlyphRun.GlyphTypeface&gt;
        &lt;GlyphTypeface FontUri=&quot;C:\WINDOWS\Fonts\TIMES.TTF&quot; /&gt;
      &lt;/GlyphRun.GlyphTypeface&gt;
    &lt;/GlyphRun&gt;
  &lt;/GlyphRunDrawing.GlyphRun&gt;
&lt;/GlyphRunDrawing&gt;
</code></pre>
<p>Объект <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.glyphrun">GlyphRun</a> — это низкоуровневый объект, предназначенный для использования с представления документов фиксированного формата и сценариев печати. Рисование текста на экран является простым способом является использование <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.controls.label">Label</a> или <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.controls.textblock">TextBlock</a>. Дополнительные сведения о <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.glyphrun">GlyphRun</a>, см. в разделе <a href="../advanced/introduction-to-the-glyphrun-object-and-glyphs-element.html">Знакомство с объектом GlyphRun и элементом Glyphs</a> Обзор.</p>
<p><a name="compositedrawingssection"></a></p>
<h2 id="composite-drawings">Составные рисунки</h2>
<p>Объект <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.drawinggroup">DrawingGroup</a> позволяет объединить несколько рисунков в один составной рисунок. С помощью <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.drawinggroup">DrawingGroup</a>, фигуры, изображения и текст можно объединить в единую <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.drawing">Drawing</a> объекта.</p>
<p>В следующем примере используется <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.drawinggroup">DrawingGroup</a> сочетание двух <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.geometrydrawing">GeometryDrawing</a> объектов и <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.imagedrawing">ImageDrawing</a> объекта. В этом примере формируются следующие данные:</p>
<p><img src="media/graphicsmm-simple.jpg" alt="DrawingGroup с множественными отрисовками" title="graphicsmm_simple"><br>
Составной рисунок</p>
<pre><code class="lang-csharp" name="DrawingMiscSnippets_snip#GraphicsMMSimpleDrawingGroupExample">//
// Create three drawings.
//
GeometryDrawing ellipseDrawing =
    new GeometryDrawing(
        new SolidColorBrush(Color.FromArgb(102, 181, 243, 20)),
        new Pen(Brushes.Black, 4),
        new EllipseGeometry(new Point(50,50), 50, 50)
    );

ImageDrawing kiwiPictureDrawing =
    new ImageDrawing(
        new BitmapImage(new Uri(@&quot;sampleImages\kiwi.png&quot;, UriKind.Relative)),
        new Rect(50,50,100,100));

GeometryDrawing ellipseDrawing2 =
    new GeometryDrawing(
        new SolidColorBrush(Color.FromArgb(102,181,243,20)),
        new Pen(Brushes.Black, 4),
        new EllipseGeometry(new Point(150, 150), 50, 50)
    );

// Create a DrawingGroup to contain the drawings.
DrawingGroup aDrawingGroup = new DrawingGroup();
aDrawingGroup.Children.Add(ellipseDrawing);
aDrawingGroup.Children.Add(kiwiPictureDrawing);
aDrawingGroup.Children.Add(ellipseDrawing2);

</code></pre><pre><code class="lang-xaml" name="DrawingMiscSnippets_snip#GraphicsMMSimpleDrawingGroupExample">&lt;DrawingGroup&gt;

  &lt;GeometryDrawing Brush=&quot;#66B5F314&quot;&gt;
    &lt;GeometryDrawing.Geometry&gt;
      &lt;EllipseGeometry Center=&quot;50,50&quot; RadiusX=&quot;50&quot;  RadiusY=&quot;50&quot;/&gt;
    &lt;/GeometryDrawing.Geometry&gt;
    &lt;GeometryDrawing.Pen&gt;
      &lt;Pen Brush=&quot;Black&quot; Thickness=&quot;4&quot; /&gt;
    &lt;/GeometryDrawing.Pen&gt;
  &lt;/GeometryDrawing&gt;
  &lt;ImageDrawing ImageSource=&quot;sampleImages\kiwi.png&quot; Rect=&quot;50,50,100,100&quot;/&gt;
  &lt;GeometryDrawing Brush=&quot;#66B5F314&quot;&gt;
    &lt;GeometryDrawing.Geometry&gt;
      &lt;EllipseGeometry Center=&quot;150,150&quot; RadiusX=&quot;50&quot;  RadiusY=&quot;50&quot;/&gt;
    &lt;/GeometryDrawing.Geometry&gt;
    &lt;GeometryDrawing.Pen&gt;
      &lt;Pen Brush=&quot;Black&quot; Thickness=&quot;4&quot; /&gt;
    &lt;/GeometryDrawing.Pen&gt;
  &lt;/GeometryDrawing&gt;
&lt;/DrawingGroup&gt;
</code></pre>
<p>Объект <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.drawinggroup">DrawingGroup</a> также позволяет применить к его содержимому маски непрозрачности, преобразования, эффекты для точечных рисунков и другие операции. <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.drawinggroup">DrawingGroup</a> операции применяются в следующем порядке: <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.drawinggroup.opacitymask">OpacityMask</a>, <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.drawinggroup.opacity">Opacity</a>, <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.drawinggroup.bitmapeffect">BitmapEffect</a>, <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.drawinggroup.clipgeometry">ClipGeometry</a>, <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.drawinggroup.guidelineset">GuidelineSet</a>, а затем <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.drawinggroup.transform">Transform</a>.</p>
<p>Ниже показан порядок, в котором <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.drawinggroup">DrawingGroup</a> применяются операции.</p>
<p><img src="media/graphcismm-drawinggroup-order.png" alt="Порядок операций для DrawingGroup" title="graphcismm_drawinggroup_order"><br>
Порядок операций для DrawingGroup</p>
<p>В следующей таблице описаны свойства, можно использовать для управления <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.drawinggroup">DrawingGroup</a> содержимое объекта.</p>
<table>
<thead>
<tr>
<th>Свойство</th>
<th>Описание</th>
<th>Рисунки</th>
</tr>
</thead>
<tbody>
<tr>
<td><a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.drawinggroup.opacitymask">OpacityMask</a></td>
<td>Изменяет прозрачность выбранных частей <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.drawinggroup">DrawingGroup</a> содержимое. Пример см. в статье <a href="https://docs.microsoft.com/previous-versions/dotnet/netframework-3.5/ms748242(v=vs.90)">Практическое руководство. Управление прозрачностью рисунка</a>.</td>
<td><img src="media/graphicsmm-opmask.png" alt="DrawingGroup с маской непрозрачности " title="graphicsmm_opmask"></td>
</tr>
<tr>
<td><a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.drawinggroup.opacity">Opacity</a></td>
<td>Однородно изменяет прозрачность <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.drawinggroup">DrawingGroup</a> содержимое. Это свойство используется, чтобы сделать <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.drawing">Drawing</a> прозрачным или полупрозрачным. Пример см. в статье <a href="https://docs.microsoft.com/previous-versions/dotnet/netframework-3.5/ms753195(v=vs.90)">Практическое руководство. Применение маски непрозрачности к рисунку</a>.</td>
<td><img src="media/graphicsmm-opacity.png" alt="DrawingGroups с различными параметрами прозрачности " title="graphicsmm_opacity"></td>
</tr>
<tr>
<td><a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.drawinggroup.bitmapeffect">BitmapEffect</a></td>
<td>Применяет <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.effects.bitmapeffect">BitmapEffect</a> для <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.drawinggroup">DrawingGroup</a> содержимое. Пример см. в статье <a href="https://docs.microsoft.com/previous-versions/dotnet/netframework-3.5/ms752341(v=vs.90)">Практическое руководство. Применение BitmapEffect к рисунку</a>.</td>
<td><img src="media/graphicsmm-bitmap.png" alt="DrawingGroup с BlurBitmapEffect" title="graphicsmm_bitmap"></td>
</tr>
<tr>
<td><a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.drawinggroup.clipgeometry">ClipGeometry</a></td>
<td>Клипов <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.drawinggroup">DrawingGroup</a> содержимое области, заданной с помощью <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.geometry">Geometry</a>. Пример см. в статье <a href="https://docs.microsoft.com/previous-versions/dotnet/netframework-3.5/ms743068(v=vs.90)">Практическое руководство. Обрезка рисунка</a> .</td>
<td><img src="media/graphicsmm-clipgeom.png" alt="DrawingGroup с определенной областью обрезки " title="graphicsmm_clipgeom"></td>
</tr>
<tr>
<td><a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.drawinggroup.guidelineset">GuidelineSet</a></td>
<td>Привязывает аппаратно-независимые пиксели к пикселям устройства, следуя указанным правилам. Это свойство полезно для обеспечения резкой отрисовки высокодетализированной графики на дисплеях с низким разрешением. Пример см. в разделе <a href="how-to-apply-a-guidelineset-to-a-drawing.html">Применение GuidelineSet к рисунку</a>.</td>
<td><img src="media/graphicsmm-drawinggroup-guidelineset.png" alt="DrawingGroup c GuidelineSet и без него " title="graphicsmm_drawinggroup_guidelineset"></td>
</tr>
<tr>
<td><a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.drawinggroup.transform">Transform</a></td>
<td>Преобразует <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.drawinggroup">DrawingGroup</a> содержимое. Пример см. в статье <a href="https://docs.microsoft.com/previous-versions/dotnet/netframework-3.5/ms742304(v=vs.90)">Практическое руководство. Применение преобразования к рисунку</a>.</td>
<td><img src="media/graphicsmm-rotate.png" alt="Повернутая DrawingGroup" title="graphicsmm_rotate"></td>
</tr>
</tbody>
</table>
<p><a name="usingimagedrawing"></a></p>
<h2 id="display-a-drawing-as-an-image">Отображение рисунка в виде изображения</h2>
<p>Для отображения <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.drawing">Drawing</a> с <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.controls.image">Image</a> управления, используйте <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.drawingimage">DrawingImage</a> как <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.controls.image">Image</a> элемента управления <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.controls.image.source">Source</a> и задайте <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.drawingimage">DrawingImage</a> объекта <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.drawingimage.drawing">DrawingImage.Drawing</a> свойства в документе, вы хотите отобразить.</p>
<p>В следующем примере используется <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.drawingimage">DrawingImage</a> и <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.controls.image">Image</a> управления для отображения <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.geometrydrawing">GeometryDrawing</a>. В этом примере формируются следующие данные:</p>
<p><img src="media/graphicsmm-geodraw.jpg" alt="GeometryDrawing двух эллипсов" title="graphicsmm_geodraw"><br>
Объект DrawingImage</p>
<pre><code class="lang-csharp" name="DrawingMiscSnippets_snip#DrawingImageExampleWholePage">using System;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Media;
using System.Windows.Media.Animation;
using System.Windows.Shapes;

namespace SDKSample
{
    public class DrawingImageExample : Page
    {

        public DrawingImageExample()
        {

            //
            // Create the Geometry to draw.
            //
            GeometryGroup ellipses = new GeometryGroup();
            ellipses.Children.Add(
                new EllipseGeometry(new Point(50,50), 45, 20)
                );
            ellipses.Children.Add(
                new EllipseGeometry(new Point(50, 50), 20, 45)
                );

            //
            // Create a GeometryDrawing.
            //
            GeometryDrawing aGeometryDrawing = new GeometryDrawing();
            aGeometryDrawing.Geometry = ellipses;

            // Paint the drawing with a gradient.
            aGeometryDrawing.Brush =
                new LinearGradientBrush(
                    Colors.Blue,
                    Color.FromRgb(204,204,255),
                    new Point(0,0),
                    new Point(1,1));

            // Outline the drawing with a solid color.
            aGeometryDrawing.Pen = new Pen(Brushes.Black, 10);

            //
            // Use a DrawingImage and an Image control
            // to display the drawing.
            //
            DrawingImage geometryImage = new DrawingImage(aGeometryDrawing);

            // Freeze the DrawingImage for performance benefits.
            geometryImage.Freeze();

            Image anImage = new Image();
            anImage.Source = geometryImage;
            anImage.HorizontalAlignment = HorizontalAlignment.Left;

            //
            // Place the image inside a border and
            // add it to the page.
            //
            Border exampleBorder = new Border();
            exampleBorder.Child = anImage;
            exampleBorder.BorderBrush = Brushes.Gray;
            exampleBorder.BorderThickness = new Thickness(1);
            exampleBorder.HorizontalAlignment = HorizontalAlignment.Left;
            exampleBorder.VerticalAlignment = VerticalAlignment.Top;
            exampleBorder.Margin = new Thickness(10);

            this.Margin = new Thickness(20);
            this.Background = Brushes.White;
            this.Content = exampleBorder;
        }
    }
}
</code></pre><pre><code class="lang-xaml" name="DrawingMiscSnippets_snip#DrawingImageExampleWholePage">&lt;Page 
  xmlns=&quot;http://schemas.microsoft.com/winfx/2006/xaml/presentation&quot;
  xmlns:x=&quot;http://schemas.microsoft.com/winfx/2006/xaml&quot;
  xmlns:PresentationOptions=&quot;http://schemas.microsoft.com/winfx/2006/xaml/presentation/options&quot; 
  xmlns:mc=&quot;http://schemas.openxmlformats.org/markup-compatibility/2006&quot;
  mc:Ignorable=&quot;PresentationOptions&quot;
  Background=&quot;White&quot; Margin=&quot;20&quot;&gt;

  &lt;Border BorderBrush=&quot;Gray&quot; BorderThickness=&quot;1&quot; 
    HorizontalAlignment=&quot;Left&quot; VerticalAlignment=&quot;Top&quot;
    Margin=&quot;10&quot;&gt;

    &lt;!-- This image uses a Drawing object for its source. --&gt;
    &lt;Image&gt;
      &lt;Image.Source&gt;
        &lt;DrawingImage PresentationOptions:Freeze=&quot;True&quot;&gt;
          &lt;DrawingImage.Drawing&gt;
            &lt;GeometryDrawing&gt;
              &lt;GeometryDrawing.Geometry&gt;
                &lt;GeometryGroup&gt;
                  &lt;EllipseGeometry Center=&quot;50,50&quot; RadiusX=&quot;45&quot; RadiusY=&quot;20&quot; /&gt;
                  &lt;EllipseGeometry Center=&quot;50,50&quot; RadiusX=&quot;20&quot; RadiusY=&quot;45&quot; /&gt;
                &lt;/GeometryGroup&gt;
              &lt;/GeometryDrawing.Geometry&gt;
              &lt;GeometryDrawing.Brush&gt;
                &lt;LinearGradientBrush&gt;
                  &lt;GradientStop Offset=&quot;0.0&quot; Color=&quot;Blue&quot; /&gt;
                  &lt;GradientStop Offset=&quot;1.0&quot; Color=&quot;#CCCCFF&quot; /&gt;
                &lt;/LinearGradientBrush&gt;
              &lt;/GeometryDrawing.Brush&gt;
              &lt;GeometryDrawing.Pen&gt;
                &lt;Pen Thickness=&quot;10&quot; Brush=&quot;Black&quot; /&gt;
              &lt;/GeometryDrawing.Pen&gt;
            &lt;/GeometryDrawing&gt;
          &lt;/DrawingImage.Drawing&gt;
        &lt;/DrawingImage&gt;
      &lt;/Image.Source&gt;
    &lt;/Image&gt;
  &lt;/Border&gt;

&lt;/Page&gt;
</code></pre>
<p><a name="renderingwithdrawingbrushsection"></a></p>
<h2 id="paint-an-object-with-a-drawing">Заполнение объекта с помощью рисунка</h2>
<p>Объект <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.drawingbrush">DrawingBrush</a> — это тип кисти, которая закрашивает область объектом-рисунком. Этот объект можно использовать для закраски практически любого графического объекта с помощью рисунка. <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.drawing">Drawing</a> Свойство <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.drawingbrush">DrawingBrush</a> описывает его <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.drawingbrush.drawing">Drawing</a>. Для подготовки к просмотру <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.drawing">Drawing</a> с <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.drawingbrush">DrawingBrush</a>, добавьте его к кисти с использованием кисти <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.drawing">Drawing</a> свойства и используйте кисть для закраски графического объекта, такого как элемент управления или панели.</p>
<p>В следующих примерах используется <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.drawingbrush">DrawingBrush</a> для закрашивания <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.shapes.shape.fill">Fill</a> из <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.shapes.rectangle">Rectangle</a> шаблоном, созданным из <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.geometrydrawing">GeometryDrawing</a>. В этом примере формируются следующие данные:</p>
<p><img src="media/graphicsmm-drawingbrush-geometrydrawing.png" alt="Мозаичная DrawingBrush" title="graphicsmm_drawingbrush_geometrydrawing"><br>
GeometryDrawing с DrawingBrush</p>
<pre><code class="lang-csharp" name="DrawingMiscSnippets_snip#DrawingBrushExampleWholePage">using System;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Media;
using System.Windows.Media.Animation;
using System.Windows.Shapes;

namespace SDKSample
{
    public class DrawingBrushExample : Page
    {

        public DrawingBrushExample()
        {

            //
            // Create the Geometry to draw.
            //
            GeometryGroup ellipses = new GeometryGroup();
            ellipses.Children.Add(
                new EllipseGeometry(new Point(50,50), 45, 20)
                );
            ellipses.Children.Add(
                new EllipseGeometry(new Point(50, 50), 20, 45)
                );

            //
            // Create a GeometryDrawing.
            //
            GeometryDrawing aGeometryDrawing = new GeometryDrawing();
            aGeometryDrawing.Geometry = ellipses;

            // Paint the drawing with a gradient.
            aGeometryDrawing.Brush =
                new LinearGradientBrush(
                    Colors.Blue,
                    Color.FromRgb(204,204,255),
                    new Point(0,0),
                    new Point(1,1));

            // Outline the drawing with a solid color.
            aGeometryDrawing.Pen = new Pen(Brushes.Black, 10);

            DrawingBrush patternBrush = new DrawingBrush(aGeometryDrawing);
            patternBrush.Viewport = new Rect(0, 0, 0.25, 0.25);
            patternBrush.TileMode = TileMode.Tile;
            patternBrush.Freeze();

            //
            // Create an object to paint.
            //
            Rectangle paintedRectangle = new Rectangle();
            paintedRectangle.Width = 100;
            paintedRectangle.Height = 100;
            paintedRectangle.Fill = patternBrush;

            //
            // Place the image inside a border and
            // add it to the page.
            //
            Border exampleBorder = new Border();
            exampleBorder.Child = paintedRectangle;
            exampleBorder.BorderBrush = Brushes.Gray;
            exampleBorder.BorderThickness = new Thickness(1);
            exampleBorder.HorizontalAlignment = HorizontalAlignment.Left;
            exampleBorder.VerticalAlignment = VerticalAlignment.Top;
            exampleBorder.Margin = new Thickness(10);

            this.Margin = new Thickness(20);
            this.Background = Brushes.White;
            this.Content = exampleBorder;
        }
    }
}
</code></pre><pre><code class="lang-xaml" name="DrawingMiscSnippets_snip#DrawingBrushExampleWholePage">&lt;Page 
  xmlns=&quot;http://schemas.microsoft.com/winfx/2006/xaml/presentation&quot;
  xmlns:x=&quot;http://schemas.microsoft.com/winfx/2006/xaml&quot;
  xmlns:PresentationOptions=&quot;http://schemas.microsoft.com/winfx/2006/xaml/presentation/options&quot; 
  xmlns:mc=&quot;http://schemas.openxmlformats.org/markup-compatibility/2006&quot;
  mc:Ignorable=&quot;PresentationOptions&quot;
  Margin=&quot;20&quot; Background=&quot;White&quot;&gt;

  &lt;Border BorderBrush=&quot;Gray&quot; BorderThickness=&quot;1&quot; 
    HorizontalAlignment=&quot;Left&quot; VerticalAlignment=&quot;Top&quot;
    Margin=&quot;10&quot;&gt;
    &lt;Rectangle Width=&quot;100&quot; Height=&quot;100&quot;&gt;
      &lt;Rectangle.Fill&gt;
        &lt;DrawingBrush PresentationOptions:Freeze=&quot;True&quot;
                      Viewport=&quot;0,0,0.25,0.25&quot; TileMode=&quot;Tile&quot;&gt;
          &lt;DrawingBrush.Drawing&gt;
            &lt;GeometryDrawing&gt;
              &lt;GeometryDrawing.Geometry&gt;
                &lt;GeometryGroup&gt;
                  &lt;EllipseGeometry Center=&quot;50,50&quot; RadiusX=&quot;45&quot; RadiusY=&quot;20&quot; /&gt;
                  &lt;EllipseGeometry Center=&quot;50,50&quot; RadiusX=&quot;20&quot; RadiusY=&quot;45&quot; /&gt;
                &lt;/GeometryGroup&gt;
              &lt;/GeometryDrawing.Geometry&gt;
              &lt;GeometryDrawing.Brush&gt;
                &lt;LinearGradientBrush&gt;
                  &lt;GradientStop Offset=&quot;0.0&quot; Color=&quot;Blue&quot; /&gt;
                  &lt;GradientStop Offset=&quot;1.0&quot; Color=&quot;#CCCCFF&quot; /&gt;
                &lt;/LinearGradientBrush&gt;
              &lt;/GeometryDrawing.Brush&gt;
              &lt;GeometryDrawing.Pen&gt;
                &lt;Pen Thickness=&quot;10&quot; Brush=&quot;Black&quot; /&gt;
              &lt;/GeometryDrawing.Pen&gt;
            &lt;/GeometryDrawing&gt;
          &lt;/DrawingBrush.Drawing&gt;
        &lt;/DrawingBrush&gt;
      &lt;/Rectangle.Fill&gt;

    &lt;/Rectangle&gt;
  &lt;/Border&gt;


&lt;/Page&gt;
</code></pre>
<p><a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.drawingbrush">DrawingBrush</a> Класс предоставляет разнообразные варианты растягивания и мозаичного заполнения своего содержимого. Дополнительные сведения о <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.drawingbrush">DrawingBrush</a>, см. в разделе <a href="painting-with-images-drawings-and-visuals.html">Рисование с помощью изображений, рисунков и визуальных элементов</a> Обзор.</p>
<p><a name="renderingwithvisualsection"></a></p>
<h2 id="render-a-drawing-with-a-visual">Рисование с помощью объектов Visual</h2>
<p>Объект <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.drawingvisual">DrawingVisual</a> — это тип визуального объекта, предназначенного для отрисовки рисунка. Работа непосредственно на визуальном уровне является инструментом для разработчиков, которым требуется построить настраиваемую графическую среду, и не описывается в этом обзоре. Дополнительные сведения см. в разделе <a href="using-drawingvisual-objects.html">Использование объектов DrawingVisual</a>.</p>
<p><a name="drawingcontextobjects"></a></p>
<h2 id="drawingcontext-objects">Объекты DrawingContext</h2>
<p><a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.drawingcontext">DrawingContext</a> Позволяет заполнить <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.visual">Visual</a> или <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.drawing">Drawing</a> визуальным содержимым. Многие такие низкоуровневые графические объекты используют <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.drawingcontext">DrawingContext</a> так, как он описывает графическое содержимое очень эффективно.</p>
<p>Несмотря на то что <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.drawingcontext">DrawingContext</a> методы рисования выглядеть методы рисования <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.drawing.graphics">System.Drawing.Graphics</a> типа, они фактически сильно отличаются. <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.drawingcontext">DrawingContext</a> — используется с графической системой сохраненного режима, а <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.drawing.graphics">System.Drawing.Graphics</a> тип используется с графической системой непосредственного режима. При использовании <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.drawingcontext">DrawingContext</a> команд рисования объекта, фактически сохраняется набор инструкций отрисовки (хотя фактический механизм сохранения зависит от типа объекта, предоставляющего <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.drawingcontext">DrawingContext</a>), будет использоваться позже по графику системы; не выполняется рисование на экране в режиме реального времени. Дополнительные сведения о том, как работает графическая система Windows Presentation Foundation (WPF), см. в разделе <a href="wpf-graphics-rendering-overview.html">Обзор отрисовки графики WPF</a>.</p>
<p>Вы никогда непосредственно не создаете экземпляр <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.drawingcontext">DrawingContext</a>, однако можете получить контекст рисования с помощью определенных методов, например <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.drawinggroup.open">DrawingGroup.Open</a> и <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.drawingvisual.renderopen">DrawingVisual.RenderOpen</a>.</p>
<p><a name="enumeratevisualcontents"></a></p>
<h2 id="enumerate-the-contents-of-a-visual">Перечисление содержимого визуального элемента</h2>
<p>Наряду с другими своими возможностями, объекты <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.drawing">Drawing</a> также предоставляют объектную модель для перечисления содержимого <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.visual">Visual</a>.</p>
<p>В следующем примере метод <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.visualtreehelper.getdrawing">GetDrawing</a> используется для извлечения значения <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.drawinggroup">DrawingGroup</a> из <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.visual">Visual</a> и перечисления содержимого группы.</p>
<pre><code class="lang-csharp" name="DrawingMiscSnippets_snip#GraphicsMMRetrieveDrawings">public void RetrieveDrawing(Visual v)
{
    DrawingGroup drawingGroup = VisualTreeHelper.GetDrawing(v);
    EnumDrawingGroup(drawingGroup);
}

// Enumerate the drawings in the DrawingGroup.
public void EnumDrawingGroup(DrawingGroup drawingGroup)
{
    DrawingCollection dc = drawingGroup.Children;

    // Enumerate the drawings in the DrawingCollection.
    foreach (Drawing drawing in dc)
    {
        // If the drawing is a DrawingGroup, call the function recursively.
        if (drawing is DrawingGroup group)
        {
            EnumDrawingGroup(group);
        }
        else if (drawing is GeometryDrawing)
        {
            // Perform action based on drawing type.
        }
        else if (drawing is ImageDrawing)
        {
            // Perform action based on drawing type.
        }
        else if (drawing is GlyphRunDrawing)
        {
            // Perform action based on drawing type.
        }
        else if (drawing is VideoDrawing)
        {
            // Perform action based on drawing type.
        }
    }
}

</code></pre><h2 id="see-also">См. также</h2>
<ul>
<li><a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.drawing">Drawing</a></li>
<li><a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.drawinggroup">DrawingGroup</a></li>
<li><a href="../advanced/optimizing-performance-2d-graphics-and-imaging.html">Двумерная графика и изображения</a></li>
<li><a href="painting-with-images-drawings-and-visuals.html">Рисование с помощью объектов Image, Drawing и Visual</a></li>
<li><a href="geometry-overview.html">Общие сведения о классе Geometry</a></li>
<li><a href="shapes-and-basic-drawing-in-wpf-overview.html">Обзор фигур и базовых средств рисования в приложении WPF</a></li>
<li><a href="wpf-graphics-rendering-overview.html">Общие сведения об отрисовке графики в WPF</a></li>
<li><a href="../advanced/freezable-objects-overview.html">Общие сведения об объектах класса Freezable</a></li>
<li><a href="drawings-how-to-topics.html">Практические руководства</a></li>
</ul>
</article>
          </div>
          
          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">
              <div class="contribution">
                <ul class="nav">
                </ul>
              </div>
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
              <!-- <p><a class="back-to-top" href="#top">Back to top</a><p> -->
              </nav>
            </div>
          </div>
        </div>
      </div>
      
      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right">
              <a href="#top">Back to top</a>
            </span>
            <span><a href="https://github.com/MSDN-WhiteKnight/dotnet-docs-ru">Неофициальная документация по .NET на русском языке</a>. Лицензия: <a href="https://github.com/MSDN-WhiteKnight/dotnet-docs-ru/blob/main/LICENSE">CC-BY 4.0</a>. Основано на <a href="https://docs.microsoft.com/ru-ru/dotnet/">документации по .NET с Microsoft Docs</a><br>Generated by <strong>DocFX</strong></span><script type="text/javascript">(function(m,e,t,r,i,k,a){m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};m[i].l=1*new Date();k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)})(window, document, "script", "https://mc.yandex.ru/metrika/tag.js", "ym");ym(65150713, "init", {clickmap:true,trackLinks:true,accurateTrackBounce:true});</script><noscript><div><img src="https://mc.yandex.ru/watch/65150713" style="position:absolute; left:-9999px;" alt=""></div></noscript>
            
          </div>
        </div>
      </footer>
    </div>
    
    <script type="text/javascript" src="../../../styles/docfx.vendor.js"></script>
    <script type="text/javascript" src="../../../styles/docfx.js"></script>
    <script type="text/javascript" src="../../../styles/main.js"></script>
  </body>
</html>
