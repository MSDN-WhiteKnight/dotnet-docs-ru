<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>&#1055;&#1088;&#1072;&#1082;&#1090;&#1080;&#1095;&#1077;&#1089;&#1082;&#1086;&#1077; &#1088;&#1091;&#1082;&#1086;&#1074;&#1086;&#1076;&#1089;&#1090;&#1074;&#1086;. &#1040;&#1085;&#1080;&#1084;&#1072;&#1094;&#1080;&#1103; &#1090;&#1080;&#1087;&#1072; Double &#1089; &#1087;&#1086;&#1084;&#1086;&#1097;&#1100;&#1102; &#1082;&#1083;&#1102;&#1095;&#1077;&#1074;&#1099;&#1093; &#1082;&#1072;&#1076;&#1088;&#1086;&#1074; | &#1053;&#1077;&#1086;&#1092;&#1080;&#1094;&#1080;&#1072;&#1083;&#1100;&#1085;&#1072;&#1103; &#1076;&#1086;&#1082;&#1091;&#1084;&#1077;&#1085;&#1090;&#1072;&#1094;&#1080;&#1103; .NET </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="&#1055;&#1088;&#1072;&#1082;&#1090;&#1080;&#1095;&#1077;&#1089;&#1082;&#1086;&#1077; &#1088;&#1091;&#1082;&#1086;&#1074;&#1086;&#1076;&#1089;&#1090;&#1074;&#1086;. &#1040;&#1085;&#1080;&#1084;&#1072;&#1094;&#1080;&#1103; &#1090;&#1080;&#1087;&#1072; Double &#1089; &#1087;&#1086;&#1084;&#1086;&#1097;&#1100;&#1102; &#1082;&#1083;&#1102;&#1095;&#1077;&#1074;&#1099;&#1093; &#1082;&#1072;&#1076;&#1088;&#1086;&#1074; | &#1053;&#1077;&#1086;&#1092;&#1080;&#1094;&#1080;&#1072;&#1083;&#1100;&#1085;&#1072;&#1103; &#1076;&#1086;&#1082;&#1091;&#1084;&#1077;&#1085;&#1090;&#1072;&#1094;&#1080;&#1103; .NET ">
    <meta name="generator" content="docfx 2.40.12.0">
    
    <link rel="shortcut icon" href="../../../favicon.ico">
    <link rel="stylesheet" href="../../../styles/docfx.vendor.css">
    <link rel="stylesheet" href="../../../styles/docfx.css">
    <link rel="stylesheet" href="../../../styles/main.css">
    <meta property="docfx:navrel" content="../../../toc.html">
    <meta property="docfx:tocrel" content="toc.html">
    
    
    
  </head>
  <body data-spy="scroll" data-target="#affix" data-offset="120">
    <div id="wrapper">
      <header>
        
        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              
              <a class="navbar-brand" href="../../../index.html">
                <img id="logo" class="svg" src="../../../logo.svg" alt="">
              </a>
            </div>
            <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="search">
                <div class="form-group">
                  <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                </div>
              </form>
            </div>
          </div>
        </nav>
        
        <div class="subnav navbar navbar-default">
          <div class="container hide-when-search" id="breadcrumb">
            <ul class="breadcrumb">
              <li></li>
            </ul>
          </div>
        </div>
      </header>
      <div role="main" class="container body-content hide-when-search">
        
        <div class="sidenav hide-when-search">
          <a class="btn toc-toggle collapse" data-toggle="collapse" href="#sidetoggle" aria-expanded="false" aria-controls="sidetoggle">Show / Hide Table of Contents</a>
          <div class="sidetoggle collapse" id="sidetoggle">
            <div id="sidetoc"></div>
          </div>
        </div>
        <div class="article row grid-right">
          <div class="col-md-10">
            <article class="content wrap" id="_content" data-uid="">
<h1 id="how-to-animate-a-double-by-using-key-frames">Практическое руководство. Анимация типа Double с помощью ключевых кадров</h1>

<p>В этом примере демонстрируется анимация значения свойства, которое принимает <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.double">Double</a> с помощью ключевых кадров.</p>
<h2 id="example">Пример</h2>
<p>В следующем примере прямоугольник перемещается по экрану. В примере используется <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.animation.doubleanimationusingkeyframes">DoubleAnimationUsingKeyFrames</a> класс для анимации <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.translatetransform.x">X</a> свойство <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.translatetransform">TranslateTransform</a> применяется к <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.shapes.rectangle">Rectangle</a>. Эта анимация, которая бесконечно повторяется, использует три ключевых кадра следующим образом:</p>
<ol>
<li><p>В течение первых трех секунд используется экземпляр <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.animation.lineardoublekeyframe">LinearDoubleKeyFrame</a> класс для перемещения прямоугольника вдоль пути с постоянной скоростью из его начальной позиции в позицию 500. Линейные ключевые кадры, например <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.animation.lineardoublekeyframe">LinearDoubleKeyFrame</a> создать плавный линейный переход между значениями.</p>
</li>
<li><p>В конце четвертой секунды используется экземпляр <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.animation.discretedoublekeyframe">DiscreteDoubleKeyFrame</a> класс для резкого перемещения прямоугольника в следующую позицию. Дискретные ключевые кадры, например <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.animation.discretedoublekeyframe">DiscreteDoubleKeyFrame</a> , создают скачкообразные переходы между значениями. В этом примере прямоугольник находится в начальной позиции, а затем внезапно появляется в позиции 500.</p>
</li>
<li><p>В последних двух секунд используется экземпляр <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.animation.splinedoublekeyframe">SplineDoubleKeyFrame</a> класс для перемещения прямоугольника обратно в исходное положение. Ключевые кадры сплайна, например <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.animation.splinedoublekeyframe">SplineDoubleKeyFrame</a> , создают переменный переход между значениями согласно значению <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.animation.splinedoublekeyframe.keyspline">KeySpline</a> свойство. В этом примере прямоугольник начинает двигаться медленно и ускоряется экспоненциально к концу временного отрезка.</p>
</li>
</ol>
<pre><code class="lang-csharp" name="keyframes_snip#AltDoubleAnimationUsingKeyFramesWholePage">using System;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Shapes;
using System.Windows.Media.Animation;
using System.Windows.Media;

namespace Microsoft.Samples.KeyFrameExamples
{
    /// &lt;summary&gt;
    /// This example shows how to use the DoubleAnimationUsingKeyFrames class to
    /// animate the position of an object.
    /// Key frame animations enable you to create complex animations
    /// by specifying multiple destination values
    /// and controlling the animation's interpolation method.
    /// &lt;/summary&gt;
    public class AltDoubleAnimationUsingKeyFramesExample : Page
    {
        public AltDoubleAnimationUsingKeyFramesExample()
        {
            Title = &quot;DoubleAnimationUsingKeyFrames Example&quot;;
            Background = Brushes.White;
            Margin = new Thickness(20);

            // Create a NameScope for this page so that
            // Storyboards can be used.
            NameScope.SetNameScope(this, new NameScope());

            // Create a rectangle.
            Rectangle aRectangle = new Rectangle();
            aRectangle.Width = 100;
            aRectangle.Height = 100;
            aRectangle.Stroke = Brushes.Black;
            aRectangle.StrokeThickness = 5;

            // Create a Canvas to contain and
            // position the rectangle.
            Canvas containerCanvas = new Canvas();
            containerCanvas.Width = 610;
            containerCanvas.Height = 300;
            containerCanvas.Children.Add(aRectangle);
            Canvas.SetTop(aRectangle, 100);
            Canvas.SetLeft(aRectangle, 10);

            // Create a TranslateTransform to
            // move the rectangle.
            TranslateTransform animatedTranslateTransform =
                new TranslateTransform();
            aRectangle.RenderTransform = animatedTranslateTransform;

            // Assign the TranslateTransform a name so that
            // it can be targeted by a Storyboard.
            this.RegisterName(
                &quot;AnimatedTranslateTransform&quot;, animatedTranslateTransform);

            // Create a DoubleAnimationUsingKeyFrames to
            // animate the TranslateTransform.
            DoubleAnimationUsingKeyFrames translationAnimation
                = new DoubleAnimationUsingKeyFrames();
            translationAnimation.Duration = TimeSpan.FromSeconds(6);

            // Animate from the starting position to 500
            // over the first second using linear
            // interpolation.
            translationAnimation.KeyFrames.Add(
                new LinearDoubleKeyFrame(
                    500, // Target value (KeyValue)
                    KeyTime.FromTimeSpan(TimeSpan.FromSeconds(3))) // KeyTime
                );

            // Animate from 500 (the value of the previous key frame)
            // to 400 at 4 seconds using discrete interpolation.
            // Because the interpolation is discrete, the rectangle will appear
            // to &quot;jump&quot; from 500 to 400.
            translationAnimation.KeyFrames.Add(
                new DiscreteDoubleKeyFrame(
                    400, // Target value (KeyValue)
                    KeyTime.FromTimeSpan(TimeSpan.FromSeconds(4))) // KeyTime
                );

            // Animate from 400 (the value of the previous key frame) to 0
            // over two seconds, starting at 4 seconds (the key time of the
            // last key frame) and ending at 6 seconds.
            translationAnimation.KeyFrames.Add(
                new SplineDoubleKeyFrame(
                    0, // Target value (KeyValue)
                    KeyTime.FromTimeSpan(TimeSpan.FromSeconds(6)), // KeyTime
                    new KeySpline(0.6,0.0,0.9,0.0) // KeySpline
                    )
                );

            // Set the animation to repeat forever.
            translationAnimation.RepeatBehavior = RepeatBehavior.Forever;

            // Set the animation to target the X property
            // of the object named &quot;AnimatedTranslateTransform.&quot;
            Storyboard.SetTargetName(translationAnimation, &quot;AnimatedTranslateTransform&quot;);
            Storyboard.SetTargetProperty(
                translationAnimation, new PropertyPath(TranslateTransform.XProperty));

            // Create a storyboard to apply the animation.
            Storyboard translationStoryboard = new Storyboard();
            translationStoryboard.Children.Add(translationAnimation);

            // Start the storyboard after the rectangle loads.
            aRectangle.Loaded += delegate(object sender, RoutedEventArgs e)
            {
                translationStoryboard.Begin(this);
            };

            Content = containerCanvas;
        }
    }
}
</code></pre><div class="WARNING">
<h5>Warning</h5>
<p>It looks like the sample you are looking for does not exist.</p>
</div><pre><code class="lang-xaml" name="keyframes_snip#AltDoubleAnimationUsingKeyFramesWholePage">&lt;!-- This example shows how to use the DoubleAnimationUsingKeyFrames to 
     animate the position of an object. 
     Key frame animations enable you to create complex animations 
     by specifying multiple destination values
     and controlling the animation's interpolation method.
--&gt;
&lt;Page 
  xmlns=&quot;http://schemas.microsoft.com/winfx/2006/xaml/presentation&quot;
  xmlns:x=&quot;http://schemas.microsoft.com/winfx/2006/xaml&quot;
  Title=&quot;DoubleAnimationUsingKeyFrames Example&quot;
  Background=&quot;White&quot; Margin=&quot;20&quot;&gt;       
  &lt;Canvas Width=&quot;610&quot; Height=&quot;300&quot;&gt;
  
    &lt;!-- The position of this rectangle is animated using 
         a key frame animation. --&gt;
    &lt;Rectangle 
      Canvas.Top=&quot;100&quot;
      Canvas.Left=&quot;10&quot;
      Height=&quot;100&quot;
      Width=&quot;100&quot;
      Stroke=&quot;Black&quot;
      StrokeThickness=&quot;5&quot;&gt;
      &lt;Rectangle.RenderTransform&gt;
        &lt;TranslateTransform x:Name=&quot;AnimatedTranslateTransform&quot; /&gt;
      &lt;/Rectangle.RenderTransform&gt;
      
      &lt;Rectangle.Triggers&gt;
        &lt;EventTrigger RoutedEvent=&quot;Rectangle.Loaded&quot;&gt;
          &lt;BeginStoryboard&gt;
            &lt;Storyboard&gt;

              &lt;!-- Animate the TranslateTransform.X property using 3 KeyFrames
                   which animates the rectangle along a straight line. 
                   This animation repeats indefinitely. --&gt;
              &lt;DoubleAnimationUsingKeyFrames
                Storyboard.TargetName=&quot;AnimatedTranslateTransform&quot;
                Storyboard.TargetProperty=&quot;X&quot;
                Duration=&quot;0:0:6&quot;
                RepeatBehavior=&quot;Forever&quot;&gt;

                &lt;!-- Using a LinearDoubleKeyFrame, the rectangle moves 
                     steadily from its starting position to 500 over 
                     the first 3 seconds.  --&gt;
                &lt;LinearDoubleKeyFrame Value=&quot;500&quot; KeyTime=&quot;0:0:3&quot; /&gt;

                &lt;!-- Using a DiscreteDoubleKeyFrame, the rectangle suddenly 
                     appears at 400 after the fourth second of the animation. --&gt;
                &lt;DiscreteDoubleKeyFrame Value=&quot;400&quot; KeyTime=&quot;0:0:4&quot; /&gt;

                &lt;!-- Using a SplineDoubleKeyFrame, the rectangle moves 
                     back to its starting point. The
                     animation starts out slowly at first and then speeds up. 
                     This KeyFrame ends after the 6th
                     second. --&gt;
                &lt;SplineDoubleKeyFrame KeySpline=&quot;0.6,0.0 0.9,0.00&quot; Value=&quot;0&quot; KeyTime=&quot;0:0:6&quot; /&gt;
              &lt;/DoubleAnimationUsingKeyFrames&gt;
            &lt;/Storyboard&gt;
          &lt;/BeginStoryboard&gt;
        &lt;/EventTrigger&gt;
      &lt;/Rectangle.Triggers&gt;
    &lt;/Rectangle&gt;
  &lt;/Canvas&gt;
&lt;/Page&gt;
</code></pre>
<p>Описание полного примера см. в разделе <a href="https://go.microsoft.com/fwlink/?LinkID=160012">Пример анимации по ключевым кадрам</a>.</p>
<p>Для обеспечения согласованности с другими примерами анимации версии кода этого примера используют <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.animation.storyboard">Storyboard</a> объекта для применения <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.animation.doubleanimationusingkeyframes">DoubleAnimationUsingKeyFrames</a>. Кроме того, при применении в коде одной анимации, проще использовать <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.animation.animatable.beginanimation">BeginAnimation</a> метода вместо использования <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.animation.storyboard">Storyboard</a>. Пример см. в разделе <a href="how-to-animate-a-property-without-using-a-storyboard.html">Анимация свойства без использования раскадровки</a>.</p>
<h2 id="see-also">См. также</h2>
<ul>
<li><a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.animation.doubleanimationusingkeyframes">DoubleAnimationUsingKeyFrames</a></li>
<li><a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.shapes.rectangle">Rectangle</a></li>
<li><a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.animation.lineardoublekeyframe">LinearDoubleKeyFrame</a></li>
<li><a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.animation.discretedoublekeyframe">DiscreteDoubleKeyFrame</a></li>
<li><a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.animation.splinedoublekeyframe">SplineDoubleKeyFrame</a></li>
<li><a href="key-frame-animations-overview.html">Общие сведения об анимации по ключевым кадрам</a></li>
<li><a href="key-frame-animation-how-to-topics.html">Практические руководства, посвященные анимации по ключевым кадрам</a></li>
</ul>
</article>
          </div>
          
          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">
              <div class="contribution">
                <ul class="nav">
                </ul>
              </div>
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
              <!-- <p><a class="back-to-top" href="#top">Back to top</a><p> -->
              </nav>
            </div>
          </div>
        </div>
      </div>
      
      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right">
              <a href="#top">Back to top</a>
            </span>
            <span><a href="https://github.com/MSDN-WhiteKnight/dotnet-docs-ru">Неофициальная документация по .NET на русском языке</a>. Лицензия: <a href="https://github.com/MSDN-WhiteKnight/dotnet-docs-ru/blob/main/LICENSE">CC-BY 4.0</a>. Основано на <a href="https://docs.microsoft.com/ru-ru/dotnet/">документации по .NET с Microsoft Docs</a><br>Generated by <strong>DocFX</strong></span><script type="text/javascript">(function(m,e,t,r,i,k,a){m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};m[i].l=1*new Date();k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)})(window, document, "script", "https://mc.yandex.ru/metrika/tag.js", "ym");ym(65150713, "init", {clickmap:true,trackLinks:true,accurateTrackBounce:true});</script><noscript><div><img src="https://mc.yandex.ru/watch/65150713" style="position:absolute; left:-9999px;" alt=""></div></noscript>
            
          </div>
        </div>
      </footer>
    </div>
    
    <script type="text/javascript" src="../../../styles/docfx.vendor.js"></script>
    <script type="text/javascript" src="../../../styles/docfx.js"></script>
    <script type="text/javascript" src="../../../styles/main.js"></script>
  </body>
</html>
