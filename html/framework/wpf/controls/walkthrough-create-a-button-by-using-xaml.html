<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>&#1055;&#1086;&#1096;&#1072;&#1075;&#1086;&#1074;&#1086;&#1077; &#1088;&#1091;&#1082;&#1086;&#1074;&#1086;&#1076;&#1089;&#1090;&#1074;&#1086;. &#1057;&#1086;&#1079;&#1076;&#1072;&#1085;&#1080;&#1077; &#1082;&#1085;&#1086;&#1087;&#1082;&#1080; &#1089; &#1087;&#1086;&#1084;&#1086;&#1097;&#1100;&#1102; XAML | &#1053;&#1077;&#1086;&#1092;&#1080;&#1094;&#1080;&#1072;&#1083;&#1100;&#1085;&#1072;&#1103; &#1076;&#1086;&#1082;&#1091;&#1084;&#1077;&#1085;&#1090;&#1072;&#1094;&#1080;&#1103; .NET </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="&#1055;&#1086;&#1096;&#1072;&#1075;&#1086;&#1074;&#1086;&#1077; &#1088;&#1091;&#1082;&#1086;&#1074;&#1086;&#1076;&#1089;&#1090;&#1074;&#1086;. &#1057;&#1086;&#1079;&#1076;&#1072;&#1085;&#1080;&#1077; &#1082;&#1085;&#1086;&#1087;&#1082;&#1080; &#1089; &#1087;&#1086;&#1084;&#1086;&#1097;&#1100;&#1102; XAML | &#1053;&#1077;&#1086;&#1092;&#1080;&#1094;&#1080;&#1072;&#1083;&#1100;&#1085;&#1072;&#1103; &#1076;&#1086;&#1082;&#1091;&#1084;&#1077;&#1085;&#1090;&#1072;&#1094;&#1080;&#1103; .NET ">
    <meta name="generator" content="docfx 2.40.12.0">
    
    <link rel="shortcut icon" href="../../../favicon.ico">
    <link rel="stylesheet" href="../../../styles/docfx.vendor.css">
    <link rel="stylesheet" href="../../../styles/docfx.css">
    <link rel="stylesheet" href="../../../styles/main.css">
    <meta property="docfx:navrel" content="../../../toc.html">
    <meta property="docfx:tocrel" content="toc.html">
    
    
    
  </head>
  <body data-spy="scroll" data-target="#affix" data-offset="120">
    <div id="wrapper">
      <header>
        
        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              
              <a class="navbar-brand" href="../../../index.html">
                <img id="logo" class="svg" src="../../../logo.svg" alt="">
              </a>
            </div>
            <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="search">
                <div class="form-group">
                  <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                </div>
              </form>
            </div>
          </div>
        </nav>
        
        <div class="subnav navbar navbar-default">
          <div class="container hide-when-search" id="breadcrumb">
            <ul class="breadcrumb">
              <li></li>
            </ul>
          </div>
        </div>
      </header>
      <div role="main" class="container body-content hide-when-search">
        
        <div class="sidenav hide-when-search">
          <a class="btn toc-toggle collapse" data-toggle="collapse" href="#sidetoggle" aria-expanded="false" aria-controls="sidetoggle">Show / Hide Table of Contents</a>
          <div class="sidetoggle collapse" id="sidetoggle">
            <div id="sidetoc"></div>
          </div>
        </div>
        <div class="article row grid-right">
          <div class="col-md-10">
            <article class="content wrap" id="_content" data-uid="">
<h1 id="walkthrough-create-a-button-by-using-xaml">Пошаговое руководство. Создание кнопки с помощью XAML</h1>

<p>Цель этого пошагового руководства — сведения о создании анимированной кнопки для использования в приложении Windows Presentation Foundation (WPF). В этом пошаговом руководстве используется стиль и шаблон для создания ресурса пользовательской кнопки, которая позволяет повторно использовать код и разделять логику от объявления кнопки. В этом пошаговом руководстве приведено полностью в Язык XAML.</p>
<div class="IMPORTANT">
<h5>Important</h5>
<p>В этом пошаговом руководстве поможет выполнить шаги для создания приложения путем ввода или копирования и вставки Язык XAML в Microsoft Visual Studio. Если вы предпочитаете, чтобы научиться использовать это средство разработки (Microsoft Expression Blend) для создания того же приложения, см. в разделе <a href="walkthrough-create-a-button-by-using-microsoft-expression-blend.html">Создание кнопки с помощью Microsoft Expression Blend</a>.</p>
</div>
<p>Ниже показаны созданные кнопки.</p>
<p><img src="media/custom-button-animatedbutton-5.gif" alt="Настраиваемые кнопки, созданные с помощью XAML" title="custom_button_AnimatedButton_5"></p>
<h2 id="create-basic-buttons">Создание простых кнопок</h2>
<p>Давайте начнем с создания проекта и добавления нескольких кнопок в окно.</p>
<h4 id="to-create-a-new-wpf-project-and-add-buttons-to-the-window">Чтобы создать новый проект WPF и добавление кнопок в окно</h4>
<ol>
<li><p>Запустите Visual Studio.</p>
</li>
<li><p><strong>Создайте новый проект WPF:</strong> В меню <strong>Файл</strong> выберите пункт <strong>Создать</strong>, а затем команду <strong>Проект</strong>. Найти <strong>приложения Windows (WPF)</strong> шаблон и имя проекта «AnimatedButton». Будет создан каркас для приложения.</p>
</li>
<li><p><strong>Добавление кнопок basic по умолчанию:</strong> Все файлы, необходимые для этого пошагового руководства предоставленный шаблоном. Откройте файл Window1.xaml, дважды щелкнув его в обозревателе решений. По умолчанию — <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.controls.grid">Grid</a> элемент в файле Window1.xaml. Удалить <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.controls.grid">Grid</a> элемент и добавьте несколько кнопок на Язык XAML странице введите или скопируйте и вставьте следующий выделенный код в Window1.xaml:</p>
<pre><code class="lang-xaml">&lt;Window x:Class=&quot;AnimatedButton.Window1&quot;  
  xmlns=&quot;http://schemas.microsoft.com/winfx/2006/xaml/presentation&quot;  
  xmlns:x=&quot;http://schemas.microsoft.com/winfx/2006/xaml&quot;  
  Title=&quot;AnimatedButton&quot; Height=&quot;300&quot; Width=&quot;300&quot;   
  Background=&quot;Black&quot;&gt;
  &lt;!-- Buttons arranged vertically inside a StackPanel. --&gt;
  &lt;StackPanel HorizontalAlignment=&quot;Left&quot;&gt;
      &lt;Button&gt;Button 1&lt;/Button&gt;
      &lt;Button&gt;Button 2&lt;/Button&gt;
      &lt;Button&gt;Button 3&lt;/Button&gt;
  &lt;/StackPanel&gt;  
&lt;/Window&gt;  
</code></pre>
<p>Нажмите клавишу F5 для запуска приложения; Вы должны увидеть набор кнопок, который выглядит как на следующем рисунке.</p>
<p><img src="media/custom-button-animatedbutton-1.gif" alt="Три основные кнопки" title="custom_button_AnimatedButton_1"></p>
<p>Теперь, когда вы создали основные кнопки, вы закончили работу в файле Window1.xaml. Остальная часть пошагового руководства посвящена файл app.xaml, определение стилей и шаблонов для кнопок.</p>
</li>
</ol>
<h2 id="set-basic-properties">Набор основных свойств</h2>
<p>Далее зададим некоторые свойства этих кнопок для управления макет и внешний вид кнопки. Вместо того чтобы задавать свойства кнопок по отдельности, будут использовать ресурсы для определения свойств кнопки для всего приложения. Ресурсы приложений похожи на внешние Каскадные таблицы стилей (CSS) для веб-страниц; Однако ресурсы являются гораздо эффективнее, чем Каскадные таблицы стилей (CSS), как можно будет увидеть в конце этого пошагового руководства. Дополнительные сведения о ресурсах см. в разделе <a href="../advanced/xaml-resources.html">ресурсы XAML</a>.</p>
<h4 id="to-use-styles-to-set-basic-properties-on-the-buttons">Чтобы использовать стили для задания основных свойств на кнопках</h4>
<ol>
<li><p><strong>Определение блока Application.Resources:</strong> Откройте файл app.xaml и добавьте выделенную ниже разметку в том случае, если он еще не выбран.</p>
<pre><code class="lang-xaml">&lt;Application x:Class=&quot;AnimatedButton.App&quot;  
  xmlns=&quot;http://schemas.microsoft.com/winfx/2006/xaml/presentation&quot;  
  xmlns:x=&quot;http://schemas.microsoft.com/winfx/2006/xaml&quot;  
  StartupUri=&quot;Window1.xaml&quot;  
  &gt;  
  &lt;Application.Resources&gt;
    &lt;!-- Resources for the entire application can be defined here. --&gt;
  &lt;/Application.Resources&gt;  
&lt;/Application&gt;  
</code></pre>
<p>Область ресурса определяется определяется ресурс. Определение ресурсов в <code>Application.Resources</code> в app.xaml файл позволяет ресурсов для использования в любом месте в приложении. Дополнительные сведения об определении области ресурсов, см. в разделе <a href="../advanced/xaml-resources.html">ресурсы XAML</a>.</p>
</li>
<li><p><strong>Создать стиль и определите значения основных свойств с ним:</strong> Добавьте следующую разметку для <code>Application.Resources</code> блока. Эта разметка создает <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.style">Style</a> , применимый ко всем кнопкам в приложении, устанавливая <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.frameworkelement.width">Width</a> кнопок на 90 и <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.frameworkelement.margin">Margin</a> до 10:</p>
<pre><code class="lang-xaml">&lt;Application.Resources&gt;  
  &lt;Style TargetType=&quot;Button&quot;&gt;
    &lt;Setter Property=&quot;Width&quot; Value=&quot;90&quot; /&gt;
    &lt;Setter Property=&quot;Margin&quot; Value=&quot;10&quot; /&gt;
  &lt;/Style&gt;  
&lt;/Application.Resources&gt;  
</code></pre>
<p><a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.style.targettype">TargetType</a> Свойство указывает, что стиль применяется ко всем объектам данного типа <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.controls.button">Button</a>. Каждый <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.setter">Setter</a> задает другое значение свойства для <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.style">Style</a>. Таким образом на этом этапе все кнопки в приложении имеет шириной равной 90 и границей 10.  Если нажать клавишу F5, чтобы запустить приложение, вы увидите следующее окно.</p>
<p><img src="media/custom-button-animatedbutton-2.gif" alt="Кнопки с шириной равной 90 и границей 10" title="custom_button_AnimatedButton_2"></p>
<p>Нет, можно сделать с помощью стилей, включая различные способы настройки целевых объектов, указание сложных значений свойств и даже использование стилей в качестве входных данных для других стилей гораздо больше. Более подробную информацию см. в разделе <a href="styling-and-templating.html">Стилизация и использование шаблонов</a>.</p>
</li>
<li><p><strong>Задайте значение свойства стиля для ресурса:</strong> Ресурсы позволяют легко повторное использование часто определяемых объектов и значений. Это особенно полезно для определения сложных значений, использование ресурсов, чтобы сделать код более удобным. Добавьте выделенную ниже разметку в файл app.xaml.</p>
<pre><code class="lang-xaml">&lt;Application.Resources&gt;  
  &lt;LinearGradientBrush x:Key=&quot;GrayBlueGradientBrush&quot; StartPoint=&quot;0,0&quot; EndPoint=&quot;1,1&quot;&gt;
    &lt;GradientStop Color=&quot;DarkGray&quot; Offset=&quot;0&quot; /&gt;
    &lt;GradientStop Color=&quot;#CCCCFF&quot; Offset=&quot;0.5&quot; /&gt;
    &lt;GradientStop Color=&quot;DarkGray&quot; Offset=&quot;1&quot; /&gt;
  &lt;/LinearGradientBrush&gt;  
  &lt;Style TargetType=&quot;{x:Type Button}&quot;&gt;  
    &lt;Setter Property=&quot;Background&quot; Value=&quot;{StaticResource GrayBlueGradientBrush}&quot; /&gt;  
    &lt;Setter Property=&quot;Width&quot; Value=&quot;80&quot; /&gt;  
    &lt;Setter Property=&quot;Margin&quot; Value=&quot;10&quot; /&gt;  
  &lt;/Style&gt;  
&lt;/Application.Resources&gt;  
</code></pre>
<p>Непосредственно под <code>Application.Resources</code> блок, вы создали ресурс называется «GrayBlueGradientBrush». Этот ресурс определяет горизонтальный градиент. Этот ресурс может использоваться в качестве значения свойства из любого места в приложении, в том числе внутри метода задания стиля кнопки для <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.controls.control.background">Background</a> свойство. Теперь все кнопки имеют <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.controls.control.background">Background</a> значение свойства для этого градиента.</p>
<p>Нажмите клавишу F5 для запуска приложения. Он должен выглядеть следующим образом.</p>
<p><img src="media/custom-button-animatedbutton-3.gif" alt="Кнопки с фоновым градиентом" title="custom_button_AnimatedButton_3"></p>
</li>
</ol>
<h2 id="create-a-template-that-defines-the-look-of-the-button">Создать шаблон, который определяет внешний вид кнопки</h2>
<p>В этом разделе создается шаблон, который настраивает внешний вид (presentation) кнопки. Представление кнопки состоит из нескольких объектов, включая прямоугольники и другие компоненты для предоставления уникального внешнего вида кнопки.</p>
<p>На данный момент элемент управления видом кнопок в приложении выполнялось с изменение свойств кнопки. Что делать, если вы хотите сделать кардинально изменить внешний вид кнопки? Шаблоны обеспечивают мощный управления представлением объекта. Поскольку шаблоны можно использовать в стилях, шаблон можно применить ко всем объектам, к которым применяется стиль, чтобы (в этом пошаговом руководстве, кнопки).</p>
<h4 id="to-use-the-template-to-define-the-look-of-the-button">Чтобы использовать шаблон для определения внешнего вида кнопки</h4>
<ol>
<li><p><strong>Настройка шаблона:</strong> Так как элементы управления, такие как <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.controls.button">Button</a> имеют <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.controls.control.template">Template</a> можно определить значение свойства шаблона так же, как и другие значения свойств, мы задали в <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.style">Style</a> с помощью <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.setter">Setter</a>. Добавьте выделенную ниже разметку в стиль кнопки.</p>
<pre><code class="lang-xaml">&lt;Application.Resources&gt;  
  &lt;LinearGradientBrush x:Key=&quot;GrayBlueGradientBrush&quot;   
    StartPoint=&quot;0,0&quot; EndPoint=&quot;1,1&quot;&gt;  
    &lt;GradientStop Color=&quot;DarkGray&quot; Offset=&quot;0&quot; /&gt;  
    &lt;GradientStop Color=&quot;#CCCCFF&quot; Offset=&quot;0.5&quot; /&gt;  
    &lt;GradientStop Color=&quot;DarkGray&quot; Offset=&quot;1&quot; /&gt;  
  &lt;/LinearGradientBrush&gt;  
  &lt;Style TargetType=&quot;{x:Type Button}&quot;&gt;  
    &lt;Setter Property=&quot;Background&quot; Value=&quot;{StaticResource GrayBlueGradientBrush}&quot; /&gt;  
    &lt;Setter Property=&quot;Width&quot; Value=&quot;80&quot; /&gt;  
    &lt;Setter Property=&quot;Margin&quot; Value=&quot;10&quot; /&gt;  
    &lt;Setter Property=&quot;Template&quot;&gt;
      &lt;Setter.Value&gt;
        &lt;!-- The button template is defined here. --&gt;
      &lt;/Setter.Value&gt;
    &lt;/Setter&gt;  
  &lt;/Style&gt;  
&lt;/Application.Resources&gt;  
</code></pre>
</li>
<li><p><strong>Презентация кнопку ALTER.</strong> На этом этапе необходимо определить шаблон. Добавьте выделенную ниже разметку. Эта разметка задает два <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.shapes.rectangle">Rectangle</a> элементов при помощи прямоугольника с закругленными углами, за которым следует <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.controls.dockpanel">DockPanel</a>. <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.controls.dockpanel">DockPanel</a> Используется для размещения <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.controls.contentpresenter">ContentPresenter</a> кнопки. Объект <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.controls.contentpresenter">ContentPresenter</a> отображает содержимое кнопки. В этом пошаговом руководстве содержимым является текст («Кнопку 1», «Button 2», «Button 3»). Все компоненты шаблона (прямоугольников и <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.controls.dockpanel">DockPanel</a>) располагаются внутри <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.controls.grid">Grid</a>.</p>
<pre><code class="lang-xaml">&lt;Setter.Value&gt;  
  &lt;ControlTemplate TargetType=&quot;Button&quot;&gt;
    &lt;Grid Width=&quot;{TemplateBinding Width}&quot; Height=&quot;{TemplateBinding Height}&quot; ClipToBounds=&quot;True&quot;&gt;
      &lt;!-- Outer Rectangle with rounded corners. --&gt;
      &lt;Rectangle x:Name=&quot;outerRectangle&quot; HorizontalAlignment=&quot;Stretch&quot; VerticalAlignment=&quot;Stretch&quot; Stroke=&quot;{TemplateBinding Background}&quot; RadiusX=&quot;20&quot; RadiusY=&quot;20&quot; StrokeThickness=&quot;5&quot; Fill=&quot;Transparent&quot; /&gt;
      &lt;!-- Inner Rectangle with rounded corners. --&gt;
      &lt;Rectangle x:Name=&quot;innerRectangle&quot; HorizontalAlignment=&quot;Stretch&quot; VerticalAlignment=&quot;Stretch&quot; Stroke=&quot;Transparent&quot; StrokeThickness=&quot;20&quot; Fill=&quot;{TemplateBinding Background}&quot; RadiusX=&quot;20&quot; RadiusY=&quot;20&quot; /&gt;
      &lt;!-- Present Content (text) of the button. --&gt;
      &lt;DockPanel Name=&quot;myContentPresenterDockPanel&quot;&gt;
        &lt;ContentPresenter x:Name=&quot;myContentPresenter&quot; Margin=&quot;20&quot; Content=&quot;{TemplateBinding  Content}&quot; TextBlock.Foreground=&quot;Black&quot; /&gt;
      &lt;/DockPanel&gt;
    &lt;/Grid&gt;
  &lt;/ControlTemplate&gt;  
&lt;/Setter.Value&gt;  
</code></pre>
<p>Нажмите клавишу F5 для запуска приложения. Он должен выглядеть следующим образом.</p>
<p><img src="media/custom-button-animatedbutton-4.gif" alt="" title="custom_button_AnimatedButton_4"></p>
</li>
<li><p><strong>Добавление прозрачности в шаблон:</strong> Далее добавим прозрачного стекла. Сначала создайте ресурсы, которые создают эффект градиента прозрачности. Добавьте эти градиентные ресурсы в любом месте в пределах <code>Application.Resources</code> блок:</p>
<pre><code class="lang-xaml">&lt;Application.Resources&gt;  
  &lt;GradientStopCollection x:Key=&quot;MyGlassGradientStopsResource&quot;&gt;
    &lt;GradientStop Color=&quot;WhiteSmoke&quot; Offset=&quot;0.2&quot; /&gt;     
    &lt;GradientStop Color=&quot;Transparent&quot; Offset=&quot;0.4&quot; /&gt;    
    &lt;GradientStop Color=&quot;WhiteSmoke&quot; Offset=&quot;0.5&quot; /&gt;     
    &lt;GradientStop Color=&quot;Transparent&quot; Offset=&quot;0.75&quot; /&gt;     
    &lt;GradientStop Color=&quot;WhiteSmoke&quot; Offset=&quot;0.9&quot; /&gt;     
    &lt;GradientStop Color=&quot;Transparent&quot; Offset=&quot;1&quot; /&gt;   
  &lt;/GradientStopCollection&gt;   
  &lt;LinearGradientBrush x:Key=&quot;MyGlassBrushResource&quot;    
    StartPoint=&quot;0,0&quot; EndPoint=&quot;1,1&quot; Opacity=&quot;0.75&quot;
    GradientStops=&quot;{StaticResource MyGlassGradientStopsResource}&quot; /&gt;  
&lt;!-- Styles and other resources below here. --&gt;  
</code></pre>
<p>Эти ресурсы используются в качестве <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.shapes.shape.fill">Fill</a> для прямоугольника, который вставляется в <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.controls.grid">Grid</a> шаблона кнопки. Добавьте выделенную ниже разметку в шаблон.</p>
<pre><code class="lang-xaml">&lt;Setter.Value&gt;  
  &lt;ControlTemplate TargetType=&quot;{x:Type Button}&quot;&gt;  
    &lt;Grid Width=&quot;{TemplateBinding Width}&quot; Height=&quot;{TemplateBinding Height}&quot;  
      ClipToBounds=&quot;True&quot;&gt;  

    &lt;!-- Outer Rectangle with rounded corners. --&gt;  
    &lt;Rectangle x:Name=&quot;outerRectangle&quot; HorizontalAlignment=&quot;Stretch&quot;   
      VerticalAlignment=&quot;Stretch&quot; Stroke=&quot;{TemplateBinding Background}&quot;   
      RadiusX=&quot;20&quot; RadiusY=&quot;20&quot; StrokeThickness=&quot;5&quot; Fill=&quot;Transparent&quot; /&gt;  

    &lt;!-- Inner Rectangle with rounded corners. --&gt;  
    &lt;Rectangle x:Name=&quot;innerRectangle&quot; HorizontalAlignment=&quot;Stretch&quot;   
      VerticalAlignment=&quot;Stretch&quot; Stroke=&quot;Transparent&quot; StrokeThickness=&quot;20&quot;   
      Fill=&quot;{TemplateBinding Background}&quot; RadiusX=&quot;20&quot; RadiusY=&quot;20&quot; /&gt;  

    &lt;!-- Glass Rectangle --&gt;     
    &lt;Rectangle x:Name=&quot;glassCube&quot; HorizontalAlignment=&quot;Stretch&quot;       
      VerticalAlignment=&quot;Stretch&quot;       
      StrokeThickness=&quot;2&quot; RadiusX=&quot;10&quot; RadiusY=&quot;10&quot; Opacity=&quot;0&quot;       
      Fill=&quot;{StaticResource MyGlassBrushResource}&quot;       
      RenderTransformOrigin=&quot;0.5,0.5&quot;&gt;
      &lt;Rectangle.Stroke&gt;         
        &lt;LinearGradientBrush StartPoint=&quot;0.5,0&quot; EndPoint=&quot;0.5,1&quot;&gt;
          &lt;LinearGradientBrush.GradientStops&gt;
            &lt;GradientStop Offset=&quot;0.0&quot; Color=&quot;LightBlue&quot; /&gt;
            &lt;GradientStop Offset=&quot;1.0&quot; Color=&quot;Gray&quot; /&gt;
          &lt;/LinearGradientBrush.GradientStops&gt;
        &lt;/LinearGradientBrush&gt;       
      &lt;/Rectangle.Stroke&gt;       
      &lt;!-- These transforms have no effect as they are declared here.
      The reason the transforms are included is to be targets
      for animation (see later). --&gt;       
      &lt;Rectangle.RenderTransform&gt;
        &lt;TransformGroup&gt;
          &lt;ScaleTransform /&gt;
          &lt;RotateTransform /&gt;
        &lt;/TransformGroup&gt;
      &lt;/Rectangle.RenderTransform&gt;
      &lt;!-- A BevelBitmapEffect is applied to give the button a &quot;Beveled&quot; look. --&gt;
      &lt;Rectangle.BitmapEffect&gt;
        &lt;BevelBitmapEffect /&gt;
      &lt;/Rectangle.BitmapEffect&gt;
    &lt;/Rectangle&gt;  

    &lt;!-- Present Text of the button. --&gt;  
    &lt;DockPanel Name=&quot;myContentPresenterDockPanel&quot;&gt;  
      &lt;ContentPresenter x:Name=&quot;myContentPresenter&quot; Margin=&quot;20&quot;   
        Content=&quot;{TemplateBinding  Content}&quot; TextBlock.Foreground=&quot;Black&quot; /&gt;  
    &lt;/DockPanel&gt;  
  &lt;/Grid&gt;  
&lt;/ControlTemplate&gt;  
&lt;/Setter.Value&gt;  
</code></pre>
<p>Обратите внимание, что <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.uielement.opacity">Opacity</a> прямоугольника с <code>x:Name</code> свойство «glassCube» задано значение 0, поэтому при запуске примера, вы не видите прозрачного прямоугольника в верхней части. Это так, как мы позже добавим триггеры в шаблон для взаимодействия пользователя с помощью кнопки. Тем не менее, можно увидеть, что кнопка выглядит, как теперь, изменив <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.uielement.opacity">Opacity</a> значение 1 и запуска приложения. См. следующий рисунок. Прежде чем переходить к следующему шагу, изменить <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.uielement.opacity">Opacity</a> значение 0.</p>
<p><img src="media/custom-button-animatedbutton-5.gif" alt="Настраиваемые кнопки, созданные с помощью XAML" title="custom_button_AnimatedButton_5"></p>
</li>
</ol>
<h2 id="create-button-interactivity">Создать интерактивную кнопку</h2>
<p>В этом разделе вы создадите свойство триггеров и триггеров событий для изменения значений свойств и выполнения анимации в ответ на действия пользователя, таких как Наведение указателя мыши на кнопку и нажав кнопку.</p>
<p>Простой способ добавления интерактивности (Наведение указателя мыши, оставьте мыши, нажмите кнопку и т. д.) является определение триггеров в шаблоне или стиле. Чтобы создать <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.trigger">Trigger</a>, вы определяете свойство «условие», такие как: Кнопки <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.uielement.ismouseover">IsMouseOver</a> значение свойства равно <code>true</code>. Затем предстоит методов задания (действия), которые выполняются, если условие триггера истинно.</p>
<h4 id="to-create-button-interactivity">Чтобы создать интерактивную кнопку</h4>
<ol>
<li><p><strong>Добавление триггеров шаблона:</strong> Добавьте выделенную разметку в шаблон.</p>
<pre><code class="lang-xaml">&lt;Setter.Value&gt;  
  &lt;ControlTemplate TargetType=&quot;{x:Type Button}&quot;&gt;  
    &lt;Grid Width=&quot;{TemplateBinding Width}&quot;   
      Height=&quot;{TemplateBinding Height}&quot; ClipToBounds=&quot;True&quot;&gt;  

      &lt;!-- Outer Rectangle with rounded corners. --&gt;  
      &lt;Rectangle x:Name=&quot;outerRectangle&quot; HorizontalAlignment=&quot;Stretch&quot;   
      VerticalAlignment=&quot;Stretch&quot; Stroke=&quot;{TemplateBinding Background}&quot;   
      RadiusX=&quot;20&quot; RadiusY=&quot;20&quot; StrokeThickness=&quot;5&quot; Fill=&quot;Transparent&quot; /&gt;  

      &lt;!-- Inner Rectangle with rounded corners. --&gt;  
      &lt;Rectangle x:Name=&quot;innerRectangle&quot; HorizontalAlignment=&quot;Stretch&quot;   
        VerticalAlignment=&quot;Stretch&quot; Stroke=&quot;Transparent&quot;   
        StrokeThickness=&quot;20&quot;   
        Fill=&quot;{TemplateBinding Background}&quot; RadiusX=&quot;20&quot; RadiusY=&quot;20&quot;   
      /&gt;  

      &lt;!-- Glass Rectangle --&gt;  
      &lt;Rectangle x:Name=&quot;glassCube&quot; HorizontalAlignment=&quot;Stretch&quot;  
        VerticalAlignment=&quot;Stretch&quot;  
        StrokeThickness=&quot;2&quot; RadiusX=&quot;10&quot; RadiusY=&quot;10&quot; Opacity=&quot;0&quot;  
        Fill=&quot;{StaticResource MyGlassBrushResource}&quot;  
        RenderTransformOrigin=&quot;0.5,0.5&quot;&gt;  
        &lt;Rectangle.Stroke&gt;  
          &lt;LinearGradientBrush StartPoint=&quot;0.5,0&quot; EndPoint=&quot;0.5,1&quot;&gt;  
            &lt;LinearGradientBrush.GradientStops&gt;  
              &lt;GradientStop Offset=&quot;0.0&quot; Color=&quot;LightBlue&quot; /&gt;  
              &lt;GradientStop Offset=&quot;1.0&quot; Color=&quot;Gray&quot; /&gt;  
            &lt;/LinearGradientBrush.GradientStops&gt;  
          &lt;/LinearGradientBrush&gt;  
        &lt;/Rectangle.Stroke&gt;  

        &lt;!-- These transforms have no effect as they   
             are declared here.   
             The reason the transforms are included is to be targets   
             for animation (see later). --&gt;  
        &lt;Rectangle.RenderTransform&gt;  
          &lt;TransformGroup&gt;  
            &lt;ScaleTransform /&gt;  
            &lt;RotateTransform /&gt;  
          &lt;/TransformGroup&gt;  
        &lt;/Rectangle.RenderTransform&gt;  

          &lt;!-- A BevelBitmapEffect is applied to give the button a   
               &quot;Beveled&quot; look. --&gt;  
        &lt;Rectangle.BitmapEffect&gt;  
          &lt;BevelBitmapEffect /&gt;  
        &lt;/Rectangle.BitmapEffect&gt;  
      &lt;/Rectangle&gt;  

      &lt;!-- Present Text of the button. --&gt;  
      &lt;DockPanel Name=&quot;myContentPresenterDockPanel&quot;&gt;  
        &lt;ContentPresenter x:Name=&quot;myContentPresenter&quot; Margin=&quot;20&quot;   
          Content=&quot;{TemplateBinding  Content}&quot; TextBlock.Foreground=&quot;Black&quot; /&gt;  
      &lt;/DockPanel&gt;  
    &lt;/Grid&gt;  

    &lt;ControlTemplate.Triggers&gt;       &lt;!-- Set action triggers for the buttons and define            what the button does in response to those triggers. --&gt;     &lt;/ControlTemplate.Triggers&gt;  
  &lt;/ControlTemplate&gt;  
&lt;/Setter.Value&gt;  
</code></pre>
</li>
<li><p><strong>Добавьте триггеры свойств:</strong> Добавьте выделенную разметку для <code>ControlTemplate.Triggers</code> блок:</p>
<pre><code class="lang-xaml">&lt;ControlTemplate.Triggers&gt;  

  &lt;!-- Set properties when mouse pointer is over the button. --&gt;   &lt;Trigger Property=&quot;IsMouseOver&quot; Value=&quot;True&quot;&gt;     &lt;!-- Below are three property settings that occur when the           condition is met (user mouses over button).  --&gt;     &lt;!-- Change the color of the outer rectangle when user           mouses over it. --&gt;     &lt;Setter Property =&quot;Rectangle.Stroke&quot; TargetName=&quot;outerRectangle&quot;       Value=&quot;{DynamicResource {x:Static SystemColors.HighlightBrushKey}}&quot; /&gt;     &lt;!-- Sets the glass opacity to 1, therefore, the           glass &quot;appears&quot; when user mouses over it. --&gt;     &lt;Setter Property=&quot;Rectangle.Opacity&quot; Value=&quot;1&quot; TargetName=&quot;glassCube&quot; /&gt;     &lt;!-- Makes the text slightly blurry as though you           were looking at it through blurry glass. --&gt;     &lt;Setter Property=&quot;ContentPresenter.BitmapEffect&quot;        TargetName=&quot;myContentPresenter&quot;&gt;       &lt;Setter.Value&gt;         &lt;BlurBitmapEffect Radius=&quot;1&quot; /&gt;       &lt;/Setter.Value&gt;     &lt;/Setter&gt;   &lt;/Trigger&gt;  

&lt;ControlTemplate.Triggers/&gt;  
</code></pre>
<p>Нажмите клавишу F5, чтобы запустить приложение и увидеть результат, при выполнении указатель мыши над кнопками.</p>
</li>
<li><p><strong>Добавление триггера фокус:</strong> Далее мы добавим некоторые аналогичные методы задания для обработки случая, когда в фокусе кнопки (например, после ее нажатия).</p>
<pre><code class="lang-xaml">&lt;ControlTemplate.Triggers&gt;  

  &lt;!-- Set properties when mouse pointer is over the button. --&gt;  
  &lt;Trigger Property=&quot;IsMouseOver&quot; Value=&quot;True&quot;&gt;  

    &lt;!-- Below are three property settings that occur when the   
         condition is met (user mouses over button).  --&gt;  
    &lt;!-- Change the color of the outer rectangle when user          mouses over it. --&gt;  
    &lt;Setter Property =&quot;Rectangle.Stroke&quot; TargetName=&quot;outerRectangle&quot;  
      Value=&quot;{DynamicResource {x:Static SystemColors.HighlightBrushKey}}&quot; /&gt;  

    &lt;!-- Sets the glass opacity to 1, therefore, the          glass &quot;appears&quot; when user mouses over it. --&gt;  
    &lt;Setter Property=&quot;Rectangle.Opacity&quot; Value=&quot;1&quot;       TargetName=&quot;glassCube&quot; /&gt;  

    &lt;!-- Makes the text slightly blurry as though you were          looking at it through blurry glass. --&gt;  
    &lt;Setter Property=&quot;ContentPresenter.BitmapEffect&quot;       TargetName=&quot;myContentPresenter&quot;&gt;  
      &lt;Setter.Value&gt;  
        &lt;BlurBitmapEffect Radius=&quot;1&quot; /&gt;  
      &lt;/Setter.Value&gt;  
    &lt;/Setter&gt;  
  &lt;/Trigger&gt;  
  &lt;!-- Set properties when button has focus. --&gt;   &lt;Trigger Property=&quot;IsFocused&quot; Value=&quot;true&quot;&gt;     &lt;Setter Property=&quot;Rectangle.Opacity&quot; Value=&quot;1&quot;       TargetName=&quot;glassCube&quot; /&gt;     &lt;Setter Property=&quot;Rectangle.Stroke&quot; TargetName=&quot;outerRectangle&quot;       Value=&quot;{DynamicResource {x:Static SystemColors.HighlightBrushKey}}&quot; /&gt;     &lt;Setter Property=&quot;Rectangle.Opacity&quot; Value=&quot;1&quot; TargetName=&quot;glassCube&quot; /&gt;   &lt;/Trigger&gt;  

&lt;/ControlTemplate.Triggers&gt;  
</code></pre>
<p>Нажмите клавишу F5, чтобы запустить приложение и щелкнуть одну из кнопок. Обратите внимание на то, что кнопка остается выделенной, после нажатия, так как он по-прежнему имеет фокус. Если щелкнуть еще одну кнопку &quot;Создать&quot; получает фокус, хотя его утрачивает последним.</p>
</li>
<li><p><strong>Добавление анимации для</strong> <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.uielement.mouseenter">MouseEnter</a> <strong>и</strong> <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.uielement.mouseleave">MouseLeave</a> <strong>:</strong> Далее мы добавим некоторые анимаций в триггерах. Добавьте следующую разметку в любое место <code>ControlTemplate.Triggers</code> блока.</p>
<pre><code class="lang-xaml">&lt;!-- Animations that start when mouse enters and leaves button. --&gt;  
&lt;EventTrigger RoutedEvent=&quot;Mouse.MouseEnter&quot;&gt;  
  &lt;EventTrigger.Actions&gt;  
    &lt;BeginStoryboard Name=&quot;mouseEnterBeginStoryboard&quot;&gt;  
      &lt;Storyboard&gt;  
      &lt;!-- This animation makes the glass rectangle shrink in the X direction. --&gt;  
        &lt;DoubleAnimation Storyboard.TargetName=&quot;glassCube&quot;   
          Storyboard.TargetProperty=  
          &quot;(Rectangle.RenderTransform).(TransformGroup.Children)[0].(ScaleTransform.ScaleX)&quot;  
          By=&quot;-0.1&quot; Duration=&quot;0:0:0.5&quot; /&gt;  
        &lt;!-- This animation makes the glass rectangle shrink in the Y direction. --&gt;  
        &lt;DoubleAnimation  
        Storyboard.TargetName=&quot;glassCube&quot;   
          Storyboard.TargetProperty=  
          &quot;(Rectangle.RenderTransform).(TransformGroup.Children)[0].(ScaleTransform.ScaleY)&quot;   
          By=&quot;-0.1&quot; Duration=&quot;0:0:0.5&quot; /&gt;  
      &lt;/Storyboard&gt;  
    &lt;/BeginStoryboard&gt;  
  &lt;/EventTrigger.Actions&gt;  
&lt;/EventTrigger&gt;  
&lt;EventTrigger RoutedEvent=&quot;Mouse.MouseLeave&quot;&gt;  
  &lt;EventTrigger.Actions&gt;  
    &lt;!-- Stopping the storyboard sets all animated properties back to default. --&gt;  
    &lt;StopStoryboard BeginStoryboardName=&quot;mouseEnterBeginStoryboard&quot; /&gt;  
  &lt;/EventTrigger.Actions&gt;  
&lt;/EventTrigger&gt;  
</code></pre>
<p>Прозрачный прямоугольник уменьшается, когда указатель мыши оказывается над кнопкой и возвращает в исходное состояние, когда указатель покидает.</p>
<p>Существуют две анимации, которые запускаются при наведении указателя мыши на кнопку (<a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.uielement.mouseenter">MouseEnter</a> события). Эти анимации сжимают прозрачный прямоугольник по оси X и Y. Обратите внимание на <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.animation.doubleanimation">DoubleAnimation</a> элементов — <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.animation.timeline.duration">Duration</a> и <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.animation.doubleanimation.by">By</a>. <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.animation.timeline.duration">Duration</a> Указывает, что анимация возникает через полсекунды, и <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.animation.doubleanimation.by">By</a> указывает, что прозрачный элемент сжимается на 10%.</p>
<p>Второй триггер события (<a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.uielement.mouseleave">MouseLeave</a>) просто останавливает первое из них. При остановке <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.animation.storyboard">Storyboard</a>, все анимированные свойства возвращаются к значениям по умолчанию. Таким образом когда пользователь перемещает указатель мыши за границы кнопки, кнопки возвращается так, как было до перемещения указателя мыши на кнопку. Дополнительные сведения об анимации см. в разделе <a href="../graphics-multimedia/animation-overview.html">Общие сведения об анимации</a>.</p>
</li>
<li><p><strong>Добавление анимации для при нажатии кнопки:</strong> Последним шагом является добавление триггера для, когда пользователь нажимает кнопку. Добавьте следующую разметку в любое место <code>ControlTemplate.Triggers</code> блок:</p>
<pre><code class="lang-xaml">&lt;!-- Animation fires when button is clicked, causing glass to spin.  --&gt;  
&lt;EventTrigger RoutedEvent=&quot;Button.Click&quot;&gt;  
  &lt;EventTrigger.Actions&gt;  
    &lt;BeginStoryboard&gt;  
      &lt;Storyboard&gt;  
        &lt;DoubleAnimation Storyboard.TargetName=&quot;glassCube&quot;   
          Storyboard.TargetProperty=  
          &quot;(Rectangle.RenderTransform).(TransformGroup.Children)[1].(RotateTransform.Angle)&quot;   
          By=&quot;360&quot; Duration=&quot;0:0:0.5&quot; /&gt;  
      &lt;/Storyboard&gt;  
    &lt;/BeginStoryboard&gt;  
  &lt;/EventTrigger.Actions&gt;  
&lt;/EventTrigger&gt;  
</code></pre>
<p>Нажмите клавишу F5, чтобы запустить приложение и щелкните одну из кнопок. При нажатии кнопки прозрачный прямоугольник повернется вокруг.</p>
</li>
</ol>
<h2 id="summary">Сводка</h2>
<p>В этом пошаговом руководстве вы выполнили следующие упражнения:</p>
<ul>
<li><p>Целевые <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.style">Style</a> тип объекта (<a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.controls.button">Button</a>).</p>
</li>
<li><p>Управление основными свойствами всего приложения с помощью кнопок на <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.style">Style</a>.</p>
</li>
<li><p>Созданные ресурсы, такие как градиенты, для использования для значений свойств <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.style">Style</a> методы задания.</p>
</li>
<li><p>Настройка внешнего вида кнопки в всего приложения можно применить шаблон к кнопкам.</p>
</li>
<li><p>Настройка поведения для кнопок в ответ на действия пользователя (таких как <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.uielement.mouseenter">MouseEnter</a>, <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.uielement.mouseleave">MouseLeave</a>, и <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.controls.primitives.buttonbase.click">Click</a>), которые включены эффекты анимации.</p>
</li>
</ul>
<h2 id="see-also">См. также</h2>
<ul>
<li><a href="walkthrough-create-a-button-by-using-microsoft-expression-blend.html">Создание кнопки с помощью Microsoft Expression Blend</a></li>
<li><a href="styling-and-templating.html">Стилизация и использование шаблонов</a></li>
<li><a href="../graphics-multimedia/animation-overview.html">Общие сведения об эффектах анимации</a></li>
<li><a href="../graphics-multimedia/painting-with-solid-colors-and-gradients-overview.html">Общие сведения о закраске сплошным цветом и градиентом</a></li>
<li><a href="../graphics-multimedia/bitmap-effects-overview.html">Общие сведения об эффектах для точечных рисунков</a></li>
</ul>
</article>
          </div>
          
          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">
              <div class="contribution">
                <ul class="nav">
                </ul>
              </div>
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
              <!-- <p><a class="back-to-top" href="#top">Back to top</a><p> -->
              </nav>
            </div>
          </div>
        </div>
      </div>
      
      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right">
              <a href="#top">Back to top</a>
            </span>
            <span><a href="https://github.com/MSDN-WhiteKnight/dotnet-docs-ru">Неофициальная документация по .NET на русском языке</a>. Лицензия: <a href="https://github.com/MSDN-WhiteKnight/dotnet-docs-ru/blob/main/LICENSE">CC-BY 4.0</a>. Основано на <a href="https://docs.microsoft.com/ru-ru/dotnet/">документации по .NET с Microsoft Docs</a><br>Generated by <strong>DocFX</strong></span><script type="text/javascript">(function(m,e,t,r,i,k,a){m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};m[i].l=1*new Date();k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)})(window, document, "script", "https://mc.yandex.ru/metrika/tag.js", "ym");ym(65150713, "init", {clickmap:true,trackLinks:true,accurateTrackBounce:true});</script><noscript><div><img src="https://mc.yandex.ru/watch/65150713" style="position:absolute; left:-9999px;" alt=""></div></noscript>
            
          </div>
        </div>
      </footer>
    </div>
    
    <script type="text/javascript" src="../../../styles/docfx.vendor.js"></script>
    <script type="text/javascript" src="../../../styles/docfx.js"></script>
    <script type="text/javascript" src="../../../styles/main.js"></script>
  </body>
</html>
