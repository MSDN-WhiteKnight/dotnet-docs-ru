<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>&#1057;&#1090;&#1080;&#1083;&#1080;&#1079;&#1072;&#1094;&#1080;&#1103; &#1080; &#1080;&#1089;&#1087;&#1086;&#1083;&#1100;&#1079;&#1086;&#1074;&#1072;&#1085;&#1080;&#1077; &#1096;&#1072;&#1073;&#1083;&#1086;&#1085;&#1086;&#1074; | &#1053;&#1077;&#1086;&#1092;&#1080;&#1094;&#1080;&#1072;&#1083;&#1100;&#1085;&#1072;&#1103; &#1076;&#1086;&#1082;&#1091;&#1084;&#1077;&#1085;&#1090;&#1072;&#1094;&#1080;&#1103; .NET </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="&#1057;&#1090;&#1080;&#1083;&#1080;&#1079;&#1072;&#1094;&#1080;&#1103; &#1080; &#1080;&#1089;&#1087;&#1086;&#1083;&#1100;&#1079;&#1086;&#1074;&#1072;&#1085;&#1080;&#1077; &#1096;&#1072;&#1073;&#1083;&#1086;&#1085;&#1086;&#1074; | &#1053;&#1077;&#1086;&#1092;&#1080;&#1094;&#1080;&#1072;&#1083;&#1100;&#1085;&#1072;&#1103; &#1076;&#1086;&#1082;&#1091;&#1084;&#1077;&#1085;&#1090;&#1072;&#1094;&#1080;&#1103; .NET ">
    <meta name="generator" content="docfx 2.40.12.0">
    
    <link rel="shortcut icon" href="../../../favicon.ico">
    <link rel="stylesheet" href="../../../styles/docfx.vendor.css">
    <link rel="stylesheet" href="../../../styles/docfx.css">
    <link rel="stylesheet" href="../../../styles/main.css">
    <meta property="docfx:navrel" content="../../../toc.html">
    <meta property="docfx:tocrel" content="toc.html">
    
    
    
  </head>
  <body data-spy="scroll" data-target="#affix" data-offset="120">
    <div id="wrapper">
      <header>
        
        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              
              <a class="navbar-brand" href="../../../index.html">
                <img id="logo" class="svg" src="../../../logo.svg" alt="">
              </a>
            </div>
            <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="search">
                <div class="form-group">
                  <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                </div>
              </form>
            </div>
          </div>
        </nav>
        
        <div class="subnav navbar navbar-default">
          <div class="container hide-when-search" id="breadcrumb">
            <ul class="breadcrumb">
              <li></li>
            </ul>
          </div>
        </div>
      </header>
      <div role="main" class="container body-content hide-when-search">
        
        <div class="sidenav hide-when-search">
          <a class="btn toc-toggle collapse" data-toggle="collapse" href="#sidetoggle" aria-expanded="false" aria-controls="sidetoggle">Show / Hide Table of Contents</a>
          <div class="sidetoggle collapse" id="sidetoggle">
            <div id="sidetoc"></div>
          </div>
        </div>
        <div class="article row grid-right">
          <div class="col-md-10">
            <article class="content wrap" id="_content" data-uid="">
<h1 id="styling-and-templating">Стилизация и использование шаблонов</h1>

<p>Windows Presentation Foundation (WPF) Стилизация и использование шаблонов относятся к набору возможностей (стили, шаблоны, триггеры и раскадровки), которые позволяют разработчикам и дизайнерам создавать визуально привлекательные эффекты и создавать согласованный внешний вид своего продукта. Несмотря на то что разработчики и дизайнеры могут создавать внешний вид отдельно для каждого приложения, надежная модель стилизации и использования шаблонов необходима для поддержки и совместного использования внешнего вида как внутри одного приложения, так и в ряде приложений. Windows Presentation Foundation (WPF) предоставляет такую модель.</p>
<p>Еще одной возможностью модели стилизации WPF является разделение представления и логики. Это означает, что дизайнеры могут создавать внешний вид приложения только с помощью XAML в то же самое время, когда разработчики работают над логикой программы, используя языки C# или Visual Basic.</p>
<p>В этом обзоре основное внимание уделяется аспектам стилизации и использования шаблонов приложения и не рассматриваются концепции привязки данных. Подробнее о привязке данных см. в разделе <a href="../data/data-binding-overview.html">Общие сведения о привязке данных</a>.</p>
<p>Также важно иметь представление о ресурсах, которые позволяют повторно использовать стили и шаблоны. Дополнительные сведения о ресурсах см. в разделе <a href="../advanced/xaml-resources.html">Ресурсы XAML</a>.</p>
<p><a name="styling_and_templating_sample"></a></p>
<h2 id="styling-and-templating-sample">Пример стилизации и использования шаблонов</h2>
<p>В примерах кода, приведенных в этом обзоре, используется простой пример фото, показанный ниже:</p>
<p><img src="media/stylingintro-triggers.png" alt="Стилизированный ListView" title="StylingIntro_triggers"></p>
<p>В этом простом примере фото стилизация и шаблоны применяются для создания привлекательного интерфейса. Пример содержит два <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.controls.textblock">TextBlock</a> элементов и <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.controls.listbox">ListBox</a> элемента управления, привязанный к списку изображений. Полный пример см. в разделе <a href="https://github.com/Microsoft/WPF-Samples/tree/master/Styles%20&amp;%20Templates/IntroToStylingAndTemplating">Вводная часть примера стилизации и использования шаблонов</a>.</p>
<p><a name="styling_basics"></a></p>
<h2 id="style-basics">Основы стилей</h2>
<p>Можно представить себе <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.style">Style</a> как удобный способ применения набора значений свойств к более чем одного элемента. Например, рассмотрим следующие <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.controls.textblock">TextBlock</a> элементов и их внешний вид по умолчанию:</p>
<div class="WARNING">
<h5>Warning</h5>
<p>It looks like the sample you are looking for does not exist.</p>
</div>
<p><img src="media/stylingintro-textblocksbefore.PNG" alt="Снимок экрана стилей" title="StylingIntro_TextBlocksBefore"></p>
<p>Можно изменить внешний вид по умолчанию, задав свойства, такие как <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.controls.control.fontsize">FontSize</a> и <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.controls.control.fontfamily">FontFamily</a>, на каждом <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.controls.textblock">TextBlock</a> напрямую. Тем не менее если вы хотите, чтобы ваши <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.controls.textblock">TextBlock</a> элементов совместно использовать некоторые свойства, можно создать <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.style">Style</a> в <code>Resources</code> части вашей XAML файл, как показано ниже:</p>
<div class="WARNING">
<h5>Warning</h5>
<p>It looks like the sample you are looking for does not exist.</p>
</div><div class="WARNING">
<h5>Warning</h5>
<p>It looks like the sample you are looking for does not exist.</p>
</div><div class="WARNING">
<h5>Warning</h5>
<p>It looks like the sample you are looking for does not exist.</p>
</div>
<p>При задании <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.style.targettype">TargetType</a> стиля <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.controls.textblock">TextBlock</a> , стиль применяется ко всем <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.controls.textblock">TextBlock</a> элементы в окне.</p>
<p>Теперь <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.controls.textblock">TextBlock</a> элементов будет выглядеть следующим образом:</p>
<p><img src="media/stylingintro-textblocksbasestyle.PNG" alt="Снимок экрана стилей" title="StylingIntro_TextBlocksBaseStyle"></p>
<h3 id="extending-styles">Расширение стилей</h3>
<p>Возможно, вам необходимо два <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.controls.textblock">TextBlock</a> элементы, чтобы совместно использовать некоторые свойства, такие как <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.controls.control.fontfamily">FontFamily</a> и выровнять по центру <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.frameworkelement.horizontalalignment">HorizontalAlignment</a>, и при этом текст «Мои рисунки» обладал некоторыми дополнительными свойствами. Это можно сделать, создав новый стиль на основе первого стиля, как показано ниже:</p>
<div class="WARNING">
<h5>Warning</h5>
<p>It looks like the sample you are looking for does not exist.</p>
</div><div class="WARNING">
<h5>Warning</h5>
<p>It looks like the sample you are looking for does not exist.</p>
</div><div class="WARNING">
<h5>Warning</h5>
<p>It looks like the sample you are looking for does not exist.</p>
</div>
<p>Обратите внимание, что предыдущий стиль получил атрибут <code>x:Key</code>. Чтобы применить стиль, вы установите <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.frameworkelement.style">Style</a> свойство вашей <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.controls.textblock">TextBlock</a> для <code>x:Key</code> значение, как показано ниже:</p>
<div class="WARNING">
<h5>Warning</h5>
<p>It looks like the sample you are looking for does not exist.</p>
</div>
<p>Это <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.controls.textblock">TextBlock</a> теперь имеет стиль <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.frameworkelement.horizontalalignment">HorizontalAlignment</a> значение <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.horizontalalignment#System_Windows_HorizontalAlignment_Center">Center</a>, <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.controls.textblock.fontfamily">FontFamily</a> значение <code>Comic Sans MS</code>, <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.controls.textblock.fontsize">FontSize</a> значение 26 и <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.controls.textblock.foreground">Foreground</a> значение <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.lineargradientbrush">LinearGradientBrush</a> показано в примере. Обратите внимание, что этот параметр переопределяет <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.controls.control.fontsize">FontSize</a> значение базового стиля. Если имеется более одного <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.setter">Setter</a> одного свойства <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.style">Style</a>, <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.setter">Setter</a> то есть объявленный последнего имеет больший приоритет.</p>
<p>Ниже показано <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.controls.textblock">TextBlock</a> элементов будет выглядеть так:</p>
<p><img src="media/stylingintro-textblocks.png" alt="Стилизированный TextBlocks" title="StylingIntro_TextBlocks"></p>
<p>Это <code>TitleText</code> стиля расширяет стиль, который был создан для <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.controls.textblock">TextBlock</a> типа. Можно также расширить стиль, имеющий атрибут <code>x:Key</code>, используя значение атрибута <code>x:Key</code>. Например, см. пример для <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.style.basedon">BasedOn</a> свойство.</p>
<h3 id="relationship-of-the-targettype-property-and-the-xkey-attribute">Связь свойства TargetType и атрибута x:Key</h3>
<p>Как показано в первом примере, установка <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.style.targettype">TargetType</a> свойства <code>TextBlock</code> без присвоения стилю <code>x:Key</code> вызывает стиль, применяемый ко всем <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.controls.textblock">TextBlock</a> элементов. В этом случае для <code>x:Key</code> неявно устанавливается значение <code>{x:Type TextBlock}</code>. Это означает, что если явно задать <code>x:Key</code> значение, отличное от <code>{x:Type TextBlock}</code>, <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.style">Style</a> применяется не ко всем <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.controls.textblock">TextBlock</a> элементов автоматически. Вместо этого необходимо применить стиль (с помощью <code>x:Key</code> значение) для <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.controls.textblock">TextBlock</a> элементы явным образом. Если стиль находится в разделе ресурсов и не устанавливайте <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.style.targettype">TargetType</a> свойство в стиле, то необходимо предоставить <code>x:Key</code>.</p>
<p>Помимо предоставления значение по умолчанию для <code>x:Key</code>, <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.style.targettype">TargetType</a> свойство задает тип, к которому применяются свойства метода задания. Если вы не укажете <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.style.targettype">TargetType</a>, необходимо уточнить свойства в вашей <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.setter">Setter</a> объектов с именем класса, используя синтаксис <code>Property=&quot;ClassName.Property&quot;</code>. Например, вместо того чтобы задавать <code>Property=&quot;FontSize&quot;</code>, необходимо задать <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.setter.property">Property</a> для <code>&quot;TextBlock.FontSize&quot;</code> или <code>&quot;Control.FontSize&quot;</code>.</p>
<p>Также обратите внимание, что многие элементы управления WPF являются сочетанием других элементов управления WPF. Если создать стиль, который применяется ко всем элементам управления типа, можно получить непредвиденные результаты. Например, если создать стиль, предназначенный <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.controls.textblock">TextBlock</a> введите в <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.window">Window</a>, стиль применяется ко всем <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.controls.textblock">TextBlock</a> элементов управления в окне, даже если <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.controls.textblock">TextBlock</a> является частью другого элемента управления, такие как <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.controls.listbox">ListBox</a>.</p>
<h3 id="styles-and-resources">Стили и ресурсы</h3>
<p>Можно использовать стиль для любого элемента, который является производным от <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.frameworkelement">FrameworkElement</a> или <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.frameworkcontentelement">FrameworkContentElement</a>. Наиболее распространенный способ объявления стиля — это его объявление в качестве ресурса в разделе <code>Resources</code> файла XAML, как было показано в предыдущих примерах. Так как стили являются ресурсами, для них действуют те же правила области видимости, которые применяются ко всем ресурсам. Область, в которой объявлен стиль, влияет на область применения стиля. Например, если объявить стиль в корневом элементе файла XAML определения приложения, стиль может использоваться в любом месте приложения. Если вы создаете приложение навигации и объявляете стиль в одном из файлов XAML приложения, стиль можно будет использовать только в этом файле XAML. Подробнее о правилах видимости ресурсов см. в разделе <a href="../advanced/xaml-resources.html">Ресурсы XAML</a>.</p>
<p>Кроме того, дополнительные сведения о стилях и ресурсах можно найти в разделе <a href="#styling_themes">Совместно используемые ресурсы и темы</a> данного обзора.</p>
<h3 id="setting-styles-programmatically">Программная установка стилей</h3>
<p>Чтобы программным способом назначить именованный стиль элементу, Возьмите этот стиль из коллекции ресурсов и его назначение этого элемента <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.frameworkelement.style">Style</a> свойство. Обратите внимание, что элементы в коллекции ресурсов имеют тип <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.object">Object</a>. Таким образом, необходимо привести полученный стиль для <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.style">Style</a> перед назначением его <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.frameworkelement.style">Style</a> свойство. Например, чтобы задать определенный <code>TitleText</code> стиль над <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.controls.textblock">TextBlock</a> с именем <code>textblock1</code>, выполните следующие действия:</p>
<div class="WARNING">
<h5>Warning</h5>
<p>It looks like the sample you are looking for does not exist.</p>
</div><div class="WARNING">
<h5>Warning</h5>
<p>It looks like the sample you are looking for does not exist.</p>
</div>
<p>Обратите внимание, что после применения стиля он фиксируется и не может быть изменен. Если необходимо динамически изменить стиль, который уже был применен, нужно создать новый стиль для замены существующего. Дополнительные сведения см. в описании свойства <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.style.issealed">IsSealed</a>.</p>
<p>Можно создать объект, который выбирает стиль, который нужно применить, основываясь на собственной логике. Например, см. пример для <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.controls.styleselector">StyleSelector</a> класса.</p>
<p><a name="styling_binding_dynamicresource"></a></p>
<h3 id="bindings-dynamic-resources-and-event-handlers">Привязки, динамические ресурсы и обработчики событий</h3>
<p>Обратите внимание, что свойство <code>Setter.Value</code> можно использовать для задания <a href="../advanced/binding-markup-extension.html">привязки расширения разметки</a> или <a href="../advanced/dynamicresource-markup-extension.html">расширения разметки DynamicResource</a>. Дополнительные сведения см. в примерах для <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.setter.value">Setter.Value</a> свойство.</p>
<p>На данный момент этот обзор касается только использования методов задания для установки значений свойств. В стиле также можно задать обработчики событий. Дополнительные сведения см. в разделе <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.eventsetter">EventSetter</a>.</p>
<p><a name="styling_datatemplates"></a></p>
<h2 id="data-templates">Шаблоны данных</h2>
<p>В этом примере приложения есть <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.controls.listbox">ListBox</a> элемента управления, привязанный к списку фотографий:</p>
<div class="WARNING">
<h5>Warning</h5>
<p>It looks like the sample you are looking for does not exist.</p>
</div>
<p>Это <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.controls.listbox">ListBox</a> в данный момент выглядит следующим образом:</p>
<p><img src="media/stylingintro-listboxbefore.png" alt="ListBox до применения шаблона" title="StylingIntro_ListBoxBefore"></p>
<p>Большинство элементов управления имеют некое содержимое, и это содержимое часто поступает из данных, к которым осуществляется привязка. В этом примере такими данными является список фотографий. В WPF, использовании <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.datatemplate">DataTemplate</a> для определения визуального представления данных. По сути, что вы поместите в <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.datatemplate">DataTemplate</a> определяет вид данных в отображаемом приложении.</p>
<p>В нашем примере приложения каждый пользовательский объект <code>Photo</code> имеет свойство <code>Source</code> строкового типа, которое задает путь к файлу изображения. Сейчас объекты фотографий отображаются как пути к файлам.</p>
<p>Чтобы фотографии отображались как изображения, создании <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.datatemplate">DataTemplate</a> как ресурс:</p>
<div class="WARNING">
<h5>Warning</h5>
<p>It looks like the sample you are looking for does not exist.</p>
</div><div class="WARNING">
<h5>Warning</h5>
<p>It looks like the sample you are looking for does not exist.</p>
</div><div class="WARNING">
<h5>Warning</h5>
<p>It looks like the sample you are looking for does not exist.</p>
</div>
<p>Обратите внимание, что <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.datatemplate.datatype">DataType</a> очень похоже на свойство <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.style.targettype">TargetType</a> свойство <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.style">Style</a>. Если ваш <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.datatemplate">DataTemplate</a> находится в разделе ресурсов, при указании <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.datatemplate.datatype">DataType</a> свойство с типом и не назначаете ему <code>x:Key</code>, <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.datatemplate">DataTemplate</a> будет применяться при каждом отображении этого типа. У вас всегда есть возможность назначения <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.datatemplate">DataTemplate</a> с <code>x:Key</code> и затем задать его в качестве <code>StaticResource</code> для свойства, принимающие <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.datatemplate">DataTemplate</a> типы, такие как <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.controls.itemscontrol.itemtemplate">ItemTemplate</a> свойство или <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.controls.contentcontrol.contenttemplate">ContentTemplate</a> свойство.</p>
<p>По сути <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.datatemplate">DataTemplate</a> в приведенном выше примере определяет, что при имеется <code>Photo</code> объекта, он должен быть <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.controls.image">Image</a> в <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.controls.border">Border</a>. С этим <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.datatemplate">DataTemplate</a>, наше приложение теперь выглядит следующим образом:</p>
<p><img src="media/stylingintro-photosasimages.png" alt="Фотоизображение" title="StylingIntro_PhotosAsImages"></p>
<p>Модель использования шаблонов данных предоставляет и другие возможности. Например, при отображении данных коллекции, содержащей другие коллекции с помощью <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.controls.headereditemscontrol">HeaderedItemsControl</a> введите, например <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.controls.menu">Menu</a> или <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.controls.treeview">TreeView</a>, имеется <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.hierarchicaldatatemplate">HierarchicalDataTemplate</a>. Другой возможностью шаблонов данных является <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.controls.datatemplateselector">DataTemplateSelector</a>, который позволяет выбрать <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.datatemplate">DataTemplate</a> для использования на основе пользовательской логики. Дополнительные сведения см. в разделе <a href="../data/data-templating-overview.html">Общие сведения о шаблонах данных</a>, в котором более подробно рассматриваются различные возможности использования шаблонов данных.</p>
<p><a name="styling_controltemplates"></a></p>
<h2 id="control-templates">Шаблоны элементов управления</h2>
<p>В WPF, <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.controls.controltemplate">ControlTemplate</a> элемента управления определяет внешний вид элемента управления. Можно изменить структуру и внешний вид элемента управления, определив новый <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.controls.controltemplate">ControlTemplate</a> для элемента управления. Во многих случаях это является достаточно гибким средством, и вам не придется писать собственные пользовательские элементы управления. Подробнее см. в разделе <a href="customizing-the-appearance-of-an-existing-control.html">Настройка внешнего вида существующего элемента управления путем создания объекта ControlTemplate</a>.</p>
<p><a name="styling_triggers"></a></p>
<h2 id="triggers">Триггеры</h2>
<p>Триггер задает значения свойств или активирует различные действия (например, анимацию) при изменении значения свойства или при возникновении какого-либо события. <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.style">Style</a>, <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.controls.controltemplate">ControlTemplate</a>, и <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.datatemplate">DataTemplate</a> все имеют <code>Triggers</code> свойство, которое может содержать набор триггеров. Существуют различные типы триггеров.</p>
<h3 id="property-triggers">Триггеры свойств</h3>
<p>Объект <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.trigger">Trigger</a> , задает значения свойств или активирует действия на основе значения свойства, называется триггером свойства.</p>
<p>Чтобы продемонстрировать использование триггеров свойств, вы можете сделать каждую <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.controls.listboxitem">ListBoxItem</a> частично прозрачным, если он выбран. Следующий стиль устанавливает <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.uielement.opacity">Opacity</a> значение <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.controls.listboxitem">ListBoxItem</a> для <code>0.5</code>. Когда <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.controls.listboxitem.isselected">IsSelected</a> свойство <code>true</code>, но при этом <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.uielement.opacity">Opacity</a> присваивается <code>1.0</code>:</p>
<div class="WARNING">
<h5>Warning</h5>
<p>It looks like the sample you are looking for does not exist.</p>
</div><div class="WARNING">
<h5>Warning</h5>
<p>It looks like the sample you are looking for does not exist.</p>
</div>
<p>В этом примере используется <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.trigger">Trigger</a> для задания значения свойства, но Обратите внимание, что <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.trigger">Trigger</a> класс также имеет <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.triggerbase.enteractions">EnterActions</a> и <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.triggerbase.exitactions">ExitActions</a> свойства, позволяющие триггера для выполнения действия.</p>
<p>Обратите внимание, что <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.frameworkelement.maxheight">MaxHeight</a> свойство <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.controls.listboxitem">ListBoxItem</a> присваивается <code>75</code>. На следующем рисунке третий элемент является выбранным:</p>
<p><img src="media/stylingintro-triggers.png" alt="Стилизированный ListView" title="StylingIntro_triggers"></p>
<h3 id="eventtriggers-and-storyboards">Объекты EventTrigger и раскадровки</h3>
<p>Другой тип триггера — <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.eventtrigger">EventTrigger</a>, которая запускает набор действий в зависимости от возникновения события. Например, следующая <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.eventtrigger">EventTrigger</a> объекта задают, когда указатель мыши попадает <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.controls.listboxitem">ListBoxItem</a>, <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.frameworkelement.maxheight">MaxHeight</a> анимирует свойство в значение <code>90</code> через <code>0.2</code> второй период. Когда указатель мыши перемещается за пределы этого элемента, свойство возвращается к исходному значению в течение <code>1</code> сек. Обратите внимание на то, как это не требуется указывать <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.animation.doubleanimation.to">To</a> значение <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.contentelement.mouseleave">MouseLeave</a> анимации. Анимация сама может отслеживать исходное значение.</p>
<div class="WARNING">
<h5>Warning</h5>
<p>It looks like the sample you are looking for does not exist.</p>
</div>
<p>Подробнее см. в разделе <a href="../graphics-multimedia/storyboards-overview.html">Общие сведения о раскадровках</a>.</p>
<p>На следующем рисунке указатель мыши указывает на третий элемент:</p>
<p><img src="media/stylingintro-eventtriggers.png" alt="Снимок экрана стилей" title="StylingIntro_EventTriggers"></p>
<h3 id="multitriggers-datatriggers-and-multidatatriggers">Объекты MultiTrigger, DataTrigger и MultiDataTrigger</h3>
<p>В дополнение к <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.trigger">Trigger</a> и <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.eventtrigger">EventTrigger</a>, существуют другие типы триггеров. <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.multitrigger">MultiTrigger</a> позволяет задавать значения свойств на основе нескольких условий. Использовании <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.datatrigger">DataTrigger</a> и <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.multidatatrigger">MultiDataTrigger</a> Если это свойство условия имеет привязкой к данным.</p>
<p><a name="styling_themes"></a></p>
<h2 id="shared-resources-and-themes">Общие ресурсы и темы</h2>
<p>Типичное приложение Windows Presentation Foundation (WPF) может иметь несколько ресурсов пользовательского интерфейса (UI), которые применяются в рамках всего приложения. В совокупности этот набор ресурсов можно рассматривать как тему приложения. Windows Presentation Foundation (WPF) обеспечивает поддержку для упаковки ресурсов пользовательского интерфейса как тему с помощью словаря ресурсов, который инкапсулируется как <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.resourcedictionary">ResourceDictionary</a> класса.</p>
<p>Темы Windows Presentation Foundation (WPF) определяются с помощью механизмов стилизации и шаблонов, предоставляющей Windows Presentation Foundation (WPF) для настройки отображения любого элемента.</p>
<p>Ресурсы темы Windows Presentation Foundation (WPF), хранятся в словарях внедренных ресурсов. Эти словари ресурсов должны быть внедрены в подписанную сборку и могут быть внедрены либо в ту же сборку, что и сам код, либо в параллельную сборку. В случае библиотеки PresentationFramework.dll, сборку, которая содержит элементы управления Windows Presentation Foundation (WPF), ресурсы тем находятся в ряде side-by-side сборок.</p>
<p>Тема становится последним местом поиска стиля элемента. Как правило, процесс поиска начинается с прохода вверх по дереву элементов в поисках соответствующего ресурса, затем выполняется поиск в коллекции ресурсов приложения и, наконец, в последнюю очередь осуществляется запрос к системе. Это дает разработчикам приложений возможность переопределить стиль для любого объекта на уровне дерева или приложения до достижения темы.</p>
<p>Словари ресурсов, оформленные в виде отдельных файлов, позволяют повторно использовать тему в нескольких приложениях. Также можно создать изменяемые темы, определив несколько словарей ресурсов, которые обеспечивают одни и те же типы ресурсов, но с разными значениями. Переопределение этих стилей или других ресурсов на уровне приложения является рекомендуемым способом смены тем приложения.</p>
<p>Для совместного использования набора ресурсов, включая стили и шаблоны в приложениях, можно создать XAML файл и определить <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.resourcedictionary">ResourceDictionary</a>. Например, посмотрите на следующую иллюстрацию — часть <a href="https://github.com/Microsoft/WPF-Samples/tree/master/Styles%20&amp;%20Templates/IntroToStylingAndTemplating">примера &quot;Стилизация с помощью ControlTemplate&quot;</a>:</p>
<p><img src="media/stylingintro-controltemplateexamples.png" alt="Примеры шаблонов элементов управления" title="StylingIntro_ControlTemplateExamples"></p>
<p>Если взглянуть на файлы XAML в примере, можно заметить, что все файлы имеют следующий код:</p>
<pre><code class="lang-xaml" name="ControlTemplateExamples#MergedDictionaries">&lt;ResourceDictionary.MergedDictionaries&gt;
  &lt;ResourceDictionary Source=&quot;Shared.xaml&quot; /&gt;
&lt;/ResourceDictionary.MergedDictionaries&gt;
</code></pre>
<p>Это совместное использование <code>shared.xaml</code>, который определяет <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.resourcedictionary">ResourceDictionary</a> , содержащий набор стилей и ресурсов кисти, позволяющий элементам управления, в примере, чтобы иметь согласованный вид.</p>
<p>Подробнее см. в разделе <a href="../advanced/merged-resource-dictionaries.html">Объединенные словари ресурсов</a>.</p>
<p>Если вы создаете тему для пользовательского элемента управления, ознакомьтесь с разделом &quot;Внешняя библиотека элементов управления&quot; в материале <a href="control-authoring-overview.html">Общие сведения о разработке элементов управления</a>.</p>
<h2 id="see-also">См. также</h2>
<ul>
<li><a href="../app-development/pack-uris-in-wpf.html">URI типа &quot;pack&quot; в WPF</a></li>
<li><a href="how-to-find-controltemplate-generated-elements.html">Практическое руководство. Поиск элемента, созданного шаблоном ControlTemplate</a></li>
<li><a href="../data/how-to-find-datatemplate-generated-elements.html">Поиск элементов, созданных с использованием шаблона DataTemplate</a></li>
</ul>
</article>
          </div>
          
          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">
              <div class="contribution">
                <ul class="nav">
                </ul>
              </div>
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
              <!-- <p><a class="back-to-top" href="#top">Back to top</a><p> -->
              </nav>
            </div>
          </div>
        </div>
      </div>
      
      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right">
              <a href="#top">Back to top</a>
            </span>
            <span><a href="https://github.com/MSDN-WhiteKnight/dotnet-docs-ru">Неофициальная документация по .NET на русском языке</a>. Лицензия: <a href="https://github.com/MSDN-WhiteKnight/dotnet-docs-ru/blob/main/LICENSE">CC-BY 4.0</a>. Основано на <a href="https://docs.microsoft.com/ru-ru/dotnet/">документации по .NET с Microsoft Docs</a><br>Generated by <strong>DocFX</strong></span><script type="text/javascript">(function(m,e,t,r,i,k,a){m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};m[i].l=1*new Date();k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)})(window, document, "script", "https://mc.yandex.ru/metrika/tag.js", "ym");ym(65150713, "init", {clickmap:true,trackLinks:true,accurateTrackBounce:true});</script><noscript><div><img src="https://mc.yandex.ru/watch/65150713" style="position:absolute; left:-9999px;" alt=""></div></noscript>
            
          </div>
        </div>
      </footer>
    </div>
    
    <script type="text/javascript" src="../../../styles/docfx.vendor.js"></script>
    <script type="text/javascript" src="../../../styles/docfx.js"></script>
    <script type="text/javascript" src="../../../styles/main.js"></script>
  </body>
</html>
