<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>&#1057;&#1086;&#1079;&#1076;&#1072;&#1085;&#1080;&#1077; &#1087;&#1088;&#1080;&#1083;&#1086;&#1078;&#1077;&#1085;&#1080;&#1103; WPF &#1074; Visual Studio | &#1053;&#1077;&#1086;&#1092;&#1080;&#1094;&#1080;&#1072;&#1083;&#1100;&#1085;&#1072;&#1103; &#1076;&#1086;&#1082;&#1091;&#1084;&#1077;&#1085;&#1090;&#1072;&#1094;&#1080;&#1103; .NET </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="&#1057;&#1086;&#1079;&#1076;&#1072;&#1085;&#1080;&#1077; &#1087;&#1088;&#1080;&#1083;&#1086;&#1078;&#1077;&#1085;&#1080;&#1103; WPF &#1074; Visual Studio | &#1053;&#1077;&#1086;&#1092;&#1080;&#1094;&#1080;&#1072;&#1083;&#1100;&#1085;&#1072;&#1103; &#1076;&#1086;&#1082;&#1091;&#1084;&#1077;&#1085;&#1090;&#1072;&#1094;&#1080;&#1103; .NET ">
    <meta name="generator" content="docfx 2.40.12.0">
    
    <link rel="shortcut icon" href="../../../favicon.ico">
    <link rel="stylesheet" href="../../../styles/docfx.vendor.css">
    <link rel="stylesheet" href="../../../styles/docfx.css">
    <link rel="stylesheet" href="../../../styles/main.css">
    <meta property="docfx:navrel" content="../../../toc.html">
    <meta property="docfx:tocrel" content="toc.html">
    
    
    
  </head>
  <body data-spy="scroll" data-target="#affix" data-offset="120">
    <div id="wrapper">
      <header>
        
        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              
              <a class="navbar-brand" href="../../../index.html">
                <img id="logo" class="svg" src="../../../logo.svg" alt="">
              </a>
            </div>
            <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="search">
                <div class="form-group">
                  <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                </div>
              </form>
            </div>
          </div>
        </nav>
        
        <div class="subnav navbar navbar-default">
          <div class="container hide-when-search" id="breadcrumb">
            <ul class="breadcrumb">
              <li></li>
            </ul>
          </div>
        </div>
      </header>
      <div role="main" class="container body-content hide-when-search">
        
        <div class="sidenav hide-when-search">
          <a class="btn toc-toggle collapse" data-toggle="collapse" href="#sidetoggle" aria-expanded="false" aria-controls="sidetoggle">Show / Hide Table of Contents</a>
          <div class="sidetoggle collapse" id="sidetoggle">
            <div id="sidetoc"></div>
          </div>
        </div>
        <div class="article row grid-right">
          <div class="col-md-10">
            <article class="content wrap" id="_content" data-uid="">
<h1 id="walkthrough-my-first-wpf-desktop-application">Пошаговое руководство. Создание классического приложения WPF</h1>

<p>В этой статье показано, как разработать простое приложение Windows Presentation Foundation (WPF), которое включает общие для большинства приложений WPF элементы: расширяемый язык разметки приложений (XAML), код, определения приложений, элементы управления, макет интерфейса, привязки данных и стили.</p>
<p>Это пошаговое руководство включает следующие шаги:</p>
<ul>
<li><p>Использование XAML для разработки пользовательского интерфейса (UI) приложения.</p>
</li>
<li><p>Написание кода, определяющего поведение приложения.</p>
</li>
<li><p>Создание определения приложения для управления приложением.</p>
</li>
<li><p>Добавление элементов управления и создание макета для пользовательского интерфейса приложения.</p>
</li>
<li><p>Создания таблиц стилей для согласованного отображения пользовательского интерфейса в приложении.</p>
</li>
<li><p>Использование привязки к данным для заполнения пользовательского интерфейса на основе данных.</p>
</li>
</ul>
<p>В конце пошагового руководства будет создано автономное приложение Windows, которое позволяет пользователям просматривать отчеты о расходах для выбранных пользователей. Приложение состоит из нескольких страниц WPF, размещаемых в окне обозревателя.</p>
<div class="TIP">
<h5>Tip</h5>
<p>Пример кода, который используется в этом пошаговом руководстве, доступен для Visual Basic и C# в <a href="https://go.microsoft.com/fwlink/?LinkID=160008">Общие сведения о сборке приложений WPF</a>.</p>
</div>
<h2 id="prerequisites">Предварительные требования</h2>
<p>Visual Studio 2017 или более поздней версии.</p>
<p>Дополнительные сведения об установке последней версии Visual Studio, см. в разделе <a href="https://docs.microsoft.com/ru-ru/visualstudio/install/install-visual-studio">установка Visual Studio</a>.</p>
<h2 id="create-the-application-project">Создание проекта приложения</h2>
<p>Первым шагом является создание инфраструктуры приложения, которая включает в себя определение приложения, две страницы и изображение.</p>
<ol>
<li><p>Создайте новый проект приложения WPF в Visual Basic или Visual C# с именем <strong><code>ExpenseIt</code></strong>:</p>
<ol>
<li><p>Откройте Visual Studio и выберите <strong>Файл</strong> &gt; <strong>Создать</strong> &gt; <strong>Проект</strong>.</p>
<p>Откроется диалоговое окно <strong>Новый проект</strong>.</p>
</li>
<li><p>В разделе <strong>Установленные</strong>, разверните <strong>Visual C#</strong>  или <strong>Visual Basic</strong>, а затем выберите <strong>Windows Desktop</strong>.</p>
</li>
<li><p>Выберите шаблон <strong>Приложение WPF (.NET Framework)</strong>. Введите имя <strong><code>ExpenseIt</code></strong> , а затем нажмите <strong>ОК</strong>.</p>
<p><img src="media/gettingstartedfigure0b.png" alt="Диалоговое окно нового проекта с помощью выбранного приложения WPF"></p>
<p>Visual Studio создаст проект и откроет конструктор для окна приложения по умолчанию с именем <strong>MainWindow.xaml</strong>.</p>
</li>
</ol>
<div class="NOTE">
<h5>Note</h5>
<p>В этом пошаговом руководстве используется элемент управления <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.controls.datagrid">DataGrid</a>, доступный в .NET Framework 4 и более поздних версиях. Дополнительные сведения о выборе целевой версии .NET см. в статье <a href="https://docs.microsoft.com/ru-ru/visualstudio/ide/visual-studio-multi-targeting-overview">Visual Studio: Общие сведения о настройке целевой платформы</a>.</p>
</div>
</li>
<li><p>Откройте <em>Application.xaml</em> (Visual Basic) или <em>App.xaml</em> (C#).</p>
<p>Этот файл XAML определяет WPF-приложение и все его ресурсы. Этот файл также используется для указания объекта пользовательского интерфейса, автоматически отображаемого при запуске приложения; в данном случае это <em>MainWindow.xaml</em>.</p>
<p>В C# он должен выглядеть следующим образом.</p>
<pre><code class="lang-xaml" name="ExpenseIt#1">&lt;Application x:Class=&quot;ExpenseIt.App&quot;
     xmlns=&quot;http://schemas.microsoft.com/winfx/2006/xaml/presentation&quot;
     xmlns:x=&quot;http://schemas.microsoft.com/winfx/2006/xaml&quot;
     StartupUri=&quot;MainWindow.xaml&quot;&gt;
    &lt;Application.Resources&gt;
         
    &lt;/Application.Resources&gt;
&lt;/Application&gt;
</code></pre></li>
<li><p>Откройте <em>MainWindow.xaml</em>.</p>
<p>Этот файл XAML представляет главное окно приложения и отображает созданное содержимое страниц. Класс <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.window">Window</a> определяет свойства окна, такие как заголовок, размер и значок, и обрабатывает события (например, открытие и закрытие окна).</p>
</li>
<li><p>Замените <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.window">Window</a> на элемент <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.navigation.navigationwindow">NavigationWindow</a>, как показано в следующем XAML:</p>
<pre><code class="lang-xaml">&lt;NavigationWindow x:Class=&quot;ExpenseIt.MainWindow&quot;
     xmlns=&quot;http://schemas.microsoft.com/winfx/2006/xaml/presentation&quot;
     xmlns:x=&quot;http://schemas.microsoft.com/winfx/2006/xaml&quot;
     ...
&lt;/NavigationWindow&gt;
</code></pre>
<p>Это приложение осуществляет переход к различному содержимому вводимых пользователем данных. Вот почему основное <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.window">Window</a> должно быть заменено на  <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.navigation.navigationwindow">NavigationWindow</a>. <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.navigation.navigationwindow">NavigationWindow</a> наследует все свойства <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.window">Window</a>. Дополнительные сведения см. в разделе <a href="../app-development/navigation-overview.html">Общие сведения о переходах</a>.</p>
</li>
<li><p>Измените следующие свойства <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.navigation.navigationwindow">NavigationWindow</a>:</p>
<ul>
<li><p>Задайте для свойства <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.window.title">Title</a> значение <code>ExpenseIt</code>.</p>
</li>
<li><p>Задайте для свойства <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.frameworkelement.width">Width</a> значение 500 пикселей.</p>
</li>
<li><p>Задайте для свойства <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.frameworkelement.height">Height</a> значение 350 пикселей.</p>
</li>
<li><p>Удалите <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.controls.grid">Grid</a> между тегами <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.navigation.navigationwindow">NavigationWindow</a>.</p>
</li>
</ul>
<p>В C# XAML должен выглядеть следующим образом.</p>
<pre><code class="lang-xaml" name="ExpenseIt#2">&lt;NavigationWindow x:Class=&quot;ExpenseIt.MainWindow&quot;
    xmlns=&quot;http://schemas.microsoft.com/winfx/2006/xaml/presentation&quot;
    xmlns:x=&quot;http://schemas.microsoft.com/winfx/2006/xaml&quot;
    Title=&quot;ExpenseIt&quot; Height=&quot;350&quot; Width=&quot;500&quot;&gt;
    
&lt;/NavigationWindow&gt;
</code></pre></li>
<li><p>Откройте <em>MainWindow.xaml.vb</em> или <em>MainWindow.xaml.cs</em>.</p>
<p>Этот файл является файлом кода, который содержит код для обработки событий, объявленных в <em>MainWindow.xaml</em>. Этот файл содержит разделяемый класс для окна, определенного в XAML-коде.</p>
</li>
<li><p>Если вы используете C#, измените <code>MainWindow</code> класса, чтобы он наследовал от <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.navigation.navigationwindow">NavigationWindow</a>. (В Visual Basic это происходит автоматически при изменении окна в XAML.)</p>
<p>Код должен выглядеть следующим образом:</p>
<pre><code class="lang-csharp" name="ExpenseIt#3">using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Data;
using System.Windows.Documents;
using System.Windows.Input;
using System.Windows.Media;
using System.Windows.Media.Imaging;
using System.Windows.Navigation;
using System.Windows.Shapes;

namespace ExpenseIt
{
    /// &lt;summary&gt;
    /// Interaction logic for MainWindow.xaml
    /// &lt;/summary&gt;
    public partial class MainWindow : NavigationWindow
    {
        public MainWindow()
        {
            InitializeComponent();
        }
    }
}
</code></pre></li>
</ol>
<h2 id="add-files-to-the-application">Добавление файлов в приложение</h2>
<p>В этом разделе вы добавите в приложение две страницы и изображение.</p>
<ol>
<li><p>Добавьте новую страницу WPF в проект и назовите её <code>ExpenseItHome.xaml</code>:</p>
<ol>
<li><p>В <strong>обозревателе решений</strong>, щелкните правой кнопкой мыши <strong><code>ExpenseIt</code></strong> и выберите <strong>Добавить</strong> &gt; <strong>Страница</strong>.</p>
</li>
<li><p>В окне <strong>Добавление нового элемента</strong>, уже выбран шаблон <strong>Страница (WPF)</strong>. Введите имя <strong><code>ExpenseItHome</code></strong>, а затем нажмите <strong>Добавить</strong>.</p>
</li>
</ol>
<p>Эта страница является первой страницей, которая отображается при запуске приложения. На ней отображается список пользователей для выбора пользователя, по которому необходимо сформировать отчет о расходах.</p>
</li>
<li><p>Откройте <em><code>ExpenseItHome.xaml</code></em>.</p>
</li>
<li><p>Задайте для <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.controls.page.title">Title</a> значение <code>ExpenseIt - Home</code>.</p>
<p>В C# XAML должен выглядеть следующим образом.</p>
<pre><code class="lang-xaml" name="ExpenseIt#6">&lt;Page x:Class=&quot;ExpenseIt.ExpenseItHome&quot;
      xmlns=&quot;http://schemas.microsoft.com/winfx/2006/xaml/presentation&quot;
      xmlns:x=&quot;http://schemas.microsoft.com/winfx/2006/xaml&quot;
      xmlns:mc=&quot;http://schemas.openxmlformats.org/markup-compatibility/2006&quot; 
      xmlns:d=&quot;http://schemas.microsoft.com/expression/blend/2008&quot; 
      mc:Ignorable=&quot;d&quot; 
      d:DesignHeight=&quot;350&quot; d:DesignWidth=&quot;500&quot;
    Title=&quot;ExpenseIt - Home&quot;&gt;

    &lt;Grid&gt;
        
    &lt;/Grid&gt;
&lt;/Page&gt;
</code></pre></li>
<li><p>Откройте <em>MainWindow.xaml</em>.</p>
</li>
<li><p>Задайте для <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.navigation.navigationwindow.source">Source</a> у <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.navigation.navigationwindow">NavigationWindow</a> значение <code>ExpenseItHome.xaml</code>.</p>
<p>Этот параметр задает <code>ExpenseItHome.xaml</code> в качестве первой страницы, открываемой при запуске приложения.</p>
<p>В C# XAML должен выглядеть следующим образом.</p>
<pre><code class="lang-xaml" name="ExpenseIt#7">&lt;NavigationWindow x:Class=&quot;ExpenseIt.MainWindow&quot;
    xmlns=&quot;http://schemas.microsoft.com/winfx/2006/xaml/presentation&quot;
    xmlns:x=&quot;http://schemas.microsoft.com/winfx/2006/xaml&quot;
    Title=&quot;ExpenseIt&quot; Height=&quot;350&quot; Width=&quot;500&quot; Source=&quot;ExpenseItHome.xaml&quot;&gt;
    
&lt;/NavigationWindow&gt;
</code></pre>
<div class="TIP">
<h5>Tip</h5>
<p>Можно также задать свойство <strong>Источник</strong> в категории свойств окна <strong>Разное</strong>.</p>
<p><img src="media/properties-source.png" alt="Свойства Source в окно &quot;Свойства&quot;"></p>
</div>
</li>
<li><p>Добавьте другую страницу WPF в проект и назовите её <em>ExpenseReportPage.xaml</em>:</p>
<ol>
<li><p>В <strong>обозревателе решений</strong>, щелкните правой кнопкой мыши <strong><code>ExpenseIt</code></strong> и выберите <strong>Добавить</strong> &gt; <strong>Страница</strong>.</p>
</li>
<li><p>В окне <strong>Добавление нового элемента</strong>, уже выбран шаблон <strong>Страница (WPF)</strong>. Введите имя <strong>ExpenseReportPage</strong>, а затем нажмите <strong>Добавить</strong>.</p>
</li>
</ol>
<p>Эта страница будет отображать отчет по расходам для человека, выбранного на странице <strong><code>ExpenseItHome</code></strong>.</p>
</li>
<li><p>Откройте файл <em>ExpenseReportPage.xaml</em>.</p>
</li>
<li><p>Задайте для <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.controls.page.title">Title</a> значение <code>ExpenseIt - View Expense</code>.</p>
<p>В C# XAML должен выглядеть следующим образом.</p>
<pre><code class="lang-xaml" name="ExpenseIt#4">&lt;Page x:Class=&quot;ExpenseIt.ExpenseReportPage&quot;
      xmlns=&quot;http://schemas.microsoft.com/winfx/2006/xaml/presentation&quot;
      xmlns:x=&quot;http://schemas.microsoft.com/winfx/2006/xaml&quot;
      xmlns:mc=&quot;http://schemas.openxmlformats.org/markup-compatibility/2006&quot; 
      xmlns:d=&quot;http://schemas.microsoft.com/expression/blend/2008&quot; 
      mc:Ignorable=&quot;d&quot; 
      d:DesignHeight=&quot;350&quot; d:DesignWidth=&quot;500&quot;
    Title=&quot;ExpenseIt - View Expense&quot;&gt;

    &lt;Grid&gt;
        
    &lt;/Grid&gt;
&lt;/Page&gt;
</code></pre></li>
<li><p>Откройте <em>ExpenseItHome.xaml.vb</em> и <em>ExpenseReportPage.xaml.vb</em>, или <em>ExpenseItHome.xaml.cs</em> и <em>ExpenseReportPage.xaml.cs</em>.</p>
<p>При создании нового файла страницы Visual Studio автоматически создает файл кода. Эти файлы обрабатывают логику, реагирующую на действия пользователя.</p>
<p>Код должен выглядеть следующим образом для <strong><code>ExpenseItHome</code></strong>:</p>
<pre><code class="lang-csharp" name="ExpenseIt#2_5">using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Data;
using System.Windows.Documents;
using System.Windows.Input;
using System.Windows.Media;
using System.Windows.Media.Imaging;
using System.Windows.Navigation;
using System.Windows.Shapes;

namespace ExpenseIt
{
    /// &lt;summary&gt;
    /// Interaction logic for ExpenseItHome.xaml
    /// &lt;/summary&gt;
    public partial class ExpenseItHome : Page
    {
        public ExpenseItHome()
        {
            InitializeComponent();
        }
    }
}
</code></pre>
<p>И следующим образом для <strong>ExpenseReportPage</strong>:</p>
<pre><code class="lang-csharp" name="ExpenseIt#5">using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Data;
using System.Windows.Documents;
using System.Windows.Input;
using System.Windows.Media;
using System.Windows.Media.Imaging;
using System.Windows.Navigation;
using System.Windows.Shapes;

namespace ExpenseIt
{
    /// &lt;summary&gt;
    /// Interaction logic for ExpenseReportPage.xaml
    /// &lt;/summary&gt;
    public partial class ExpenseReportPage : Page
    {
        public ExpenseReportPage()
        {
            InitializeComponent();
        }
    }
}
</code></pre></li>
<li><p>Добавьте изображение с именем <em>watermark.png</em> в проект. Можно создать собственное изображение, скопировать файл из примера кода или загрузить его <a href="media/watermark.png">здесь</a>.</p>
<ol>
<li><p>Щелкните правой кнопкой мыши узел проекта и выберите <strong>добавить</strong> &gt; <strong>существующий элемент</strong>.</p>
</li>
<li><p>В окне <strong>Добавить существующий элемент</strong> перейдите к файлу изображения, который вы хотите использовать, а затем выберите <strong>добавить</strong>.</p>
</li>
</ol>
</li>
</ol>
<h2 id="build-and-run-the-application">Построение и запуск приложения</h2>
<ol>
<li><p>Чтобы построить и запустить приложение, нажмите клавишу <strong>F5</strong> или выберите <strong>начать отладку</strong> из меню <strong>Отладка</strong>.</p>
</li>
<li><p>Закройте приложение, чтобы вернуться в Visual Studio.</p>
</li>
</ol>
<h2 id="create-the-layout">Создание макета</h2>
<p>Макет позволяет упорядочивать размещение элементов пользовательского интерфейса и также управлять их размером и положением при изменении размера пользовательского интерфейса. Обычно макет создается с одним из следующих элементов управления макетом.</p>
<ul>
<li><a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.controls.canvas">Canvas</a></li>
<li><a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.controls.dockpanel">DockPanel</a></li>
<li><a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.controls.grid">Grid</a></li>
<li><a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.controls.stackpanel">StackPanel</a></li>
<li><a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.controls.virtualizingstackpanel">VirtualizingStackPanel</a></li>
<li><a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.controls.wrappanel">WrapPanel</a></li>
</ul>
<p>Каждый из этих элементов управления макетом поддерживает специальный тип макета дочерних элементов. Размер страницы <code>ExpenseIt</code> может быть изменен, и каждая страница имеет элементы, которые упорядочены по горизонтали и вертикали рядом с другими элементами. Следовательно, <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.controls.grid">Grid</a> является идеальным элементом макета для приложения.</p>
<div class="TIP">
<h5>Tip</h5>
<p>Дополнительные сведения о элементе <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.controls.panel">Panel</a> см. в разделе <a href="../controls/panels-overview.html">Общие сведения о панелях</a>. Дополнительные сведения о макете см. в разделе <a href="../advanced/layout.html">Макет</a>.</p>
</div>
<p>В разделе создается таблица с одним столбцом и тремя строками, с полями шириной 10 пикселей, путем добавления определений столбцов и строк для <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.controls.grid">Grid</a> в <em><code>ExpenseItHome.xaml</code></em>.</p>
<ol>
<li><p>Откройте <em><code>ExpenseItHome.xaml</code></em>.</p>
</li>
<li><p>Задайте для <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.frameworkelement.margin">Margin</a> у <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.controls.grid">Grid</a> значение «10,0,10,10», которое соответствует величине полей слева, сверху, справа и снизу:</p>
<pre><code class="lang-xaml">&lt;Grid Margin=&quot;10,0,10,10&quot;&gt;
</code></pre>
<div class="TIP">
<h5>Tip</h5>
<p>Можно также задать <strong>Margin</strong> в категории <strong>макет</strong> свойств элемента:</p>
<p><img src="media/properties-margin.png" alt="Значения полей в окно &quot;Свойства&quot;"></p>
</div>
</li>
<li><p>Добавьте следующий XAML между тегов <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.controls.grid">Grid</a>, чтобы создать определения строк и столбцов:</p>
<pre><code class="lang-xaml" name="ExpenseIt#8">&lt;Grid.ColumnDefinitions&gt;
    &lt;ColumnDefinition /&gt;
&lt;/Grid.ColumnDefinitions&gt;
&lt;Grid.RowDefinitions&gt;
    &lt;RowDefinition Height=&quot;Auto&quot;/&gt;
    &lt;RowDefinition /&gt;
    &lt;RowDefinition Height=&quot;Auto&quot;/&gt;
&lt;/Grid.RowDefinitions&gt;
</code></pre>
<p>Свойство <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.controls.rowdefinition.height">Height</a> двух строк имеет значение <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.gridlength.auto">Auto</a>, означающее, что размер строки определяется её содержимым. Значение по умолчанию для <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.controls.rowdefinition.height">Height</a> равно <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.gridunittype#System_Windows_GridUnitType_Star">Star</a>; это означает, что высота строки — это взвешенная пропорция доступного пространства. Например, если две строки имеют <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.controls.rowdefinition.height">Height</a> равную «*», каждый из них имеет высоту в размере половины доступного пространства.</p>
<p>Ваш <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.controls.grid">Grid</a> теперь должен иметь следующий XAML:</p>
<pre><code class="lang-xaml" name="ExpenseIt#9">&lt;Grid Margin=&quot;10,0,10,10&quot;&gt;
    &lt;Grid.ColumnDefinitions&gt;
        &lt;ColumnDefinition /&gt;
    &lt;/Grid.ColumnDefinitions&gt;
    &lt;Grid.RowDefinitions&gt;
        &lt;RowDefinition Height=&quot;Auto&quot;/&gt;
        &lt;RowDefinition /&gt;
        &lt;RowDefinition Height=&quot;Auto&quot;/&gt;
    &lt;/Grid.RowDefinitions&gt;
&lt;/Grid&gt;
</code></pre></li>
</ol>
<h2 id="add-controls">Добавление элементов управления</h2>
<p>В этом разделе вы обновите пользовательский интерфейс для отображения списка пользователей, для которых может выводиться отчет по расходам. Элементы управления — это объекты пользовательского интерфейса, позволяющие пользователям взаимодействовать с приложением. Более подробную информацию см. в разделе <a href="../controls/index.html">Элементы управления</a>.</p>
<p>Чтобы создать этот пользовательский интерфейс, нужно добавить следующие элементы для <em><code>ExpenseItHome.xaml</code></em>:</p>
<ul>
<li><a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.controls.listbox">ListBox</a> (для получения списка пользователей).</li>
<li><a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.controls.label">Label</a> (для заголовков списка).</li>
<li><a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.controls.button">Button</a> (чтобы при её нажатии вывести отчет по расходам для человека, выбранного в списке).</li>
</ul>
<p>Каждый элемент управления помещается в строке <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.controls.grid">Grid</a>, в соответствии с заданным значением вложенного свойства зависимостей <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.controls.grid.row">Grid.Row</a>. Дополнительные сведения о вложенных свойствах см. в разделе <a href="../advanced/attached-properties-overview.html">Свойства зависимостей</a>.</p>
<ol>
<li><p>Откройте <em><code>ExpenseItHome.xaml</code></em>.</p>
</li>
<li><p>Добавьте следующий XAML где-то между тегов <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.controls.grid">Grid</a>:</p>
<pre><code class="lang-xaml" name="ExpenseIt#10">
&lt;!-- People list --&gt;
&lt;Border Grid.Column=&quot;0&quot; Grid.Row=&quot;0&quot; Height=&quot;35&quot; Padding=&quot;5&quot; Background=&quot;#4E87D4&quot;&gt;
    &lt;Label VerticalAlignment=&quot;Center&quot; Foreground=&quot;White&quot;&gt;Names&lt;/Label&gt;
&lt;/Border&gt;
&lt;ListBox Name=&quot;peopleListBox&quot; Grid.Column=&quot;0&quot; Grid.Row=&quot;1&quot;&gt;
    &lt;ListBoxItem&gt;Mike&lt;/ListBoxItem&gt;
    &lt;ListBoxItem&gt;Lisa&lt;/ListBoxItem&gt;
    &lt;ListBoxItem&gt;John&lt;/ListBoxItem&gt;
    &lt;ListBoxItem&gt;Mary&lt;/ListBoxItem&gt;
&lt;/ListBox&gt;

&lt;!-- View report button --&gt;
&lt;Button Grid.Column=&quot;0&quot; Grid.Row=&quot;2&quot; Margin=&quot;0,10,0,0&quot; Width=&quot;125&quot; Height=&quot;25&quot; HorizontalAlignment=&quot;Right&quot;&gt;View&lt;/Button&gt;
</code></pre>
<div class="TIP">
<h5>Tip</h5>
<p>Также можно создать элементы управления, перетащив их из <strong>панели элементов</strong> в окне конструктора, а затем задав их свойства в окне <strong>Свойства</strong>.</p>
</div>
</li>
<li><p>Выполните сборку и запуск приложения.</p>
</li>
</ol>
<h2 id="add-an-image-and-a-title">Добавить изображение и заголовок</h2>
<p>В этом разделе вы обновите интерфейс пользователя домашней страницы, добавив изображение и заголовок страницы.</p>
<ol>
<li><p>Откройте <em><code>ExpenseItHome.xaml</code></em>.</p>
</li>
<li><p>Добавьте еще один столбец в <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.controls.grid.columndefinitions">ColumnDefinitions</a> с фиксированным значением <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.controls.columndefinition.width">Width</a>, равным 230 пикселей:</p>
<pre><code class="lang-xaml" name="ExpenseIt#11">&lt;Grid.ColumnDefinitions&gt;
    &lt;ColumnDefinition Width=&quot;230&quot; /&gt;
    &lt;ColumnDefinition /&gt;
&lt;/Grid.ColumnDefinitions&gt;
</code></pre></li>
<li><p>Добавьте другую строку в <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.controls.grid.rowdefinitions">RowDefinitions</a>:</p>
<pre><code class="lang-xaml" name="ExpenseIt#11b">&lt;Grid.RowDefinitions&gt;
    &lt;RowDefinition/&gt;
    &lt;RowDefinition Height=&quot;Auto&quot;/&gt;
    &lt;RowDefinition /&gt;
    &lt;RowDefinition Height=&quot;Auto&quot;/&gt;
&lt;/Grid.RowDefinitions&gt;
</code></pre></li>
<li><p>Переместите элементы управления во второй столбец, задав свойству <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.controls.grid.column">Grid.Column</a> значение 1, в каждом из трех элементов управления (Border, ListBox и Button).</p>
</li>
<li><p>Переместите каждый элемент управления вниз на одну строку, увеличивая на 1 значение его свойства <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.controls.grid.row">Grid.Row</a>.</p>
<p>XAML для трех элементов управления теперь выглядит следующим образом:</p>
<pre><code class="lang-xaml" name="ExpenseIt#12">  &lt;Border Grid.Column=&quot;1&quot; Grid.Row=&quot;1&quot; Height=&quot;35&quot; Padding=&quot;5&quot; Background=&quot;#4E87D4&quot;&gt;
      &lt;Label VerticalAlignment=&quot;Center&quot; Foreground=&quot;White&quot;&gt;Names&lt;/Label&gt;
  &lt;/Border&gt;
  &lt;ListBox Name=&quot;peopleListBox&quot; Grid.Column=&quot;1&quot; Grid.Row=&quot;2&quot;&gt;
      &lt;ListBoxItem&gt;Mike&lt;/ListBoxItem&gt;
      &lt;ListBoxItem&gt;Lisa&lt;/ListBoxItem&gt;
      &lt;ListBoxItem&gt;John&lt;/ListBoxItem&gt;
      &lt;ListBoxItem&gt;Mary&lt;/ListBoxItem&gt;
  &lt;/ListBox&gt;

  &lt;!-- View report button --&gt;
  &lt;Button Grid.Column=&quot;1&quot; Grid.Row=&quot;3&quot; Margin=&quot;0,10,0,0&quot; Width=&quot;125&quot;
Height=&quot;25&quot; HorizontalAlignment=&quot;Right&quot;&gt;View&lt;/Button&gt;
</code></pre></li>
<li><p>Присвойте свойству <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.controls.panel.background">Background</a> у <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.controls.grid">Grid</a> в качестве значения файл изображения <em>watermark.png</em>, добавив следующий XAML где-то между <code>&lt;Grid&gt;</code> и <code>&lt;/Grid&gt;</code>:</p>
<pre><code class="lang-xaml" name="ExpenseIt#14">&lt;Grid.Background&gt;
    &lt;ImageBrush ImageSource=&quot;watermark.png&quot;/&gt;
&lt;/Grid.Background&gt;
</code></pre></li>
<li><p>Перед элементом <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.controls.border">Border</a> добавьте <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.controls.label">Label</a> с содержимым «View Expense Report». Это заголовок страницы.</p>
<pre><code class="lang-xaml" name="ExpenseIt#13">&lt;Label Grid.Column=&quot;1&quot; VerticalAlignment=&quot;Center&quot; FontFamily=&quot;Trebuchet MS&quot; 
        FontWeight=&quot;Bold&quot; FontSize=&quot;18&quot; Foreground=&quot;#0066cc&quot;&gt;
    View Expense Report
&lt;/Label&gt;
</code></pre></li>
<li><p>Выполните сборку и запуск приложения.</p>
</li>
</ol>
<p>На следующем рисунке показан полученный результат:</p>
<p><img src="media/gettingstartedfigure3.png" alt="Снимок экрана примера ExpenseIt"></p>
<h2 id="add-code-to-handle-events">Добавьте код для обработки событий</h2>
<ol>
<li><p>Откройте <em><code>ExpenseItHome.xaml</code></em>.</p>
</li>
<li><p>Добавьте обработчик события <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.controls.primitives.buttonbase.click">Click</a> у <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.controls.button">Button</a>. Дополнительные сведения см. в разделе <a href="https://docs.microsoft.com/previous-versions/visualstudio/visual-studio-2010/bb675300(v=vs.100)">Создание простого обработчика событий</a>.</p>
<pre><code class="lang-xaml" name="ExpenseIt#15">  &lt;!-- View report button --&gt;
  &lt;Button Grid.Column=&quot;1&quot; Grid.Row=&quot;3&quot; Margin=&quot;0,10,0,0&quot; Width=&quot;125&quot;
Height=&quot;25&quot; HorizontalAlignment=&quot;Right&quot; Click=&quot;Button_Click&quot;&gt;View&lt;/Button&gt;
</code></pre></li>
<li><p>Откройте <em><code>ExpenseItHome.xaml.vb</code></em> или <em><code>ExpenseItHome.xaml.cs</code></em>.</p>
</li>
<li><p>Добавьте следующий код, в класс <code>ExpenseItHome</code>, чтобы добавить обработчик события щелчка кнопки. Обработчик событий открывает страницу <strong>ExpenseReportPage</strong>.</p>
<pre><code class="lang-csharp" name="ExpenseIt#16">private void Button_Click(object sender, RoutedEventArgs e)
{
    // View Expense Report
    ExpenseReportPage expenseReportPage = new ExpenseReportPage();
    this.NavigationService.Navigate(expenseReportPage);
}
</code></pre></li>
</ol>
<h2 id="create-the-ui-for-expensereportpage">Создание пользовательского интерфейса для страницы ExpenseReportPage</h2>
<p><em>ExpenseReportPage.xaml</em> отображает отчет по расходам для человека, выбранного на странице <strong><code>ExpenseItHome</code></strong>. В этом разделе вы создадите пользовательский интерфейс для <strong>ExpenseReportPage</strong>. Вы также добавите фон и цвет заливки для различных элементов пользовательского интерфейса.</p>
<ol>
<li><p>Откройте файл <em>ExpenseReportPage.xaml</em>.</p>
</li>
<li><p>Добавьте следующий XAML между тегами <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.controls.grid">Grid</a>:</p>
<pre><code class="lang-xaml" name="ExpenseIt#17"> &lt;Grid.Background&gt;
     &lt;ImageBrush ImageSource=&quot;watermark.png&quot; /&gt;
 &lt;/Grid.Background&gt;
 &lt;Grid.ColumnDefinitions&gt;
     &lt;ColumnDefinition Width=&quot;230&quot; /&gt;
     &lt;ColumnDefinition /&gt;
 &lt;/Grid.ColumnDefinitions&gt;
 &lt;Grid.RowDefinitions&gt;
     &lt;RowDefinition Height=&quot;Auto&quot; /&gt;
     &lt;RowDefinition /&gt;
 &lt;/Grid.RowDefinitions&gt;


 &lt;Label Grid.Column=&quot;1&quot; VerticalAlignment=&quot;Center&quot; FontFamily=&quot;Trebuchet MS&quot; 
 FontWeight=&quot;Bold&quot; FontSize=&quot;18&quot; Foreground=&quot;#0066cc&quot;&gt;
     Expense Report For:
 &lt;/Label&gt;
 &lt;Grid Margin=&quot;10&quot; Grid.Column=&quot;1&quot; Grid.Row=&quot;1&quot;&gt;

     &lt;Grid.ColumnDefinitions&gt;
         &lt;ColumnDefinition /&gt;
         &lt;ColumnDefinition /&gt;
     &lt;/Grid.ColumnDefinitions&gt;
     &lt;Grid.RowDefinitions&gt;
         &lt;RowDefinition Height=&quot;Auto&quot; /&gt;
         &lt;RowDefinition Height=&quot;Auto&quot; /&gt;
         &lt;RowDefinition /&gt;
     &lt;/Grid.RowDefinitions&gt;

     &lt;!-- Name --&gt;
     &lt;StackPanel Grid.Column=&quot;0&quot; Grid.ColumnSpan=&quot;2&quot; Grid.Row=&quot;0&quot; Orientation=&quot;Horizontal&quot;&gt;
         &lt;Label Margin=&quot;0,0,0,5&quot; FontWeight=&quot;Bold&quot;&gt;Name:&lt;/Label&gt;
         &lt;Label Margin=&quot;0,0,0,5&quot; FontWeight=&quot;Bold&quot;&gt;&lt;/Label&gt;
     &lt;/StackPanel&gt;

     &lt;!-- Department --&gt;
     &lt;StackPanel Grid.Column=&quot;0&quot; Grid.ColumnSpan=&quot;2&quot; Grid.Row=&quot;1&quot; Orientation=&quot;Horizontal&quot;&gt;
         &lt;Label Margin=&quot;0,0,0,5&quot; FontWeight=&quot;Bold&quot;&gt;Department:&lt;/Label&gt;
         &lt;Label Margin=&quot;0,0,0,5&quot; FontWeight=&quot;Bold&quot;&gt;&lt;/Label&gt;
     &lt;/StackPanel&gt;

     &lt;Grid Grid.Column=&quot;0&quot; Grid.ColumnSpan=&quot;2&quot; Grid.Row=&quot;2&quot; VerticalAlignment=&quot;Top&quot; 
           HorizontalAlignment=&quot;Left&quot;&gt;
         &lt;!-- Expense type and Amount table --&gt;
         &lt;DataGrid  AutoGenerateColumns=&quot;False&quot; RowHeaderWidth=&quot;0&quot; &gt;
             &lt;DataGrid.ColumnHeaderStyle&gt;
                 &lt;Style TargetType=&quot;{x:Type DataGridColumnHeader}&quot;&gt;
                     &lt;Setter Property=&quot;Height&quot; Value=&quot;35&quot; /&gt;
                     &lt;Setter Property=&quot;Padding&quot; Value=&quot;5&quot; /&gt;
                     &lt;Setter Property=&quot;Background&quot; Value=&quot;#4E87D4&quot; /&gt;
                     &lt;Setter Property=&quot;Foreground&quot; Value=&quot;White&quot; /&gt;
                 &lt;/Style&gt;
             &lt;/DataGrid.ColumnHeaderStyle&gt;
             &lt;DataGrid.Columns&gt;
                 &lt;DataGridTextColumn Header=&quot;ExpenseType&quot; /&gt;
                 &lt;DataGridTextColumn Header=&quot;Amount&quot;  /&gt;
             &lt;/DataGrid.Columns&gt;
         &lt;/DataGrid&gt;
     &lt;/Grid&gt;
 &lt;/Grid&gt;
</code></pre>
<p>Этот пользовательский интерфейс аналогичен <em><code>ExpenseItHome.xaml</code></em>, за исключением того, что данные отчета отображаются в <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.controls.datagrid">DataGrid</a>.</p>
</li>
<li><p>Выполните сборку и запуск приложения.</p>
<div class="NOTE">
<h5>Note</h5>
<p>Если отобразится сообщение об ошибке, <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.controls.datagrid">DataGrid</a> не найден или не существует, убедитесь, что ваш проект использует .NET Framework 4 или более поздней версии. Дополнительные сведения о выборе целевой версии .NET см. в статье <a href="https://docs.microsoft.com/ru-ru/visualstudio/ide/visual-studio-multi-targeting-overview">Visual Studio: Общие сведения о настройке целевой платформы</a>.</p>
</div>
</li>
<li><p>Нажмите кнопку <strong>View</strong>.</p>
<p>Появится страница отчета по расходам. Также обратите внимание на то, что кнопка возврата активна.</p>
</li>
</ol>
<p>На следующем рисунке показаны элементы пользовательского интерфейса, добавленные в <em>ExpenseReportPage.xaml</em>.</p>
<p><img src="media/gettingstartedfigure4.png" alt="Снимок экрана примера ExpenseIt"></p>
<h2 id="style-controls">Определение стиля элементов управления</h2>
<p>Внешний вид различных элементов часто является одинаковым для всех элементов одного типа в пользовательском интерфейсе. Пользовательский интерфейс использует <a href="../controls/styling-and-templating.html">стили</a> для многократного использования паарметров внешнего вида у нескольких элементов. Повторное использование стилей помогает упростить создание XAML и управление им. В этом разделе атрибуты, установленные ранее для каждого элемента, заменяются стилями.</p>
<ol>
<li><p>Откройте <em>Application.xaml</em> или <em>App.xaml</em>.</p>
</li>
<li><p>Добавьте следующий XAML между тагами <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.application.resources">Application.Resources</a>:</p>
<pre><code class="lang-xaml" name="ExpenseIt#18">
&lt;!-- Header text style --&gt;
&lt;Style x:Key=&quot;headerTextStyle&quot;&gt;
    &lt;Setter Property=&quot;Label.VerticalAlignment&quot; Value=&quot;Center&quot;&gt;&lt;/Setter&gt;
    &lt;Setter Property=&quot;Label.FontFamily&quot; Value=&quot;Trebuchet MS&quot;&gt;&lt;/Setter&gt;
    &lt;Setter Property=&quot;Label.FontWeight&quot; Value=&quot;Bold&quot;&gt;&lt;/Setter&gt;
    &lt;Setter Property=&quot;Label.FontSize&quot; Value=&quot;18&quot;&gt;&lt;/Setter&gt;
    &lt;Setter Property=&quot;Label.Foreground&quot; Value=&quot;#0066cc&quot;&gt;&lt;/Setter&gt;
&lt;/Style&gt;

&lt;!-- Label style --&gt;
&lt;Style x:Key=&quot;labelStyle&quot; TargetType=&quot;{x:Type Label}&quot;&gt;
    &lt;Setter Property=&quot;VerticalAlignment&quot; Value=&quot;Top&quot; /&gt;
    &lt;Setter Property=&quot;HorizontalAlignment&quot; Value=&quot;Left&quot; /&gt;
    &lt;Setter Property=&quot;FontWeight&quot; Value=&quot;Bold&quot; /&gt;
    &lt;Setter Property=&quot;Margin&quot; Value=&quot;0,0,0,5&quot; /&gt;
&lt;/Style&gt;

&lt;!-- DataGrid header style --&gt;
&lt;Style x:Key=&quot;columnHeaderStyle&quot; TargetType=&quot;{x:Type DataGridColumnHeader}&quot;&gt;
    &lt;Setter Property=&quot;Height&quot; Value=&quot;35&quot; /&gt;
    &lt;Setter Property=&quot;Padding&quot; Value=&quot;5&quot; /&gt;
    &lt;Setter Property=&quot;Background&quot; Value=&quot;#4E87D4&quot; /&gt;
    &lt;Setter Property=&quot;Foreground&quot; Value=&quot;White&quot; /&gt;
&lt;/Style&gt;

&lt;!-- List header style --&gt;
&lt;Style x:Key=&quot;listHeaderStyle&quot; TargetType=&quot;{x:Type Border}&quot;&gt;
    &lt;Setter Property=&quot;Height&quot; Value=&quot;35&quot; /&gt;
    &lt;Setter Property=&quot;Padding&quot; Value=&quot;5&quot; /&gt;
    &lt;Setter Property=&quot;Background&quot; Value=&quot;#4E87D4&quot; /&gt;
&lt;/Style&gt;

&lt;!-- List header text style --&gt;
&lt;Style x:Key=&quot;listHeaderTextStyle&quot; TargetType=&quot;{x:Type Label}&quot;&gt;
    &lt;Setter Property=&quot;Foreground&quot; Value=&quot;White&quot; /&gt;
    &lt;Setter Property=&quot;VerticalAlignment&quot; Value=&quot;Center&quot; /&gt;
    &lt;Setter Property=&quot;HorizontalAlignment&quot; Value=&quot;Left&quot; /&gt;
&lt;/Style&gt;

&lt;!-- Button style --&gt;
&lt;Style x:Key=&quot;buttonStyle&quot; TargetType=&quot;{x:Type Button}&quot;&gt;
    &lt;Setter Property=&quot;Width&quot; Value=&quot;125&quot; /&gt;
    &lt;Setter Property=&quot;Height&quot; Value=&quot;25&quot; /&gt;
    &lt;Setter Property=&quot;Margin&quot; Value=&quot;0,10,0,0&quot; /&gt;
    &lt;Setter Property=&quot;HorizontalAlignment&quot; Value=&quot;Right&quot; /&gt;
&lt;/Style&gt;
</code></pre>
<p>Этот код XAML добавляет следующие стили:</p>
<ul>
<li><p><code>headerTextStyle</code>: Для форматирования заголовка страницы <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.controls.label">Label</a>.</p>
</li>
<li><p><code>labelStyle</code>: Для форматирования <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.controls.label">Label</a>.</p>
</li>
<li><p><code>columnHeaderStyle</code>: Для форматирования <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.controls.primitives.datagridcolumnheader">DataGridColumnHeader</a>.</p>
</li>
<li><p><code>listHeaderStyle</code>: Для форматирования <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.controls.border">Border</a> заголовка списка.</p>
</li>
<li><p><code>listHeaderTextStyle</code>: Для форматирования <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.controls.label">Label</a> в заголовке списка.</p>
</li>
<li><p><code>buttonStyle</code>: Для форматирования <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.controls.button">Button</a> на <code>ExpenseItHome.xaml</code>.</p>
</li>
</ul>
<p>Обратите внимание на то, что стили представляют собой ресурсы и являются дочерними для свойства <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.application.resources">Application.Resources</a>. Здесь стили применяются ко всем элементам в приложении. Пример использования ресурсов в приложении .NET Framework см. в разделе <a href="../advanced/how-to-use-application-resources.html">использование ресурсов приложения</a>.</p>
</li>
<li><p>Откройте <em><code>ExpenseItHome.xaml</code></em>.</p>
</li>
<li><p>Замените весь код в <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.controls.grid">Grid</a> на следующий XAML:</p>
<pre><code class="lang-xaml" name="ExpenseIt#19">   &lt;Grid.Background&gt;
       &lt;ImageBrush ImageSource=&quot;watermark.png&quot;  /&gt;
   &lt;/Grid.Background&gt;
  
   &lt;Grid.ColumnDefinitions&gt;
       &lt;ColumnDefinition Width=&quot;230&quot; /&gt;
       &lt;ColumnDefinition /&gt;
   &lt;/Grid.ColumnDefinitions&gt;
   
   &lt;Grid.RowDefinitions&gt;
       &lt;RowDefinition/&gt;
       &lt;RowDefinition Height=&quot;Auto&quot;/&gt;
       &lt;RowDefinition /&gt;
       &lt;RowDefinition Height=&quot;Auto&quot;/&gt;
   &lt;/Grid.RowDefinitions&gt;

   &lt;!-- People list --&gt;
  
   &lt;Label Grid.Column=&quot;1&quot; Style=&quot;{StaticResource headerTextStyle}&quot; &gt;
       View Expense Report
   &lt;/Label&gt;
   
   &lt;Border Grid.Column=&quot;1&quot; Grid.Row=&quot;1&quot; Style=&quot;{StaticResource listHeaderStyle}&quot;&gt;
       &lt;Label Style=&quot;{StaticResource listHeaderTextStyle}&quot;&gt;Names&lt;/Label&gt;
   &lt;/Border&gt;
   &lt;ListBox Name=&quot;peopleListBox&quot; Grid.Column=&quot;1&quot; Grid.Row=&quot;2&quot;&gt;
       &lt;ListBoxItem&gt;Mike&lt;/ListBoxItem&gt;
       &lt;ListBoxItem&gt;Lisa&lt;/ListBoxItem&gt;
       &lt;ListBoxItem&gt;John&lt;/ListBoxItem&gt;
       &lt;ListBoxItem&gt;Mary&lt;/ListBoxItem&gt;
   &lt;/ListBox&gt;

   &lt;!-- View report button --&gt;
   &lt;Button Grid.Column=&quot;1&quot; Grid.Row=&quot;3&quot; Click=&quot;Button_Click&quot; Style=&quot;{StaticResource buttonStyle}&quot;&gt;View&lt;/Button&gt;
</code></pre>
<p>Свойства, определяющие внешний вид элементов управления, такие как <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.verticalalignment">VerticalAlignment</a> и <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.media.fontfamily">FontFamily</a>, при применении стилей удаляются и заменяются. Например <code>headerTextStyle</code> применяется к <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.controls.label">Label</a> «View Expense Report».</p>
</li>
<li><p>Откройте файл <em>ExpenseReportPage.xaml</em>.</p>
</li>
<li><p>Замените весь код в <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.controls.grid">Grid</a> на следующий XAML:</p>
<pre><code class="lang-xaml" name="ExpenseIt#20">  &lt;Grid.Background&gt;
      &lt;ImageBrush ImageSource=&quot;watermark.png&quot; /&gt;
  &lt;/Grid.Background&gt;
  &lt;Grid.ColumnDefinitions&gt;
      &lt;ColumnDefinition Width=&quot;230&quot; /&gt;
      &lt;ColumnDefinition /&gt;
  &lt;/Grid.ColumnDefinitions&gt;
  &lt;Grid.RowDefinitions&gt;
      &lt;RowDefinition Height=&quot;Auto&quot; /&gt;
      &lt;RowDefinition /&gt;
  &lt;/Grid.RowDefinitions&gt;


  &lt;Label Grid.Column=&quot;1&quot; Style=&quot;{StaticResource headerTextStyle}&quot;&gt;
      Expense Report For:
  &lt;/Label&gt;
  &lt;Grid Margin=&quot;10&quot; Grid.Column=&quot;1&quot; Grid.Row=&quot;1&quot;&gt;

      &lt;Grid.ColumnDefinitions&gt;
          &lt;ColumnDefinition /&gt;
          &lt;ColumnDefinition /&gt;
      &lt;/Grid.ColumnDefinitions&gt;
      &lt;Grid.RowDefinitions&gt;
          &lt;RowDefinition Height=&quot;Auto&quot; /&gt;
          &lt;RowDefinition Height=&quot;Auto&quot; /&gt;
          &lt;RowDefinition /&gt;
      &lt;/Grid.RowDefinitions&gt;

      &lt;!-- Name --&gt;
      &lt;StackPanel Grid.Column=&quot;0&quot; Grid.ColumnSpan=&quot;2&quot; Grid.Row=&quot;0&quot; Orientation=&quot;Horizontal&quot;&gt;
          &lt;Label Style=&quot;{StaticResource labelStyle}&quot;&gt;Name:&lt;/Label&gt;
          &lt;Label Style=&quot;{StaticResource labelStyle}&quot;&gt;&lt;/Label&gt;
      &lt;/StackPanel&gt;

      &lt;!-- Department --&gt;
      &lt;StackPanel Grid.Column=&quot;0&quot; Grid.ColumnSpan=&quot;2&quot; Grid.Row=&quot;1&quot; 
  Orientation=&quot;Horizontal&quot;&gt;
          &lt;Label Style=&quot;{StaticResource labelStyle}&quot;&gt;Department:&lt;/Label&gt;
          &lt;Label Style=&quot;{StaticResource labelStyle}&quot;&gt;&lt;/Label&gt;
      &lt;/StackPanel&gt;

      &lt;Grid Grid.Column=&quot;0&quot; Grid.ColumnSpan=&quot;2&quot; Grid.Row=&quot;2&quot; VerticalAlignment=&quot;Top&quot; 
            HorizontalAlignment=&quot;Left&quot;&gt;
          &lt;!-- Expense type and Amount table --&gt;
          &lt;DataGrid ColumnHeaderStyle=&quot;{StaticResource columnHeaderStyle}&quot; 
                    AutoGenerateColumns=&quot;False&quot; RowHeaderWidth=&quot;0&quot; &gt;
              &lt;DataGrid.Columns&gt;
                  &lt;DataGridTextColumn Header=&quot;ExpenseType&quot; /&gt;
                  &lt;DataGridTextColumn Header=&quot;Amount&quot;  /&gt;
              &lt;/DataGrid.Columns&gt;
          &lt;/DataGrid&gt;
      &lt;/Grid&gt;
  &lt;/Grid&gt;
</code></pre>
<p>В элементы <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.controls.label">Label</a> и <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.controls.border">Border</a> будут добавлены стили.</p>
</li>
</ol>
<h2 id="bind-data-to-a-control">Привязка данных к элементу управления</h2>
<p>В этом разделе вы создадите XML-данные, привязанные к различным элементам управления.</p>
<ol>
<li><p>Откройте <em><code>ExpenseItHome.xaml</code></em>.</p>
</li>
<li><p>После открывающего элемента <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.controls.grid">Grid</a>, добавьте следующий XAML для создания <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.data.xmldataprovider">XmlDataProvider</a>, содержащий данные для каждого пользователя:</p>
<pre><code class="lang-xaml" name="ExpenseIt#21">&lt;Grid.Resources&gt;
</code></pre><pre><code class="lang-xaml" name="ExpenseIt#23">&lt;!-- Expense Report Data --&gt;
&lt;XmlDataProvider x:Key=&quot;ExpenseDataSource&quot; XPath=&quot;Expenses&quot;&gt;
    &lt;x:XData&gt;
        &lt;Expenses xmlns=&quot;&quot;&gt;
            &lt;Person Name=&quot;Mike&quot; Department=&quot;Legal&quot;&gt;
                &lt;Expense ExpenseType=&quot;Lunch&quot; ExpenseAmount=&quot;50&quot; /&gt;
                &lt;Expense ExpenseType=&quot;Transportation&quot; ExpenseAmount=&quot;50&quot; /&gt;
            &lt;/Person&gt;
            &lt;Person Name=&quot;Lisa&quot; Department=&quot;Marketing&quot;&gt;
                &lt;Expense ExpenseType=&quot;Document printing&quot;
      ExpenseAmount=&quot;50&quot;/&gt;
                &lt;Expense ExpenseType=&quot;Gift&quot; ExpenseAmount=&quot;125&quot; /&gt;
            &lt;/Person&gt;
            &lt;Person Name=&quot;John&quot; Department=&quot;Engineering&quot;&gt;
                &lt;Expense ExpenseType=&quot;Magazine subscription&quot; 
     ExpenseAmount=&quot;50&quot;/&gt;
                &lt;Expense ExpenseType=&quot;New machine&quot; ExpenseAmount=&quot;600&quot; /&gt;
                &lt;Expense ExpenseType=&quot;Software&quot; ExpenseAmount=&quot;500&quot; /&gt;
            &lt;/Person&gt;
            &lt;Person Name=&quot;Mary&quot; Department=&quot;Finance&quot;&gt;
                &lt;Expense ExpenseType=&quot;Dinner&quot; ExpenseAmount=&quot;100&quot; /&gt;
            &lt;/Person&gt;
        &lt;/Expenses&gt;
    &lt;/x:XData&gt;
&lt;/XmlDataProvider&gt;
</code></pre><pre><code class="lang-xaml" name="ExpenseIt#22">&lt;/Grid.Resources&gt;
</code></pre>
<p>Данные создаются как ресурсы <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.controls.grid">Grid</a>. Обычно такие данные загружаются в виде файла, но для простоты в этом примере они добавляются в коде.</p>
</li>
<li><p>В элемент <code>&lt;Grid.Resources&gt;</code> добавьте следующий <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.datatemplate">DataTemplate</a>, который определяет способ отображения данных в <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.controls.listbox">ListBox</a>:</p>
<pre><code class="lang-xaml" name="ExpenseIt#21">&lt;Grid.Resources&gt;
</code></pre><pre><code class="lang-xaml" name="ExpenseIt#24">&lt;!-- Name item template --&gt;
&lt;DataTemplate x:Key=&quot;nameItemTemplate&quot;&gt;
    &lt;Label Content=&quot;{Binding XPath=@Name}&quot;/&gt;
&lt;/DataTemplate&gt;
</code></pre><pre><code class="lang-xaml" name="ExpenseIt#22">&lt;/Grid.Resources&gt;
</code></pre>
<p>Дополнительные сведения о шаблонах данных см. в разделе <a href="../data/data-templating-overview.html">Общие сведения о шаблонах данных</a>.</p>
</li>
<li><p>Замените существующий <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.controls.listbox">ListBox</a> следующим XAML:</p>
<pre><code class="lang-xaml" name="ExpenseIt#25">&lt;ListBox Name=&quot;peopleListBox&quot; Grid.Column=&quot;1&quot; Grid.Row=&quot;2&quot; 
         ItemsSource=&quot;{Binding Source={StaticResource ExpenseDataSource}, XPath=Person}&quot;
         ItemTemplate=&quot;{StaticResource nameItemTemplate}&quot;&gt;
&lt;/ListBox&gt;
</code></pre>
<p>Этот XAML привязывает свойство <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.controls.itemscontrol.itemssource">ItemsSource</a> элемента <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.controls.listbox">ListBox</a> к источнику данных и применяет шаблон данных  <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.controls.itemscontrol.itemtemplate">ItemTemplate</a>.</p>
</li>
</ol>
<h2 id="connect-data-to-controls">Подключение данных к элементам управления</h2>
<p>Далее добавим код для извлечения имени, выбранного на странице <strong><code>ExpenseItHome</code></strong> и передачи его конструктору <strong>ExpenseReportPage</strong>. <strong>ExpenseReportPage</strong> задает контекст данных для переданного элемента к которому привязываются элементы управления, определенные в <em>ExpenseReportPage.xaml</em>.</p>
<ol>
<li><p>Откройте файл <em>ExpenseReportPage.xaml.vb</em> или <em>ExpenseReportPage.xaml.cs</em>.</p>
</li>
<li><p>Добавьте конструктор, принимающий объект, чтобы можно было передавать данные отчета о затратах выбранного человека.</p>
<pre><code class="lang-csharp" name="ExpenseIt#26">public partial class ExpenseReportPage : Page
{
    public ExpenseReportPage()
    {
        InitializeComponent();
    }

    // Custom constructor to pass expense report data
    public ExpenseReportPage(object data):this()
    {
        // Bind to expense report data.
        this.DataContext = data;
    }
}
</code></pre></li>
<li><p>Откройте <em><code>ExpenseItHome.xaml.vb</code></em> или <em><code>ExpenseItHome.xaml.cs</code></em>.</p>
</li>
<li><p>Измените обработчик <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.controls.primitives.buttonbase.click">Click</a>, добавив вызов конструктора, передавая отчет о затратах выбранного человека.</p>
<pre><code class="lang-csharp" name="ExpenseIt#27">private void Button_Click(object sender, RoutedEventArgs e)
{
    // View Expense Report
    ExpenseReportPage expenseReportPage = new ExpenseReportPage(this.peopleListBox.SelectedItem);
    this.NavigationService.Navigate(expenseReportPage);
}
</code></pre></li>
</ol>
<h2 id="style-data-with-data-templates">Стиль с использованием шаблонов данных</h2>
<p>В этом разделе вы обновите пользовательский Интерфейс для каждого элемента в списках с привязкой к данным с помощью шаблонов данных.</p>
<ol>
<li><p>Откройте файл <em>ExpenseReportPage.xaml</em>.</p>
</li>
<li><p>Привяжите содержимое <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.controls.label">Label</a> «Name» и «Department» к свойствам. Дополнительные сведения о привязке данных см. в разделе <a href="../data/data-binding-overview.html">Общие сведения о привязке данных</a>.</p>
<pre><code class="lang-xaml" name="ExpenseIt#31">&lt;!-- Name --&gt;
&lt;StackPanel Grid.Column=&quot;0&quot; Grid.ColumnSpan=&quot;2&quot; Grid.Row=&quot;0&quot; Orientation=&quot;Horizontal&quot;&gt;
    &lt;Label Style=&quot;{StaticResource labelStyle}&quot;&gt;Name:&lt;/Label&gt;
    &lt;Label Style=&quot;{StaticResource labelStyle}&quot; Content=&quot;{Binding XPath=@Name}&quot;&gt;&lt;/Label&gt;
&lt;/StackPanel&gt;

&lt;!-- Department --&gt;
&lt;StackPanel Grid.Column=&quot;0&quot; Grid.ColumnSpan=&quot;2&quot; Grid.Row=&quot;1&quot; Orientation=&quot;Horizontal&quot;&gt;
    &lt;Label Style=&quot;{StaticResource labelStyle}&quot;&gt;Department:&lt;/Label&gt;
    &lt;Label Style=&quot;{StaticResource labelStyle}&quot; Content=&quot;{Binding XPath=@Department}&quot;&gt;&lt;/Label&gt;
&lt;/StackPanel&gt;
</code></pre></li>
<li><p>После открывающего элемента <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.controls.grid">Grid</a> добавьте следующие шаблоны данных, которые определяют способ отображения данных отчета о расходах:</p>
<pre><code class="lang-xaml" name="ExpenseIt#30">&lt;!--Templates to display expense report data--&gt;
&lt;Grid.Resources&gt;
    &lt;!-- Reason item template --&gt;
    &lt;DataTemplate x:Key=&quot;typeItemTemplate&quot;&gt;
        &lt;Label Content=&quot;{Binding XPath=@ExpenseType}&quot;/&gt;
    &lt;/DataTemplate&gt;
    &lt;!-- Amount item template --&gt;
    &lt;DataTemplate x:Key=&quot;amountItemTemplate&quot;&gt;
        &lt;Label Content=&quot;{Binding XPath=@ExpenseAmount}&quot;/&gt;
    &lt;/DataTemplate&gt;
&lt;/Grid.Resources&gt;
</code></pre></li>
<li><p>Замените <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.controls.datagridtextcolumn">DataGridTextColumn</a> на <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.controls.datagridtemplatecolumn">DataGridTemplateColumn</a> у элемента <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.controls.datagrid">DataGrid</a> и примените шаблоны к ним.</p>
<pre><code class="lang-xaml" name="ExpenseIt#32">&lt;!-- Expense type and Amount table --&gt;
&lt;DataGrid ItemsSource=&quot;{Binding XPath=Expense}&quot; ColumnHeaderStyle=&quot;{StaticResource columnHeaderStyle}&quot; AutoGenerateColumns=&quot;False&quot; RowHeaderWidth=&quot;0&quot; &gt;
   
    &lt;DataGrid.Columns&gt;
        &lt;DataGridTemplateColumn Header=&quot;ExpenseType&quot; CellTemplate=&quot;{StaticResource typeItemTemplate}&quot; /&gt;
        &lt;DataGridTemplateColumn Header=&quot;Amount&quot; CellTemplate=&quot;{StaticResource amountItemTemplate}&quot; /&gt;
    &lt;/DataGrid.Columns&gt;
    
&lt;/DataGrid&gt;
</code></pre></li>
<li><p>Выполните сборку и запуск приложения.</p>
</li>
<li><p>Выберите &quot;person&quot;, а затем нажмите <strong>View</strong>.</p>
</li>
</ol>
<p>На следующем рисунке показаны обе страницы приложения <code>ExpenseIt</code> с элементами управления, макетом, стилями, привязками данных и примененными шаблонами данных:</p>
<p><img src="media/gettingstartedfigure5.png" alt="Снимки экрана примера ExpenseIt"></p>
<div class="NOTE">
<h5>Note</h5>
<p>В этом примере демонстрируется конкретная функциональная возможность WPF и не cj,k.lf.ncz все рекомендации по безопасности, локализации и специальным возможностям. Исчерпывающая информация о WPF и рекомендации по разработке приложений .NET Framework см. в следующих разделах:</p>
<ul>
<li><p><a href="https://docs.microsoft.com/dotnet/framework/ui-automation/accessibility-best-practices">Специальные возможности</a></p>
</li>
<li><p><a href="../security-wpf.html">Безопасность</a></p>
</li>
<li><p><a href="../advanced/wpf-globalization-and-localization-overview.html">Глобализация и локализация WPF</a></p>
</li>
<li><p><a href="../advanced/optimizing-wpf-application-performance.html">Производительность WPF</a></p>
</li>
</ul>
</div>
<h2 id="next-steps">Следующие шаги</h2>
<p>В этом пошаговом руководстве вы узнали ряд методов для создания пользовательского интерфейса с помощью Windows Presentation Foundation (WPF). Теперь вы должны знать основные стандартные блоки приложения .NET Framework для работы с данными. Более подробную информацию об архитектуре и моделях программирования WPF см. в следующих разделах:</p>
<ul>
<li><a href="../advanced/wpf-architecture.html">Архитектура WPF</a></li>
<li><a href="../advanced/xaml-overview-wpf.html">Обзор XAML (WPF)</a></li>
<li><a href="../advanced/dependency-properties-overview.html">Общие сведения о свойствах зависимостей</a></li>
<li><a href="../advanced/layout.html">Макет</a></li>
</ul>
<p>Более подробную информацию о создании приложений см. в следующих разделах:</p>
<ul>
<li><a href="../app-development/index.html">Разработка приложений</a></li>
<li><a href="../controls/index.html">Элементы управления</a></li>
<li><a href="../data/data-binding-overview.html">Общие сведения о привязке данных</a></li>
<li><a href="../graphics-multimedia/index.html">Графика и мультимедиа</a></li>
<li><a href="../advanced/documents-in-wpf.html">Документы в WPF</a></li>
</ul>
<h2 id="see-also">См. также</h2>
<ul>
<li><a href="../controls/panels-overview.html">Общие сведения о панелях</a></li>
<li><a href="../data/data-templating-overview.html">Общие сведения о шаблонах данных</a></li>
<li><a href="../app-development/building-a-wpf-application-wpf.html">Построение приложения WPF</a></li>
<li><a href="../controls/styles-and-templates.html">Стили и шаблоны</a></li>
</ul>
</article>
          </div>
          
          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">
              <div class="contribution">
                <ul class="nav">
                </ul>
              </div>
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
              <!-- <p><a class="back-to-top" href="#top">Back to top</a><p> -->
              </nav>
            </div>
          </div>
        </div>
      </div>
      
      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right">
              <a href="#top">Back to top</a>
            </span>
            <span><a href="https://github.com/MSDN-WhiteKnight/dotnet-docs-ru">Неофициальная документация по .NET на русском языке</a>. Лицензия: <a href="https://github.com/MSDN-WhiteKnight/dotnet-docs-ru/blob/main/LICENSE">CC-BY 4.0</a>. Основано на <a href="https://docs.microsoft.com/ru-ru/dotnet/">документации по .NET с Microsoft Docs</a><br>Generated by <strong>DocFX</strong></span><script type="text/javascript">(function(m,e,t,r,i,k,a){m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};m[i].l=1*new Date();k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)})(window, document, "script", "https://mc.yandex.ru/metrika/tag.js", "ym");ym(65150713, "init", {clickmap:true,trackLinks:true,accurateTrackBounce:true});</script><noscript><div><img src="https://mc.yandex.ru/watch/65150713" style="position:absolute; left:-9999px;" alt=""></div></noscript>
            
          </div>
        </div>
      </footer>
    </div>
    
    <script type="text/javascript" src="../../../styles/docfx.vendor.js"></script>
    <script type="text/javascript" src="../../../styles/docfx.js"></script>
    <script type="text/javascript" src="../../../styles/main.js"></script>
  </body>
</html>
