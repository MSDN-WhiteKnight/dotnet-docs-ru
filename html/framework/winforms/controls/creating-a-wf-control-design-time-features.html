<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>&#1055;&#1086;&#1096;&#1072;&#1075;&#1086;&#1074;&#1086;&#1077; &#1088;&#1091;&#1082;&#1086;&#1074;&#1086;&#1076;&#1089;&#1090;&#1074;&#1086;. &#1057;&#1086;&#1079;&#1076;&#1072;&#1085;&#1080;&#1077; &#1101;&#1083;&#1077;&#1084;&#1077;&#1085;&#1090;&#1072; &#1091;&#1087;&#1088;&#1072;&#1074;&#1083;&#1077;&#1085;&#1080;&#1103; Windows Forms, &#1080;&#1089;&#1087;&#1086;&#1083;&#1100;&#1079;&#1091;&#1102;&#1090;&#1089;&#1103; &#1087;&#1088;&#1077;&#1080;&#1084;&#1091;&#1097;&#1077;&#1089;&#1090;&#1074;&#1072; &#1092;&#1091;&#1085;&#1082;&#1094;&#1080;&#1081; Visual Studio &#1074;&#1086; &#1074;&#1088;&#1077;&#1084;&#1103; &#1088;&#1072;&#1079;&#1088;&#1072;&#1073;&#1086;&#1090;&#1082;&#1080; | &#1053;&#1077;&#1086;&#1092;&#1080;&#1094;&#1080;&#1072;&#1083;&#1100;&#1085;&#1072;&#1103; &#1076;&#1086;&#1082;&#1091;&#1084;&#1077;&#1085;&#1090;&#1072;&#1094;&#1080;&#1103; .NET </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="&#1055;&#1086;&#1096;&#1072;&#1075;&#1086;&#1074;&#1086;&#1077; &#1088;&#1091;&#1082;&#1086;&#1074;&#1086;&#1076;&#1089;&#1090;&#1074;&#1086;. &#1057;&#1086;&#1079;&#1076;&#1072;&#1085;&#1080;&#1077; &#1101;&#1083;&#1077;&#1084;&#1077;&#1085;&#1090;&#1072; &#1091;&#1087;&#1088;&#1072;&#1074;&#1083;&#1077;&#1085;&#1080;&#1103; Windows Forms, &#1080;&#1089;&#1087;&#1086;&#1083;&#1100;&#1079;&#1091;&#1102;&#1090;&#1089;&#1103; &#1087;&#1088;&#1077;&#1080;&#1084;&#1091;&#1097;&#1077;&#1089;&#1090;&#1074;&#1072; &#1092;&#1091;&#1085;&#1082;&#1094;&#1080;&#1081; Visual Studio &#1074;&#1086; &#1074;&#1088;&#1077;&#1084;&#1103; &#1088;&#1072;&#1079;&#1088;&#1072;&#1073;&#1086;&#1090;&#1082;&#1080; | &#1053;&#1077;&#1086;&#1092;&#1080;&#1094;&#1080;&#1072;&#1083;&#1100;&#1085;&#1072;&#1103; &#1076;&#1086;&#1082;&#1091;&#1084;&#1077;&#1085;&#1090;&#1072;&#1094;&#1080;&#1103; .NET ">
    <meta name="generator" content="docfx 2.40.12.0">
    
    <link rel="shortcut icon" href="../../../favicon.ico">
    <link rel="stylesheet" href="../../../styles/docfx.vendor.css">
    <link rel="stylesheet" href="../../../styles/docfx.css">
    <link rel="stylesheet" href="../../../styles/main.css">
    <meta property="docfx:navrel" content="../../../toc.html">
    <meta property="docfx:tocrel" content="toc.html">
    
    
    
  </head>
  <body data-spy="scroll" data-target="#affix" data-offset="120">
    <div id="wrapper">
      <header>
        
        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              
              <a class="navbar-brand" href="../../../index.html">
                <img id="logo" class="svg" src="../../../logo.svg" alt="">
              </a>
            </div>
            <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="search">
                <div class="form-group">
                  <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                </div>
              </form>
            </div>
          </div>
        </nav>
        
        <div class="subnav navbar navbar-default">
          <div class="container hide-when-search" id="breadcrumb">
            <ul class="breadcrumb">
              <li></li>
            </ul>
          </div>
        </div>
      </header>
      <div role="main" class="container body-content hide-when-search">
        
        <div class="sidenav hide-when-search">
          <a class="btn toc-toggle collapse" data-toggle="collapse" href="#sidetoggle" aria-expanded="false" aria-controls="sidetoggle">Show / Hide Table of Contents</a>
          <div class="sidetoggle collapse" id="sidetoggle">
            <div id="sidetoc"></div>
          </div>
        </div>
        <div class="article row grid-right">
          <div class="col-md-10">
            <article class="content wrap" id="_content" data-uid="">
<h1 id="walkthrough-creating-a-windows-forms-control-that-takes-advantage-of-visual-studio-design-time-features">Пошаговое руководство. Создание элемента управления Windows Forms, используются преимущества функций Visual Studio во время разработки</h1>

<p>Среда разработки для пользовательского элемента управления можно улучшить путем создания пользовательских сопоставленный конструктор.</p>
<p>В этом пошаговом руководстве описывается создание пользовательского конструктора для пользовательского элемента управления. Вы реализуете <code>MarqueeControl</code> тип и связанный класс конструктора, называется <code>MarqueeControlRootDesigner</code>.</p>
<p><code>MarqueeControl</code> Тип реализует экран, подобный бегущую строку, с анимацией огней и мигающим текстом.</p>
<p>Конструктор для этого элемента управления взаимодействует со средой разработки для предоставления пользовательского интерфейса во время разработки. С помощью пользовательского конструктора можно создать пользовательскую <code>MarqueeControl</code> реализации с анимацией огней и мигающим текстом во многих сочетаниях. Можно использовать полученный элемент управления в форме, как любой другой элемент управления Windows Forms.</p>
<p>В данном пошаговом руководстве представлены следующие задачи.</p>
<ul>
<li><p>Создание проекта</p>
</li>
<li><p>Создание проекта библиотеки элементов управления</p>
</li>
<li><p>Ссылки на проект пользовательского элемента управления</p>
</li>
<li><p>Определение пользовательского элемента управления и его конструктора</p>
</li>
<li><p>Создание экземпляра пользовательского элемента управления</p>
</li>
<li><p>Настройка проекта для отладки во время разработки</p>
</li>
<li><p>Реализация пользовательского элемента управления</p>
</li>
<li><p>Создание дочернего элемента управления для элемента управления</p>
</li>
<li><p>Создание MarqueeBorder дочерний элемент управления</p>
</li>
<li><p>Создание пользовательского конструктора тени и свойства фильтра</p>
</li>
<li><p>Обработка изменений компонентов</p>
</li>
<li><p>Добавление команд конструктора в пользовательский конструктор</p>
</li>
<li><p>Создание пользовательского редактора UITypeEditor</p>
</li>
<li><p>Тестирование элемента управления в конструкторе</p>
</li>
</ul>
<p>Когда вы закончите, пользовательский элемент управления будет выглядеть примерно следующим образом:</p>
<p><img src="media/demomarqueecontrol.gif" alt="Порядок MarqueeControl" title="DemoMarqueeControl"></p>
<p>Полный пример кода, см. в разделе <a href="https://docs.microsoft.com/previous-versions/visualstudio/visual-studio-2013/307hck25(v=vs.120)">как: Создание элемента управления Windows Forms, используются преимущества функций разработки</a>.</p>
<div class="NOTE">
<h5>Note</h5>
<p>Отображаемые диалоговые окна и команды меню могут отличаться от описанных в справке в зависимости от текущих параметров или выпуска. Чтобы изменить параметры, выберите в меню <strong>Сервис</strong> пункт <strong>Импорт и экспорт параметров</strong> . Дополнительные сведения см. в разделе <a href="/visualstudio/ide/personalizing-the-visual-studio-ide">Персонализация интегрированной среды разработки Visual Studio</a>.</p>
</div>
<h2 id="prerequisites">Предварительные требования</h2>
<p>Для выполнения данного пошагового руководства требуется:</p>
<ul>
<li>Разрешения, необходимые для создания и выполнения проектов приложений Windows Forms на компьютере, на котором установлена Visual Studio.</li>
</ul>
<h2 id="creating-the-project">Создание проекта</h2>
<p>Первым шагом является создание проекта приложения. Этот проект будет использован для построения приложения, на котором размещается пользовательский элемент управления.</p>
<h3 id="to-create-the-project">Создание проекта</h3>
<ul>
<li>Создайте проект приложения Windows Forms с именем «MarqueeControlTest» (<strong>файл</strong> &gt; <strong>New</strong> &gt; <strong>проекта</strong>  &gt;   <strong>Visual C#</strong> или <strong>Visual Basic</strong> &gt; <strong>классический рабочий стол</strong> &gt; <strong>Windows Forms Application</strong>).</li>
</ul>
<h2 id="creating-a-control-library-project">Создание проекта библиотеки элементов управления</h2>
<p>Следующим шагом является создание проекта библиотеки элементов управления. Вы создадите новый пользовательский элемент управления и его соответствующего конструктора.</p>
<h3 id="to-create-the-control-library-project">Чтобы создать проект библиотеки элементов управления</h3>
<ol>
<li><p>Добавьте проект библиотеки элементов управления Windows Forms в решение. Назовите проект «MarqueeControlLibrary.»</p>
</li>
<li><p>С помощью <strong>обозревателе решений</strong>, удалите элемент управления проекта по умолчанию, удаляя исходный файл с именем «UserControl1.cs» или «UserControl1.vb» в зависимости от выбранного языка. Дополнительные сведения см. в разделе <a href="https://docs.microsoft.com/previous-versions/visualstudio/visual-studio-2010/0ebzhwsk(v=vs.100)">Как Удалить, удаление и исключить элементы</a>.</p>
</li>
<li><p>Добавьте новый <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.forms.usercontrol">UserControl</a> элемент <code>MarqueeControlLibrary</code> проекта. Предоставить новый исходный файл базовым именем «MarqueeControl.»</p>
</li>
<li><p>С помощью <strong>обозревателе решений</strong>, создайте новую папку в <code>MarqueeControlLibrary</code> проекта. Дополнительные сведения см. в разделе <a href="https://docs.microsoft.com/previous-versions/visualstudio/visual-studio-2010/w0572c5b(v=vs.100)">Как Добавление новых элементов проекта</a>. Назовите новую папку «Design».</p>
</li>
<li><p>Щелкните правой кнопкой мыши <strong>разработки</strong> папку и добавьте новый класс. Присвойте файлу источника, базовым именем «MarqueeControlRootDesigner.»</p>
</li>
<li><p>Необходимо использовать типы из сборки System.Design, поэтому добавьте этот справочник, чтобы <code>MarqueeControlLibrary</code> проекта.</p>
<div class="NOTE">
<h5>Note</h5>
<p>Чтобы использовать сборки System.Design, ваш проект должен быть предназначен для полной версии платформы .NET Framework, а не клиентский профиль .NET Framework. Чтобы изменить целевую платформу, см. в разделе <a href="/visualstudio/ide/how-to-target-a-version-of-the-dotnet-framework">как: определить целевую версию .NET Framework</a>.</p>
</div>
</li>
</ol>
<h2 id="referencing-the-custom-control-project">Ссылки на проект пользовательского элемента управления</h2>
<p>Вы воспользуетесь <code>MarqueeControlTest</code> проекта для тестирования пользовательского элемента управления. Тестовый проект узнает об пользовательского элемента управления при добавлении в проект ссылку на <code>MarqueeControlLibrary</code> сборки.</p>
<h3 id="to-reference-the-custom-control-project">Для ссылки на проект пользовательского элемента управления</h3>
<ul>
<li>В <code>MarqueeControlTest</code> , добавьте в проект ссылку на <code>MarqueeControlLibrary</code> сборки. Обязательно используйте <strong>проекты</strong> вкладке <strong>добавить ссылку</strong> диалоговое окно, вместо ссылки на <code>MarqueeControlLibrary</code> сборки напрямую.</li>
</ul>
<h2 id="defining-a-custom-control-and-its-custom-designer">Определение пользовательского элемента управления и его конструктора</h2>
<p>Пользовательский элемент управления, производной от <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.forms.usercontrol">UserControl</a> класса. Благодаря этому ваш элемент управления для размещения других элементов управления, и он предоставляет немало функций по умолчанию элемент управления.</p>
<p>Пользовательский элемент управления будет иметь сопоставленный пользовательский конструктор. Это позволяет создать уникальный интерфейс разработки, предназначенная специально для пользовательского элемента управления.</p>
<p>Связывание элемента управления с конструктором посредством <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.componentmodel.designerattribute">DesignerAttribute</a> класса. Поскольку вы разрабатываете всей поведение времени разработки пользовательского элемента управления, пользовательский конструктор будет реализовывать <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.componentmodel.design.irootdesigner">IRootDesigner</a> интерфейс.</p>
<h3 id="to-define-a-custom-control-and-its-custom-designer">Для определения пользовательского элемента управления и его конструктора</h3>
<ol>
<li><p>Откройте <code>MarqueeControl</code> исходный файл в <strong>редактор кода</strong>. В верхней части файла импортируйте следующие пространства имен:</p>
<pre><code class="lang-csharp" name="System.Windows.Forms.Design.DocumentDesigner#220">using System;
using System.Collections;
using System.ComponentModel;
using System.ComponentModel.Design;
using System.Drawing;
using System.Windows.Forms;
using System.Windows.Forms.Design;
</code></pre><div class="WARNING">
<h5>Warning</h5>
<p>It looks like the sample you are looking for does not exist.</p>
</div></li>
<li><p>Добавить <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.componentmodel.designerattribute">DesignerAttribute</a> для <code>MarqueeControl</code> объявление класса. Это связывает пользовательский элемент управления с помощью его конструктора.</p>
<pre><code class="lang-csharp" name="System.Windows.Forms.Design.DocumentDesigner#240">[Designer( typeof( MarqueeControlLibrary.Design.MarqueeControlRootDesigner ), typeof( IRootDesigner ) )]
public class MarqueeControl : UserControl
{
</code></pre><div class="WARNING">
<h5>Warning</h5>
<p>It looks like the sample you are looking for does not exist.</p>
</div></li>
<li><p>Откройте <code>MarqueeControlRootDesigner</code> исходный файл в <strong>редактор кода</strong>. В верхней части файла импортируйте следующие пространства имен:</p>
<pre><code class="lang-csharp" name="System.Windows.Forms.Design.DocumentDesigner#520">using System;
using System.Collections;
using System.ComponentModel;
using System.ComponentModel.Design;
using System.Diagnostics;
using System.Drawing.Design;
using System.Windows.Forms;
using System.Windows.Forms.Design;
</code></pre><div class="WARNING">
<h5>Warning</h5>
<p>It looks like the sample you are looking for does not exist.</p>
</div></li>
<li><p>Измените объявление <code>MarqueeControlRootDesigner</code> наследование <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.forms.design.documentdesigner">DocumentDesigner</a> класса. Применить <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.componentmodel.toolboxitemfilterattribute">ToolboxItemFilterAttribute</a> для указания взаимодействия конструктора с <strong>элементов</strong>.</p>
<p><strong>Примечание</strong> определение <code>MarqueeControlRootDesigner</code> класса заключается в пространство имен с именем «MarqueeControlLibrary.Design.» Это объявление помещает конструктор в специальном пространстве имен зарезервированы для типов, связанных с проектированием.</p>
<pre><code class="lang-csharp" name="System.Windows.Forms.Design.DocumentDesigner#530">namespace MarqueeControlLibrary.Design
{
    [ToolboxItemFilter(&quot;MarqueeControlLibrary.MarqueeBorder&quot;, ToolboxItemFilterType.Require)]
    [ToolboxItemFilter(&quot;MarqueeControlLibrary.MarqueeText&quot;, ToolboxItemFilterType.Require)]
    [System.Security.Permissions.PermissionSet(System.Security.Permissions.SecurityAction.Demand, Name = &quot;FullTrust&quot;)] 
    public class MarqueeControlRootDesigner : DocumentDesigner
    {
</code></pre><div class="WARNING">
<h5>Warning</h5>
<p>It looks like the sample you are looking for does not exist.</p>
</div></li>
<li><p>Определение конструктора для <code>MarqueeControlRootDesigner</code> класса. Вставить <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.diagnostics.trace.writeline">WriteLine</a> инструкции в теле конструктора. Это будет полезно для отладки.</p>
<pre><code class="lang-csharp" name="System.Windows.Forms.Design.DocumentDesigner#540">public MarqueeControlRootDesigner()
{
    Trace.WriteLine(&quot;MarqueeControlRootDesigner ctor&quot;);
}
</code></pre><div class="WARNING">
<h5>Warning</h5>
<p>It looks like the sample you are looking for does not exist.</p>
</div></li>
</ol>
<h2 id="creating-an-instance-of-your-custom-control">Создание экземпляра пользовательского элемента управления</h2>
<p>Чтобы посмотреть, пользовательское поведение времени разработки элемента управления, поместите экземпляр элемента управления в форме в <code>MarqueeControlTest</code> проекта.</p>
<h3 id="to-create-an-instance-of-your-custom-control">Для создания экземпляра пользовательского элемента управления</h3>
<ol>
<li><p>Добавьте новый <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.forms.usercontrol">UserControl</a> элемент <code>MarqueeControlTest</code> проекта. Предоставить новый исходный файл базовым именем «DemoMarqueeControl.»</p>
</li>
<li><p>Откройте <code>DemoMarqueeControl</code> файл <strong>редактор кода</strong>. В верхней части файла, импортировать <code>MarqueeControlLibrary</code> пространство имен:</p>
</li>
</ol>
<pre><code class="lang-vb">Imports MarqueeControlLibrary
</code></pre>
<pre><code class="lang-csharp">using MarqueeControlLibrary;
</code></pre>
<ol>
<li><p>Измените объявление <code>DemoMarqueeControl</code> наследование <code>MarqueeControl</code> класса.</p>
</li>
<li><p>Выполните построение проекта.</p>
</li>
<li><p>Откройте <code>Form1</code> в конструкторе Windows Forms.</p>
</li>
<li><p>Найти <strong>компоненты MarqueeControlTest</strong> вкладке <strong>элементов</strong> и откройте его. Перетащите <code>DemoMarqueeControl</code> из <strong>элементов</strong> на форму.</p>
</li>
<li><p>Выполните построение проекта.</p>
</li>
</ol>
<h2 id="setting-up-the-project-for-design-time-debugging">Настройка проекта для отладки во время разработки</h2>
<p>При разработке пользовательского взаимодействия во время разработки, его будет необходимо отлаживать элементы управления и компоненты. Есть простой способ настроить проект для отладки во время разработки. Дополнительные сведения см. в разделе <a href="walkthrough-debugging-custom-windows-forms-controls-at-design-time.html">Пошаговое руководство: Отладка пользовательских Windows Forms элементы управления во время разработки</a>.</p>
<h3 id="to-set-up-the-project-for-design-time-debugging">Чтобы настроить проект для отладки во время разработки</h3>
<ol>
<li><p>Щелкните правой кнопкой мыши <code>MarqueeControlLibrary</code> проекта и выберите <strong>свойства</strong>.</p>
</li>
<li><p>В диалоговом окне «Страницы свойств MarqueeControlLibrary» выберите <strong>Отладка</strong> страницы.</p>
</li>
<li><p>В <strong>действие при запуске</strong> выберите <strong>запуск внешней программы</strong>. Вы будете отладка отдельного экземпляра Visual Studio, поэтому нажмите кнопку с многоточием (<img src="../media/vbellipsesbutton.png" alt="экрана VisualStudioEllipsesButton" title="vbEllipsesButton">) чтобы перейти в интегрированной среде разработки Visual Studio. Имя исполняемого файла — devenv.exe, и если вы установили в расположение по умолчанию, его путь — 9.0\Common7\IDE\devenv.exe %programfiles%\Microsoft Visual Studio.</p>
</li>
<li><p>Нажмите кнопку ОК, чтобы закрыть диалоговое окно.</p>
</li>
<li><p>Щелкните правой кнопкой мыши <code>MarqueeControlLibrary</code> проекта и выберите «Назначить запускаемым проектом», чтобы включить конфигурацию отладки.</p>
</li>
</ol>
<h2 id="checkpoint">Контрольная точка</h2>
<p>Теперь вы готовы отладки поведения времени разработки пользовательского элемента управления. Выяснив, что среда отладки установлено правильно, вы проверите связь между пользовательского элемента управления и конструктором.</p>
<h3 id="to-test-the-debugging-environment-and-the-designer-association">Для тестирования среды отладки и связи конструктора</h3>
<ol>
<li><p>Откройте <code>MarqueeControlRootDesigner</code> исходный файл в <strong>редактор кода</strong> и поместите точку останова на <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.diagnostics.trace.writeline">WriteLine</a> инструкции.</p>
</li>
<li><p>Нажмите клавишу F5, чтобы запустить сеанс отладки. Обратите внимание на то, что создается новый экземпляр Visual Studio.</p>
</li>
<li><p>В новом экземпляре Visual Studio откройте решение «MarqueeControlTest». Решение можно легко найти, выбрав <strong>последние проекты</strong> из <strong>файл</strong> меню. Файл решения «MarqueeControlTest.sln» отображаются как последних использовавшихся файлов.</p>
</li>
<li><p>Откройте <code>DemoMarqueeControl</code> в конструкторе. Обратите внимание, что отладочный экземпляр Visual Studio получает фокус, и выполнение остановится в точке останова. Нажмите клавишу F5, чтобы продолжить сеанс отладки.</p>
</li>
</ol>
<p>На этом этапе все, что находится в месте, для разработки и отладки пользовательского элемента управления и его связанные конструктора. В оставшейся части этого пошагового руководства будет сосредоточиться на деталях реализации таких возможностей элемента управления и конструктора.</p>
<h2 id="implementing-your-custom-control">Реализация пользовательского элемента управления</h2>
<p><code>MarqueeControl</code> Является <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.forms.usercontrol">UserControl</a> несложной настройки. Он предоставляет два метода: <code>Start</code>, которая запускает анимацию бегущей строки, и <code>Stop</code>, который останавливает анимацию. Так как <code>MarqueeControl</code> содержит дочерними элементами, реализующими <code>IMarqueeWidget</code> интерфейс, <code>Start</code> и <code>Stop</code> перечисление каждого дочернего элемента управления и вызов <code>StartMarquee</code> и <code>StopMarquee</code> методы, соответственно, на все дочерние элементы управления реализующий <code>IMarqueeWidget</code>.</p>
<p>Внешний вид <code>MarqueeBorder</code> и <code>MarqueeText</code> элементов управления в зависимости от структуры, поэтому <code>MarqueeControl</code> переопределяет <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.forms.control.onlayout">OnLayout</a> метода и вызывает <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.forms.control.performlayout">PerformLayout</a> на дочерние элементы управления этого типа.</p>
<p>Это объем <code>MarqueeControl</code> настроек. Во время выполнения функции обеспечиваются <code>MarqueeBorder</code> и <code>MarqueeText</code> элементы управления и функции разработки реализуются <code>MarqueeBorderDesigner</code> и <code>MarqueeControlRootDesigner</code> классы.</p>
<h3 id="to-implement-your-custom-control">Для реализации пользовательского элемента управления</h3>
<ol>
<li><p>Откройте <code>MarqueeControl</code> исходный файл в <strong>редактор кода</strong>. Реализуйте <code>Start</code> и <code>Stop</code> методы.</p>
<pre><code class="lang-csharp" name="System.Windows.Forms.Design.DocumentDesigner#260">public void Start()
{
    // The MarqueeControl may contain any number of 
    // controls that implement IMarqueeWidget, so 
    // find each IMarqueeWidget child and call its
    // StartMarquee method.
    foreach( Control cntrl in this.Controls )
    {
        if( cntrl is IMarqueeWidget )
        {
            IMarqueeWidget widget = cntrl as IMarqueeWidget;
            widget.StartMarquee();
        }
    }
}

public void Stop()
{
    // The MarqueeControl may contain any number of 
    // controls that implement IMarqueeWidget, so find
    // each IMarqueeWidget child and call its StopMarquee
    // method.
    foreach( Control cntrl in this.Controls )
    {
        if( cntrl is IMarqueeWidget )
        {
            IMarqueeWidget widget = cntrl as IMarqueeWidget;
            widget.StopMarquee();
        }
    }
}
</code></pre><div class="WARNING">
<h5>Warning</h5>
<p>It looks like the sample you are looking for does not exist.</p>
</div></li>
<li><p>Переопределите метод <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.forms.control.onlayout">OnLayout</a> .</p>
<pre><code class="lang-csharp" name="System.Windows.Forms.Design.DocumentDesigner#270">protected override void OnLayout(LayoutEventArgs levent)
{
    base.OnLayout (levent);

    // Repaint all IMarqueeWidget children if the layout 
    // has changed.
    foreach( Control cntrl in this.Controls )
    {
        if( cntrl is IMarqueeWidget )
        {
            Control control = cntrl as Control; 

            control.PerformLayout();
        }
    }
}
</code></pre><div class="WARNING">
<h5>Warning</h5>
<p>It looks like the sample you are looking for does not exist.</p>
</div></li>
</ol>
<h2 id="creating-a-child-control-for-your-custom-control">Создание дочернего элемента управления для элемента управления</h2>
<p><code>MarqueeControl</code> Будет размещаться два вида дочернего элемента управления: <code>MarqueeBorder</code> управления и <code>MarqueeText</code> элемента управления.</p>
<ul>
<li><p><code>MarqueeBorder</code>: Этот элемент управления рисует «lights» вокруг его границ. Индикаторы flash в последовательности, чтобы они отображались движутся вокруг границы. Скорость, с которой свет flash управляется свойством <code>UpdatePeriod</code>. Несколько других пользовательских свойств определяют другие характеристики внешнего вида элемента управления. Два метода, <code>StartMarquee</code> и <code>StopMarquee</code>, контролировать, когда анимация начинается и останавливается.</p>
</li>
<li><p><code>MarqueeText</code>: Этот элемент управления рисует мигающую строку. Как и <code>MarqueeBorder</code> элемента управления, скорость мигания текст управляется <code>UpdatePeriod</code> свойство. <code>MarqueeText</code> Элемент управления также имеет <code>StartMarquee</code> и <code>StopMarquee</code> методы общих с <code>MarqueeBorder</code> элемента управления.</p>
</li>
</ul>
<p>Во время разработки <code>MarqueeControlRootDesigner</code> позволяет эти типы двух элементов управления для добавления <code>MarqueeControl</code> в любом сочетании.</p>
<p>Общие возможности двух элементов управления представлены в интерфейсе <code>IMarqueeWidget</code>. Это позволяет <code>MarqueeControl</code> определять все дочерние элементы управления и обрабатывать их особым образом.</p>
<p>Для реализации анимации, будет использоваться <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.componentmodel.backgroundworker">BackgroundWorker</a> объектов из <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.componentmodel">System.ComponentModel</a> пространства имен. Можно использовать <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.forms.timer">Timer</a> объектов, но когда множество <code>IMarqueeWidget</code> присутствуют объекты, возможно, единственный UI-поток может справиться с анимацией.</p>
<h3 id="to-create-a-child-control-for-your-custom-control">Для создания дочернего элемента управления для элемента управления</h3>
<ol>
<li><p>Добавить новый элемент класса для <code>MarqueeControlLibrary</code> проекта. Предоставить новый исходный файл базовым именем «IMarqueeWidget.»</p>
</li>
<li><p>Откройте <code>IMarqueeWidget</code> исходный файл в <strong>редактор кода</strong> и замените объявление с <code>class</code> для <code>interface</code>:</p>
<pre><code class="lang-csharp" name="System.Windows.Forms.Design.DocumentDesigner#2">// This interface defines the contract for any class that is to
// be used in constructing a MarqueeControl.
public interface IMarqueeWidget
{
</code></pre><div class="WARNING">
<h5>Warning</h5>
<p>It looks like the sample you are looking for does not exist.</p>
</div></li>
<li><p>Добавьте следующий код, чтобы <code>IMarqueeWidget</code> интерфейс для предоставления двух методов и свойства, анимацией бегущей строки:</p>
<pre><code class="lang-csharp" name="System.Windows.Forms.Design.DocumentDesigner#3">// This interface defines the contract for any class that is to
// be used in constructing a MarqueeControl.
public interface IMarqueeWidget
{
    // This method starts the animation. If the control can 
    // contain other classes that implement IMarqueeWidget as
    // children, the control should call StartMarquee on all
    // its IMarqueeWidget child controls.
    void StartMarquee();

    // This method stops the animation. If the control can 
    // contain other classes that implement IMarqueeWidget as
    // children, the control should call StopMarquee on all
    // its IMarqueeWidget child controls.
    void StopMarquee();

    // This method specifies the refresh rate for the animation,
    // in milliseconds.
    int UpdatePeriod
    {
        get;
        set;
    }
}
</code></pre><div class="WARNING">
<h5>Warning</h5>
<p>It looks like the sample you are looking for does not exist.</p>
</div></li>
<li><p>Добавьте новый <strong>пользовательский элемент управления</strong> элемент <code>MarqueeControlLibrary</code> проекта. Предоставить новый исходный файл базовым именем «MarqueeText.»</p>
</li>
<li><p>Перетащите <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.componentmodel.backgroundworker">BackgroundWorker</a> компонент из <strong>элементов</strong> на вашей <code>MarqueeText</code> элемента управления. Этот компонент позволит <code>MarqueeText</code> обновление асинхронно элемента управления.</p>
</li>
<li><p>В окне «Свойства» задайте <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.componentmodel.backgroundworker">BackgroundWorker</a> компонента <code>WorkerReportsProgress</code> и <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.componentmodel.backgroundworker.workersupportscancellation">WorkerSupportsCancellation</a> свойства <code>true</code>. Эти параметры позволяют <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.componentmodel.backgroundworker">BackgroundWorker</a> компонент периодически вызывать <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.componentmodel.backgroundworker.progresschanged">ProgressChanged</a> событий и отменить асинхронное обновление. Дополнительные сведения см. в разделе <a href="backgroundworker-component.html">компонента BackgroundWorker</a>.</p>
</li>
<li><p>Откройте <code>MarqueeText</code> исходный файл в <strong>редактор кода</strong>. В верхней части файла импортируйте следующие пространства имен:</p>
<pre><code class="lang-csharp" name="System.Windows.Forms.Design.DocumentDesigner#120">using System;
using System.ComponentModel;
using System.ComponentModel.Design;
using System.Diagnostics;
using System.Drawing;
using System.Threading;
using System.Windows.Forms;
using System.Windows.Forms.Design;
</code></pre><div class="WARNING">
<h5>Warning</h5>
<p>It looks like the sample you are looking for does not exist.</p>
</div></li>
<li><p>Измените объявление <code>MarqueeText</code> наследование <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.forms.label">Label</a> и реализовать <code>IMarqueeWidget</code> интерфейса:</p>
<pre><code class="lang-csharp" name="System.Windows.Forms.Design.DocumentDesigner#130">[ToolboxItemFilter(&quot;MarqueeControlLibrary.MarqueeText&quot;, ToolboxItemFilterType.Require)]
public partial class MarqueeText : Label, IMarqueeWidget
{
</code></pre><div class="WARNING">
<h5>Warning</h5>
<p>It looks like the sample you are looking for does not exist.</p>
</div></li>
<li><p>Объявите переменные экземпляра, соответствующие этим свойствам и инициализируйте их в конструкторе. <code>isLit</code> Поля определяет, является ли текст для рисования с помощью цвета <code>LightColor</code> свойство.</p>
<pre><code class="lang-csharp" name="System.Windows.Forms.Design.DocumentDesigner#140">// When isLit is true, the text is painted in the light color;
// When isLit is false, the text is painted in the dark color.
// This value changes whenever the BackgroundWorker component
// raises the ProgressChanged event.
private bool isLit = true;

// These fields back the public properties.
private int updatePeriodValue = 50;
private Color lightColorValue;
private Color darkColorValue;

// These brushes are used to paint the light and dark
// colors of the text.
private Brush lightBrush;
private Brush darkBrush;

// This component updates the control asynchronously.
private BackgroundWorker backgroundWorker1;

public MarqueeText()
{
    // This call is required by the Windows.Forms Form Designer.
    InitializeComponent();

    // Initialize light and dark colors 
    // to the control's default values.
    this.lightColorValue = this.ForeColor;
    this.darkColorValue = this.BackColor;
    this.lightBrush = new SolidBrush(this.lightColorValue);
    this.darkBrush = new SolidBrush(this.darkColorValue);
}
</code></pre><div class="WARNING">
<h5>Warning</h5>
<p>It looks like the sample you are looking for does not exist.</p>
</div></li>
<li><p>Реализовать интерфейс <code>IMarqueeWidget</code>.</p>
<p><code>StartMarquee</code> И <code>StopMarquee</code> методы вызывают <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.componentmodel.backgroundworker">BackgroundWorker</a> компонента <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.componentmodel.backgroundworker.runworkerasync">RunWorkerAsync</a> и <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.componentmodel.backgroundworker.cancelasync">CancelAsync</a> методы для запуска и остановки анимации.</p>
<p><a class="xref" href="https://docs.microsoft.com/dotnet/api/system.componentmodel.categoryattribute.category">Category</a> И <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.componentmodel.browsableattribute.browsable">Browsable</a> атрибуты применяются к <code>UpdatePeriod</code> свойство, поэтому она отображается в пользовательском разделе окна свойств, под названием «Область».</p>
<pre><code class="lang-csharp" name="System.Windows.Forms.Design.DocumentDesigner#150">public virtual void StartMarquee()
{
    // Start the updating thread and pass it the UpdatePeriod.
    this.backgroundWorker1.RunWorkerAsync(this.UpdatePeriod);
}

public virtual void StopMarquee()
{
    // Stop the updating thread.
    this.backgroundWorker1.CancelAsync();
}

[Category(&quot;Marquee&quot;)]
[Browsable(true)]
public int UpdatePeriod
{
    get
    {
        return this.updatePeriodValue;
    }

    set
    {
        if (value &gt; 0)
        {
            this.updatePeriodValue = value;
        }
        else
        {
            throw new ArgumentOutOfRangeException(&quot;UpdatePeriod&quot;, &quot;must be &gt; 0&quot;);
        }
    }
}
</code></pre><div class="WARNING">
<h5>Warning</h5>
<p>It looks like the sample you are looking for does not exist.</p>
</div></li>
<li><p>Реализация методов доступа свойства. Будет предоставлять два свойства для клиентов: <code>LightColor</code> и <code>DarkColor</code>. <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.componentmodel.categoryattribute.category">Category</a> И <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.componentmodel.browsableattribute.browsable">Browsable</a> атрибуты применяются к этим свойствам, поэтому они отображаются в пользовательском разделе окна свойств, под названием «Область».</p>
<pre><code class="lang-csharp" name="System.Windows.Forms.Design.DocumentDesigner#160">[Category(&quot;Marquee&quot;)]
[Browsable(true)]
public Color LightColor
{
    get
    {
        return this.lightColorValue;
    }
    set
    {
        // The LightColor property is only changed if the 
        // client provides a different value. Comparing values 
        // from the ToArgb method is the recommended test for
        // equality between Color structs.
        if (this.lightColorValue.ToArgb() != value.ToArgb())
        {
            this.lightColorValue = value;
            this.lightBrush = new SolidBrush(value);
        }
    }
}

[Category(&quot;Marquee&quot;)]
[Browsable(true)]
public Color DarkColor
{
    get
    {
        return this.darkColorValue;
    }
    set
    {
        // The DarkColor property is only changed if the 
        // client provides a different value. Comparing values 
        // from the ToArgb method is the recommended test for
        // equality between Color structs.
        if (this.darkColorValue.ToArgb() != value.ToArgb())
        {
            this.darkColorValue = value;
            this.darkBrush = new SolidBrush(value);
        }
    }
}
</code></pre><div class="WARNING">
<h5>Warning</h5>
<p>It looks like the sample you are looking for does not exist.</p>
</div></li>
<li><p>Реализуйте обработчики для <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.componentmodel.backgroundworker">BackgroundWorker</a> компонента <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.componentmodel.backgroundworker.dowork">DoWork</a> и <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.componentmodel.backgroundworker.progresschanged">ProgressChanged</a> события.</p>
<p><a class="xref" href="https://docs.microsoft.com/dotnet/api/system.componentmodel.backgroundworker.dowork">DoWork</a> Обработчик событий бездействует в течение указанного числа миллисекунд <code>UpdatePeriod</code> затем вызывает <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.componentmodel.backgroundworker.progresschanged">ProgressChanged</a> до момента, когда код останавливает анимацию путем вызова <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.componentmodel.backgroundworker.cancelasync">CancelAsync</a>.</p>
<p><a class="xref" href="https://docs.microsoft.com/dotnet/api/system.componentmodel.backgroundworker.progresschanged">ProgressChanged</a> Обработчик событий Выбор текста состоянии светлые и темные, чтобы дать внешний вид мигать.</p>
<pre><code class="lang-csharp" name="System.Windows.Forms.Design.DocumentDesigner#180">// This method is called in the worker thread's context, 
// so it must not make any calls into the MarqueeText control.
// Instead, it communicates to the control using the 
// ProgressChanged event.
//
// The only work done in this event handler is
// to sleep for the number of milliseconds specified 
// by UpdatePeriod, then raise the ProgressChanged event.
private void backgroundWorker1_DoWork(
    object sender,
    System.ComponentModel.DoWorkEventArgs e)
{
    BackgroundWorker worker = sender as BackgroundWorker;

    // This event handler will run until the client cancels
    // the background task by calling CancelAsync.
    while (!worker.CancellationPending)
    {
        // The Argument property of the DoWorkEventArgs
        // object holds the value of UpdatePeriod, which 
        // was passed as the argument to the RunWorkerAsync
        // method. 
        Thread.Sleep((int)e.Argument);

        // The DoWork eventhandler does not actually report
        // progress; the ReportProgress event is used to 
        // periodically alert the control to update its state.
        worker.ReportProgress(0);
    }
}

// The ProgressChanged event is raised by the DoWork method.
// This event handler does work that is internal to the
// control. In this case, the text is toggled between its
// light and dark state, and the control is told to 
// repaint itself.
private void backgroundWorker1_ProgressChanged(object sender, System.ComponentModel.ProgressChangedEventArgs e)
{
    this.isLit = !this.isLit;
    this.Refresh();
}

</code></pre><div class="WARNING">
<h5>Warning</h5>
<p>It looks like the sample you are looking for does not exist.</p>
</div></li>
<li><p>Переопределить <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.forms.control.onpaint">OnPaint</a> методу для включения анимации.</p>
<pre><code class="lang-csharp" name="System.Windows.Forms.Design.DocumentDesigner#170">protected override void OnPaint(PaintEventArgs e)
{
    // The text is painted in the light or dark color,
    // depending on the current value of isLit.
    this.ForeColor =
        this.isLit ? this.lightColorValue : this.darkColorValue;

    base.OnPaint(e);
}
</code></pre><div class="WARNING">
<h5>Warning</h5>
<p>It looks like the sample you are looking for does not exist.</p>
</div></li>
<li><p>Нажмите клавишу F6 для построения решения.</p>
</li>
</ol>
<h2 id="create-the-marqueeborder-child-control">Создание MarqueeBorder дочерний элемент управления</h2>
<p><code>MarqueeBorder</code> Элемент управления является немного более сложны, чем <code>MarqueeText</code> элемента управления. Он имеет дополнительные свойства и анимации в <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.forms.control.onpaint">OnPaint</a> несколько сложнее. В принципе, это довольно похоже на <code>MarqueeText</code> элемента управления.</p>
<p>Так как <code>MarqueeBorder</code> элемент управления может иметь дочерние элементы управления, его необходимо учитывать <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.forms.control.layout">Layout</a> события.</p>
<h3 id="to-create-the-marqueeborder-control">Создание элемента управления MarqueeBorder</h3>
<ol>
<li><p>Добавьте новый <strong>пользовательский элемент управления</strong> элемент <code>MarqueeControlLibrary</code> проекта. Предоставить новый исходный файл базовым именем «MarqueeBorder.»</p>
</li>
<li><p>Перетащите <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.componentmodel.backgroundworker">BackgroundWorker</a> компонент из <strong>элементов</strong> на вашей <code>MarqueeBorder</code> элемента управления. Этот компонент позволит <code>MarqueeBorder</code> обновление асинхронно элемента управления.</p>
</li>
<li><p>В окне «Свойства» задайте <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.componentmodel.backgroundworker">BackgroundWorker</a> компонента <code>WorkerReportsProgress</code> и <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.componentmodel.backgroundworker.workersupportscancellation">WorkerSupportsCancellation</a> свойства <code>true</code>. Эти параметры позволяют <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.componentmodel.backgroundworker">BackgroundWorker</a> компонент периодически вызывать <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.componentmodel.backgroundworker.progresschanged">ProgressChanged</a> событий и отменить асинхронное обновление. Дополнительные сведения см. в разделе <a href="backgroundworker-component.html">компонента BackgroundWorker</a>.</p>
</li>
<li><p>В окне «Свойства» нажмите кнопку события. Присоединять обработчики для <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.componentmodel.backgroundworker.dowork">DoWork</a> и <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.componentmodel.backgroundworker.progresschanged">ProgressChanged</a> события.</p>
</li>
<li><p>Откройте <code>MarqueeBorder</code> исходный файл в <strong>редактор кода</strong>. В верхней части файла импортируйте следующие пространства имен:</p>
<pre><code class="lang-csharp" name="System.Windows.Forms.Design.DocumentDesigner#20">using System;
using System.ComponentModel;
using System.ComponentModel.Design;
using System.Diagnostics;
using System.Drawing;
using System.Drawing.Design;
using System.Threading;
using System.Windows.Forms;
using System.Windows.Forms.Design;
</code></pre><div class="WARNING">
<h5>Warning</h5>
<p>It looks like the sample you are looking for does not exist.</p>
</div></li>
<li><p>Измените объявление <code>MarqueeBorder</code> наследование <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.forms.panel">Panel</a> и реализовать <code>IMarqueeWidget</code> интерфейс.</p>
<pre><code class="lang-csharp" name="System.Windows.Forms.Design.DocumentDesigner#30">[Designer(typeof(MarqueeControlLibrary.Design.MarqueeBorderDesigner ))]
[ToolboxItemFilter(&quot;MarqueeControlLibrary.MarqueeBorder&quot;, ToolboxItemFilterType.Require)]
public partial class MarqueeBorder : Panel, IMarqueeWidget
{
</code></pre><div class="WARNING">
<h5>Warning</h5>
<p>It looks like the sample you are looking for does not exist.</p>
</div></li>
<li><p>Объявите два перечисления для управления <code>MarqueeBorder</code> состояние элемента управления: <code>MarqueeSpinDirection</code>, который определяет направление, в которой свет «вращение» границы, и <code>MarqueeLightShape</code>, который определяет форму индикаторы (квадратные или циклических). Поместите эти объявления до <code>MarqueeBorder</code> объявление класса.</p>
<pre><code class="lang-csharp" name="System.Windows.Forms.Design.DocumentDesigner#97">// This defines the possible values for the MarqueeBorder
// control's SpinDirection property.
public enum MarqueeSpinDirection
{
    CW,
    CCW
}

// This defines the possible values for the MarqueeBorder
// control's LightShape property.
public enum MarqueeLightShape
{
    Square,
    Circle
}
</code></pre><div class="WARNING">
<h5>Warning</h5>
<p>It looks like the sample you are looking for does not exist.</p>
</div></li>
<li><p>Объявите переменные экземпляра, соответствующие этим свойствам и инициализируйте их в конструкторе.</p>
<pre><code class="lang-csharp" name="System.Windows.Forms.Design.DocumentDesigner#40">public static int MaxLightSize = 10;

// These fields back the public properties.
private int updatePeriodValue = 50;
private int lightSizeValue = 5;
private int lightPeriodValue = 3;
private int lightSpacingValue = 1;
private Color lightColorValue;
private Color darkColorValue;
private MarqueeSpinDirection spinDirectionValue = MarqueeSpinDirection.CW;
private MarqueeLightShape lightShapeValue = MarqueeLightShape.Square;

// These brushes are used to paint the light and dark
// colors of the marquee lights.
private Brush lightBrush;
private Brush darkBrush;

// This field tracks the progress of the &quot;first&quot; light as it
// &quot;travels&quot; around the marquee border.
private int currentOffset = 0;

// This component updates the control asynchronously.
private System.ComponentModel.BackgroundWorker backgroundWorker1;

public MarqueeBorder()
{
    // This call is required by the Windows.Forms Form Designer.
    InitializeComponent();

    // Initialize light and dark colors 
    // to the control's default values.
    this.lightColorValue = this.ForeColor;
    this.darkColorValue = this.BackColor;
    this.lightBrush = new SolidBrush(this.lightColorValue);
    this.darkBrush = new SolidBrush(this.darkColorValue);

    // The MarqueeBorder control manages its own padding,
    // because it requires that any contained controls do
    // not overlap any of the marquee lights.
    int pad = 2 * (this.lightSizeValue + this.lightSpacingValue);
    this.Padding = new Padding(pad, pad, pad, pad);

    SetStyle(ControlStyles.OptimizedDoubleBuffer, true);
}
</code></pre><div class="WARNING">
<h5>Warning</h5>
<p>It looks like the sample you are looking for does not exist.</p>
</div></li>
<li><p>Реализовать интерфейс <code>IMarqueeWidget</code>.</p>
<p><code>StartMarquee</code> И <code>StopMarquee</code> методы вызывают <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.componentmodel.backgroundworker">BackgroundWorker</a> компонента <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.componentmodel.backgroundworker.runworkerasync">RunWorkerAsync</a> и <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.componentmodel.backgroundworker.cancelasync">CancelAsync</a> методы для запуска и остановки анимации.</p>
<p>Так как <code>MarqueeBorder</code> элемент управления может содержать дочерние элементы управления, <code>StartMarquee</code> метод перечисляет все дочерние элементы управления и вызовы <code>StartMarquee</code> на те, которые реализуют <code>IMarqueeWidget</code>. <code>StopMarquee</code> Метод имеется похожая реализация.</p>
<pre><code class="lang-csharp" name="System.Windows.Forms.Design.DocumentDesigner#50">public virtual void StartMarquee()
{
    // The MarqueeBorder control may contain any number of 
    // controls that implement IMarqueeWidget, so find
    // each IMarqueeWidget child and call its StartMarquee
    // method.
    foreach (Control cntrl in this.Controls)
    {
        if (cntrl is IMarqueeWidget)
        {
            IMarqueeWidget widget = cntrl as IMarqueeWidget;
            widget.StartMarquee();
        }
    }

    // Start the updating thread and pass it the UpdatePeriod.
    this.backgroundWorker1.RunWorkerAsync(this.UpdatePeriod);
}

public virtual void StopMarquee()
{
    // The MarqueeBorder control may contain any number of 
    // controls that implement IMarqueeWidget, so find
    // each IMarqueeWidget child and call its StopMarquee
    // method.
    foreach (Control cntrl in this.Controls)
    {
        if (cntrl is IMarqueeWidget)
        {
            IMarqueeWidget widget = cntrl as IMarqueeWidget;
            widget.StopMarquee();
        }
    }

    // Stop the updating thread.
    this.backgroundWorker1.CancelAsync();
}

[Category(&quot;Marquee&quot;)]
[Browsable(true)]
public virtual int UpdatePeriod
{
    get
    {
        return this.updatePeriodValue;
    }

    set
    {
        if (value &gt; 0)
        {
            this.updatePeriodValue = value;
        }
        else
        {
            throw new ArgumentOutOfRangeException(&quot;UpdatePeriod&quot;, &quot;must be &gt; 0&quot;);
        }
    }
}

</code></pre><div class="WARNING">
<h5>Warning</h5>
<p>It looks like the sample you are looking for does not exist.</p>
</div></li>
<li><p>Реализация методов доступа свойства. <code>MarqueeBorder</code> Элемент управления имеет несколько свойств, внешний вид.</p>
<pre><code class="lang-csharp" name="System.Windows.Forms.Design.DocumentDesigner#60">[Category(&quot;Marquee&quot;)]
[Browsable(true)]
public int LightSize
{
    get
    {
        return this.lightSizeValue;
    }

    set
    {
        if (value &gt; 0 &amp;&amp; value &lt;= MaxLightSize)
        {
            this.lightSizeValue = value;
            this.DockPadding.All = 2 * value;
        }
        else
        {
            throw new ArgumentOutOfRangeException(&quot;LightSize&quot;, &quot;must be &gt; 0 and &lt; MaxLightSize&quot;);
        }
    }
}

[Category(&quot;Marquee&quot;)]
[Browsable(true)]
public int LightPeriod
{
    get
    {
        return this.lightPeriodValue;
    }

    set
    {
        if (value &gt; 0)
        {
            this.lightPeriodValue = value;
        }
        else
        {
            throw new ArgumentOutOfRangeException(&quot;LightPeriod&quot;, &quot;must be &gt; 0 &quot;);
        }
    }
}

[Category(&quot;Marquee&quot;)]
[Browsable(true)]
public Color LightColor
{
    get
    {
        return this.lightColorValue;
    }

    set
    {
        // The LightColor property is only changed if the 
        // client provides a different value. Comparing values 
        // from the ToArgb method is the recommended test for
        // equality between Color structs.
        if (this.lightColorValue.ToArgb() != value.ToArgb())
        {
            this.lightColorValue = value;
            this.lightBrush = new SolidBrush(value);
        }
    }
}

[Category(&quot;Marquee&quot;)]
[Browsable(true)]
public Color DarkColor
{
    get
    {
        return this.darkColorValue;
    }

    set
    {
        // The DarkColor property is only changed if the 
        // client provides a different value. Comparing values 
        // from the ToArgb method is the recommended test for
        // equality between Color structs.
        if (this.darkColorValue.ToArgb() != value.ToArgb())
        {
            this.darkColorValue = value;
            this.darkBrush = new SolidBrush(value);
        }
    }
}

[Category(&quot;Marquee&quot;)]
[Browsable(true)]
public int LightSpacing
{
    get
    {
        return this.lightSpacingValue;
    }

    set
    {
        if (value &gt;= 0)
        {
            this.lightSpacingValue = value;
        }
        else
        {
            throw new ArgumentOutOfRangeException(&quot;LightSpacing&quot;, &quot;must be &gt;= 0&quot;);
        }
    }
}

[Category(&quot;Marquee&quot;)]
[Browsable(true)]
[EditorAttribute(typeof(LightShapeEditor), 
     typeof(System.Drawing.Design.UITypeEditor))]
public MarqueeLightShape LightShape
{
    get
    {
        return this.lightShapeValue;
    }

    set
    {
        this.lightShapeValue = value;
    }
}

[Category(&quot;Marquee&quot;)]
[Browsable(true)]
public MarqueeSpinDirection SpinDirection
{
    get
    {
        return this.spinDirectionValue;
    }

    set
    {
        this.spinDirectionValue = value;
    }
}

</code></pre><div class="WARNING">
<h5>Warning</h5>
<p>It looks like the sample you are looking for does not exist.</p>
</div></li>
<li><p>Реализуйте обработчики для <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.componentmodel.backgroundworker">BackgroundWorker</a> компонента <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.componentmodel.backgroundworker.dowork">DoWork</a> и <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.componentmodel.backgroundworker.progresschanged">ProgressChanged</a> события.</p>
<p><a class="xref" href="https://docs.microsoft.com/dotnet/api/system.componentmodel.backgroundworker.dowork">DoWork</a> Обработчик событий бездействует в течение указанного числа миллисекунд <code>UpdatePeriod</code> затем вызывает <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.componentmodel.backgroundworker.progresschanged">ProgressChanged</a> до момента, когда код останавливает анимацию путем вызова <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.componentmodel.backgroundworker.cancelasync">CancelAsync</a>.</p>
<p><a class="xref" href="https://docs.microsoft.com/dotnet/api/system.componentmodel.backgroundworker.progresschanged">ProgressChanged</a> Обработчик событий увеличивает позицию свет «базовый», из которого определяется состояние света и тени другие источники света, и вызовы <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.forms.control.refresh">Refresh</a> метод для перевода элемента управления окрашивание.</p>
<pre><code class="lang-csharp" name="System.Windows.Forms.Design.DocumentDesigner#90">// This method is called in the worker thread's context, 
// so it must not make any calls into the MarqueeBorder
// control. Instead, it communicates to the control using 
// the ProgressChanged event.
//
// The only work done in this event handler is
// to sleep for the number of milliseconds specified 
// by UpdatePeriod, then raise the ProgressChanged event.
private void backgroundWorker1_DoWork(object sender, System.ComponentModel.DoWorkEventArgs e)
{
    BackgroundWorker worker = sender as BackgroundWorker;

    // This event handler will run until the client cancels
    // the background task by calling CancelAsync.
    while (!worker.CancellationPending)
    {
        // The Argument property of the DoWorkEventArgs
        // object holds the value of UpdatePeriod, which 
        // was passed as the argument to the RunWorkerAsync
        // method. 
        Thread.Sleep((int)e.Argument);

        // The DoWork eventhandler does not actually report
        // progress; the ReportProgress event is used to 
        // periodically alert the control to update its state.
        worker.ReportProgress(0);
    }
}

// The ProgressChanged event is raised by the DoWork method.
// This event handler does work that is internal to the
// control. In this case, the currentOffset is incremented,
// and the control is told to repaint itself.
private void backgroundWorker1_ProgressChanged(
    object sender,
    System.ComponentModel.ProgressChangedEventArgs e)
{
    this.currentOffset++;
    this.Refresh();
}
</code></pre><div class="WARNING">
<h5>Warning</h5>
<p>It looks like the sample you are looking for does not exist.</p>
</div></li>
<li><p>Реализовать вспомогательные методы, <code>IsLit</code> и <code>DrawLight</code>.</p>
<p><code>IsLit</code> Метод определяет цвет источника света в заданной позиции. «Включен» огни рисуются с помощью цвета <code>LightColor</code> свойство и тех, которые находятся в «темной» рисуются с помощью цвета <code>DarkColor</code> свойство.</p>
<p><code>DrawLight</code> Метод рисует свет, используя соответствующий цвет, форму и положение.</p>
<pre><code class="lang-csharp" name="System.Windows.Forms.Design.DocumentDesigner#80">// This method determines if the marquee light at lightIndex
// should be lit. The currentOffset field specifies where
// the &quot;first&quot; light is located, and the &quot;position&quot; of the
// light given by lightIndex is computed relative to this 
// offset. If this position modulo lightPeriodValue is zero,
// the light is considered to be on, and it will be painted
// with the control's lightBrush. 
protected virtual bool IsLit(int lightIndex)
{
    int directionFactor =
        (this.spinDirectionValue == MarqueeSpinDirection.CW ? -1 : 1);

    return (
        (lightIndex + directionFactor * this.currentOffset) % this.lightPeriodValue == 0
        );
}

protected virtual void DrawLight(
    Graphics g,
    Brush brush,
    int xPos,
    int yPos)
{
    switch (this.lightShapeValue)
    {
        case MarqueeLightShape.Square:
            {
                g.FillRectangle(brush, xPos, yPos, this.lightSizeValue, this.lightSizeValue);
                break;
            }
        case MarqueeLightShape.Circle:
            {
                g.FillEllipse(brush, xPos, yPos, this.lightSizeValue, this.lightSizeValue);
                break;
            }
        default:
            {
                Trace.Assert(false, &quot;Unknown value for light shape.&quot;);
                break;
            }
    }
}
</code></pre><div class="WARNING">
<h5>Warning</h5>
<p>It looks like the sample you are looking for does not exist.</p>
</div></li>
<li><p>Переопределить <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.forms.control.onlayout">OnLayout</a> и <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.forms.control.onpaint">OnPaint</a> методы.</p>
<p><a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.forms.control.onpaint">OnPaint</a> Метод рисует огни вдоль края <code>MarqueeBorder</code> элемента управления.</p>
<p>Так как <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.forms.control.onpaint">OnPaint</a> метод зависит от размеров <code>MarqueeBorder</code> элемента управления, необходимо вызвать его при каждом изменении макета. Для этого в Переопределите <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.forms.control.onlayout">OnLayout</a> и вызвать <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.forms.control.refresh">Refresh</a>.</p>
<pre><code class="lang-csharp" name="System.Windows.Forms.Design.DocumentDesigner#70">protected override void OnLayout(LayoutEventArgs levent)
{
    base.OnLayout(levent);

    // Repaint when the layout has changed.
    this.Refresh();
}

// This method paints the lights around the border of the 
// control. It paints the top row first, followed by the
// right side, the bottom row, and the left side. The color
// of each light is determined by the IsLit method and
// depends on the light's position relative to the value
// of currentOffset.
protected override void OnPaint(PaintEventArgs e)
{
    Graphics g = e.Graphics;
    g.Clear(this.BackColor);

    base.OnPaint(e);

    // If the control is large enough, draw some lights.
    if (this.Width &gt; MaxLightSize &amp;&amp;
        this.Height &gt; MaxLightSize)
    {
        // The position of the next light will be incremented 
        // by this value, which is equal to the sum of the
        // light size and the space between two lights.
        int increment =
            this.lightSizeValue + this.lightSpacingValue;

        // Compute the number of lights to be drawn along the
        // horizontal edges of the control.
        int horizontalLights =
            (this.Width - increment) / increment;

        // Compute the number of lights to be drawn along the
        // vertical edges of the control.
        int verticalLights =
            (this.Height - increment) / increment;

        // These local variables will be used to position and
        // paint each light.
        int xPos = 0;
        int yPos = 0;
        int lightCounter = 0;
        Brush brush;

        // Draw the top row of lights.
        for (int i = 0; i &lt; horizontalLights; i++)
        {
            brush = IsLit(lightCounter) ? this.lightBrush : this.darkBrush;

            DrawLight(g, brush, xPos, yPos);

            xPos += increment;
            lightCounter++;
        }

        // Draw the lights flush with the right edge of the control.
        xPos = this.Width - this.lightSizeValue;

        // Draw the right column of lights.
        for (int i = 0; i &lt; verticalLights; i++)
        {
            brush = IsLit(lightCounter) ? this.lightBrush : this.darkBrush;

            DrawLight(g, brush, xPos, yPos);

            yPos += increment;
            lightCounter++;
        }

        // Draw the lights flush with the bottom edge of the control.
        yPos = this.Height - this.lightSizeValue;

        // Draw the bottom row of lights.
        for (int i = 0; i &lt; horizontalLights; i++)
        {
            brush = IsLit(lightCounter) ? this.lightBrush : this.darkBrush;

            DrawLight(g, brush, xPos, yPos);

            xPos -= increment;
            lightCounter++;
        }

        // Draw the lights flush with the left edge of the control.
        xPos = 0;

        // Draw the left column of lights.
        for (int i = 0; i &lt; verticalLights; i++)
        {
            brush = IsLit(lightCounter) ? this.lightBrush : this.darkBrush;

            DrawLight(g, brush, xPos, yPos);

            yPos -= increment;
            lightCounter++;
        }
    }
}
</code></pre><div class="WARNING">
<h5>Warning</h5>
<p>It looks like the sample you are looking for does not exist.</p>
</div></li>
</ol>
<h2 id="creating-a-custom-designer-to-shadow-and-filter-properties">Создание пользовательского конструктора тени и свойства фильтра</h2>
<p><code>MarqueeControlRootDesigner</code> Класс предоставляет реализацию для корневого конструктора. В дополнение к этому конструктору, работающему над <code>MarqueeControl</code>, вам потребуется пользовательский конструктор, связанный с <code>MarqueeBorder</code> элемента управления. Этот конструктор поддерживает пользовательское поведение, которое подходит в контексте пользовательского корневого конструктора.</p>
<p>В частности <code>MarqueeBorderDesigner</code> будет «затенять» и выполните фильтрацию по некоторые свойства <code>MarqueeBorder</code> элемента управления, изменив их взаимодействие со средой разработки.</p>
<p>Перехват вызовов к методу доступа свойства компонента называется «затемнения». Он позволяет конструктору для отслеживания значения, заданного пользователем и при необходимости передавать это значение в создаваемый компонент.</p>
<p>В этом примере <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.forms.control.visible">Visible</a> и <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.forms.control.enabled">Enabled</a> будут затенены <code>MarqueeBorderDesigner</code>, что предотвращает создание пользователя <code>MarqueeBorder</code> управления скрытые и отключенные во время разработки.</p>
<p>Конструкторы можно также добавлять и удалять свойства. В этом примере <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.forms.control.padding">Padding</a> свойство будет удалено во время разработки, так как <code>MarqueeBorder</code> управления программным образом задается заполнение на основе размера огней, указанных <code>LightSize</code> свойство.</p>
<p>Базовый класс для <code>MarqueeBorderDesigner</code> является <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.componentmodel.design.componentdesigner">ComponentDesigner</a>, который содержит методы, которые можно изменить атрибуты, свойства и события, предоставляемые элементом управления во время разработки:</p>
<ul>
<li><p><a class="xref" href="https://docs.microsoft.com/dotnet/api/system.componentmodel.design.componentdesigner.prefilterproperties">PreFilterProperties</a></p>
</li>
<li><p><a class="xref" href="https://docs.microsoft.com/dotnet/api/system.componentmodel.design.componentdesigner.postfilterproperties">PostFilterProperties</a></p>
</li>
<li><p><a class="xref" href="https://docs.microsoft.com/dotnet/api/system.componentmodel.design.componentdesigner.prefilterattributes">PreFilterAttributes</a></p>
</li>
<li><p><a class="xref" href="https://docs.microsoft.com/dotnet/api/system.componentmodel.design.componentdesigner.postfilterattributes">PostFilterAttributes</a></p>
</li>
<li><p><a class="xref" href="https://docs.microsoft.com/dotnet/api/system.componentmodel.design.componentdesigner.prefilterevents">PreFilterEvents</a></p>
</li>
<li><p><a class="xref" href="https://docs.microsoft.com/dotnet/api/system.componentmodel.design.componentdesigner.postfilterevents">PostFilterEvents</a></p>
</li>
</ul>
<p>При изменении общего интерфейса компонента с помощью этих методов, необходимо соблюдать эти правила:</p>
<ul>
<li><p>Добавление или удаление элементов в <code>PreFilter</code> только методы</p>
</li>
<li><p>Изменение существующих элементов в <code>PostFilter</code> только методы</p>
</li>
<li><p>Всегда следует сначала вызвать базовую реализацию <code>PreFilter</code> методы</p>
</li>
<li><p>Всегда вызывайте базовую реализацию последней в <code>PostFilter</code> методы</p>
</li>
</ul>
<p>Выполнение этих правил обеспечивает все конструкторы в среде разработки согласованное представление всех разрабатываемых компонентов.</p>
<p><a class="xref" href="https://docs.microsoft.com/dotnet/api/system.componentmodel.design.componentdesigner">ComponentDesigner</a> Класс предоставляет словарь для управления значения замещенных свойств, что снимает необходимость в создании переменных конкретного экземпляра.</p>
<h3 id="to-create-a-custom-designer-to-shadow-and-filter-properties">Для создания пользовательского конструктора тени и фильтрацию свойств</h3>
<ol>
<li><p>Щелкните правой кнопкой мыши <strong>разработки</strong> папку и добавьте новый класс. Присвойте файлу источника, базовым именем «MarqueeBorderDesigner.»</p>
</li>
<li><p>Откройте <code>MarqueeBorderDesigner</code> исходный файл в <strong>редактор кода</strong>. В верхней части файла импортируйте следующие пространства имен:</p>
<pre><code class="lang-csharp" name="System.Windows.Forms.Design.DocumentDesigner#420">using System;
using System.Collections;
using System.ComponentModel;
using System.ComponentModel.Design;
using System.Diagnostics;
using System.Windows.Forms;
using System.Windows.Forms.Design;
</code></pre><div class="WARNING">
<h5>Warning</h5>
<p>It looks like the sample you are looking for does not exist.</p>
</div></li>
<li><p>Измените объявление <code>MarqueeBorderDesigner</code> наследование <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.forms.design.parentcontroldesigner">ParentControlDesigner</a>.</p>
<p>Так как <code>MarqueeBorder</code> элемент управления может содержать дочерние элементы управления, <code>MarqueeBorderDesigner</code> наследует от <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.forms.design.parentcontroldesigner">ParentControlDesigner</a>, который обрабатывает взаимодействие родители потомки.</p>
<pre><code class="lang-csharp" name="System.Windows.Forms.Design.DocumentDesigner#430">namespace MarqueeControlLibrary.Design
{
    [System.Security.Permissions.PermissionSet(System.Security.Permissions.SecurityAction.Demand, Name = &quot;FullTrust&quot;)] 
    public class MarqueeBorderDesigner : ParentControlDesigner
    {
</code></pre><div class="WARNING">
<h5>Warning</h5>
<p>It looks like the sample you are looking for does not exist.</p>
</div></li>
<li><p>Переопределить базовую реализацию <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.componentmodel.design.componentdesigner.prefilterproperties">PreFilterProperties</a>.</p>
<pre><code class="lang-csharp" name="System.Windows.Forms.Design.DocumentDesigner#450">protected override void PreFilterProperties(IDictionary properties)
{
    base.PreFilterProperties(properties);
    
    if (properties.Contains(&quot;Padding&quot;))
    {
        properties.Remove(&quot;Padding&quot;);
    }

    properties[&quot;Visible&quot;] = TypeDescriptor.CreateProperty(
        typeof(MarqueeBorderDesigner),
        (PropertyDescriptor)properties[&quot;Visible&quot;],
        new Attribute[0]);

    properties[&quot;Enabled&quot;] = TypeDescriptor.CreateProperty(
        typeof(MarqueeBorderDesigner),
        (PropertyDescriptor)properties[&quot;Enabled&quot;],
        new Attribute[0]);
}
</code></pre><div class="WARNING">
<h5>Warning</h5>
<p>It looks like the sample you are looking for does not exist.</p>
</div></li>
<li><p>Реализуйте свойства <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.forms.control.enabled">Enabled</a> и <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.forms.control.visible">Visible</a>. Эти реализации теневые свойства элемента управления.</p>
<pre><code class="lang-csharp" name="System.Windows.Forms.Design.DocumentDesigner#440">public bool Visible
{
    get
    {
        return (bool)ShadowProperties[&quot;Visible&quot;];
    }
    set
    {
        this.ShadowProperties[&quot;Visible&quot;] = value;
    }
}

public bool Enabled
{
    get
    {
        return (bool)ShadowProperties[&quot;Enabled&quot;];
    }
    set
    {
        this.ShadowProperties[&quot;Enabled&quot;] = value;
    }
}
</code></pre><div class="WARNING">
<h5>Warning</h5>
<p>It looks like the sample you are looking for does not exist.</p>
</div></li>
</ol>
<h2 id="handling-component-changes">Обработка изменений компонентов</h2>
<p><code>MarqueeControlRootDesigner</code> Класс предоставляет пользовательский интерфейс во время разработки для вашей <code>MarqueeControl</code> экземпляров. Большая часть функций разработки наследуется от <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.forms.design.documentdesigner">DocumentDesigner</a> класса; ваш код будет реализовать два изменения: обработки компонентов и добавление команд конструктора.</p>
<p>Как пользователям при проектировании их <code>MarqueeControl</code> экземпляров, корневой конструктор будет отслеживать изменения <code>MarqueeControl</code> и его дочерним элементам. Среда разработки предлагает служба <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.componentmodel.design.icomponentchangeservice">IComponentChangeService</a>для отслеживания изменений состояния компонентов.</p>
<p>Получить ссылку на эту службу путем запроса среды с <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.componentmodel.design.componentdesigner.getservice">GetService</a> метод. Если запрос выполнен успешно, конструктор можно присоединить обработчик для <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.componentmodel.design.icomponentchangeservice.componentchanged">ComponentChanged</a> событий и выполнения всех задач, необходимых для поддержания согласованного состояния во время разработки.</p>
<p>В случае использования <code>MarqueeControlRootDesigner</code> , будет вызывать <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.forms.control.refresh">Refresh</a> метод на каждом <code>IMarqueeWidget</code> объект, содержащийся в <code>MarqueeControl</code>. Это приведет к <code>IMarqueeWidget</code> объект окрашивание соответствующим образом при его родительского элемента, такие как свойства <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.forms.control.size">Size</a> изменяются.</p>
<h3 id="to-handle-component-changes">Обработка изменений компонентов</h3>
<ol>
<li><p>Откройте <code>MarqueeControlRootDesigner</code> исходный файл в <strong>редактор кода</strong> и переопределить <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.forms.design.documentdesigner.initialize">Initialize</a> метод. Вызвать базовую реализацию <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.forms.design.documentdesigner.initialize">Initialize</a> и запрашивать <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.componentmodel.design.icomponentchangeservice">IComponentChangeService</a>.</p>
<pre><code class="lang-csharp" name="System.Windows.Forms.Design.DocumentDesigner#580">base.Initialize(component);

IComponentChangeService cs =
    GetService(typeof(IComponentChangeService)) 
    as IComponentChangeService;

if (cs != null)
{
    cs.ComponentChanged +=
        new ComponentChangedEventHandler(OnComponentChanged);
}
</code></pre><div class="WARNING">
<h5>Warning</h5>
<p>It looks like the sample you are looking for does not exist.</p>
</div></li>
<li><p>Реализуйте <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.componentmodel.design.icomponentchangeservice.oncomponentchanged">OnComponentChanged</a> обработчик событий. Проверьте тип компонента отправки, и если это <code>IMarqueeWidget</code>, вызовите его <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.forms.control.refresh">Refresh</a> метод.</p>
<pre><code class="lang-csharp" name="System.Windows.Forms.Design.DocumentDesigner#560">private void OnComponentChanged(
    object sender,
    ComponentChangedEventArgs e)
{
    if (e.Component is IMarqueeWidget)
    {
        this.Control.Refresh();
    }
}
</code></pre><div class="WARNING">
<h5>Warning</h5>
<p>It looks like the sample you are looking for does not exist.</p>
</div></li>
</ol>
<h2 id="adding-designer-verbs-to-your-custom-designer">Добавление команд конструктора в пользовательский конструктор</h2>
<p>Команда конструктора является команды меню, связанная с обработчиком событий. Команды конструктора, добавляемые в контекстное меню компонента во время разработки. Дополнительные сведения см. в разделе <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.componentmodel.design.designerverb">DesignerVerb</a>.</p>
<p>Вы добавите две команды в конструкторы: <strong>Запуск теста</strong> и <strong>остановить тестовый</strong>. Эти команды можно просмотреть его поведение во время выполнения <code>MarqueeControl</code> во время разработки. Эти команды будут добавлены к <code>MarqueeControlRootDesigner</code>.</p>
<p>При <strong>запуска теста</strong> — вызывается, обработчик событий команды вызовет <code>StartMarquee</code> метод <code>MarqueeControl</code>. При <strong>Остановить тест</strong> будет вызван, будет вызывать обработчик событий команды <code>StopMarquee</code> метод <code>MarqueeControl</code>. Реализация <code>StartMarquee</code> и <code>StopMarquee</code> методы вызывать эти методы в элементах управления, которые реализуют <code>IMarqueeWidget</code>, поэтому любые содержащиеся <code>IMarqueeWidget</code> элементы управления также будет участвовать в тесте.</p>
<h3 id="to-add-designer-verbs-to-your-custom-designers">Добавление команд конструктора в пользовательский конструктор</h3>
<ol>
<li><p>В <code>MarqueeControlRootDesigner</code> добавьте обработчики событий с именем <code>OnVerbRunTest</code> и <code>OnVerbStopTest</code>.</p>
<pre><code class="lang-csharp" name="System.Windows.Forms.Design.DocumentDesigner#570">private void OnVerbRunTest(object sender, EventArgs e)
{
    MarqueeControl c = this.Control as MarqueeControl;

    c.Start();
}

private void OnVerbStopTest(object sender, EventArgs e)
{
    MarqueeControl c = this.Control as MarqueeControl;

    c.Stop();
}
</code></pre><div class="WARNING">
<h5>Warning</h5>
<p>It looks like the sample you are looking for does not exist.</p>
</div></li>
<li><p>Подключите эти обработчики событий с соответствующими командами конструктора. <code>MarqueeControlRootDesigner</code> наследует <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.componentmodel.design.designerverbcollection">DesignerVerbCollection</a> от своего базового класса. Вы создадите два новых <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.componentmodel.design.designerverb">DesignerVerb</a> объектов и добавления их в эту коллекцию в <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.forms.design.documentdesigner.initialize">Initialize</a> метод.</p>
<pre><code class="lang-csharp" name="System.Windows.Forms.Design.DocumentDesigner#590">this.Verbs.Add(
    new DesignerVerb(&quot;Run Test&quot;,
    new EventHandler(OnVerbRunTest))
    );

this.Verbs.Add(
    new DesignerVerb(&quot;Stop Test&quot;,
    new EventHandler(OnVerbStopTest))
    );
</code></pre><div class="WARNING">
<h5>Warning</h5>
<p>It looks like the sample you are looking for does not exist.</p>
</div></li>
</ol>
<h2 id="creating-a-custom-uitypeeditor">Создание пользовательского редактора UITypeEditor</h2>
<p>При создании пользовательского взаимодействия во время разработки для пользователей, часто желательно изменить взаимодействие с окном свойств. Это можно сделать, создав <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.drawing.design.uitypeeditor">UITypeEditor</a>. Дополнительные сведения см. в разделе <a href="https://docs.microsoft.com/previous-versions/visualstudio/visual-studio-2013/fd3kt7d5(v=vs.120)">Как Создание редактора типов пользовательского интерфейса</a>.</p>
<p><code>MarqueeBorder</code> Элемент управления предоставляет несколько свойств в окне «Свойства». Два из этих свойств <code>MarqueeSpinDirection</code> и <code>MarqueeLightShape</code> , представлены перечислениями. Чтобы проиллюстрировать использование редактора типов пользовательского интерфейса, <code>MarqueeLightShape</code> свойство будет иметь сопоставленный <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.drawing.design.uitypeeditor">UITypeEditor</a> класса.</p>
<h3 id="to-create-a-custom-ui-type-editor">Создание редактора типов пользовательского интерфейса</h3>
<ol>
<li><p>Откройте <code>MarqueeBorder</code> исходный файл в <strong>редактор кода</strong>.</p>
</li>
<li><p>В определении <code>MarqueeBorder</code> класса, объявите класс с именем <code>LightShapeEditor</code> , наследуемый от класса <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.drawing.design.uitypeeditor">UITypeEditor</a>.</p>
<pre><code class="lang-csharp" name="System.Windows.Forms.Design.DocumentDesigner#96">// This class demonstrates the use of a custom UITypeEditor. 
// It allows the MarqueeBorder control's LightShape property
// to be changed at design time using a customized UI element
// that is invoked by the Properties window. The UI is provided
// by the LightShapeSelectionControl class.
internal class LightShapeEditor : UITypeEditor
{
</code></pre><div class="WARNING">
<h5>Warning</h5>
<p>It looks like the sample you are looking for does not exist.</p>
</div></li>
<li><p>Объявите <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.forms.design.iwindowsformseditorservice">IWindowsFormsEditorService</a> переменная экземпляра с именем <code>editorService</code>.</p>
<pre><code class="lang-csharp" name="System.Windows.Forms.Design.DocumentDesigner#92">private IWindowsFormsEditorService editorService = null;
</code></pre><div class="WARNING">
<h5>Warning</h5>
<p>It looks like the sample you are looking for does not exist.</p>
</div></li>
<li><p>Переопределите метод <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.drawing.design.uitypeeditor.geteditstyle">GetEditStyle</a> . Эта реализация возвращает <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.drawing.design.uitypeeditoreditstyle#System_Drawing_Design_UITypeEditorEditStyle_DropDown">DropDown</a>, который среда разработки способ отображения <code>LightShapeEditor</code>.</p>
<pre><code class="lang-csharp" name="System.Windows.Forms.Design.DocumentDesigner#93">public override UITypeEditorEditStyle GetEditStyle(
System.ComponentModel.ITypeDescriptorContext context)
{
    return UITypeEditorEditStyle.DropDown;
}
</code></pre><div class="WARNING">
<h5>Warning</h5>
<p>It looks like the sample you are looking for does not exist.</p>
</div></li>
<li><p>Переопределите метод <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.drawing.design.uitypeeditor.editvalue">EditValue</a> . Эта реализация запрашивает среду проектирования для <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.forms.design.iwindowsformseditorservice">IWindowsFormsEditorService</a> объекта. Если успешно, он создает <code>LightShapeSelectionControl</code>. <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.forms.design.iwindowsformseditorservice.dropdowncontrol">DropDownControl</a> Метод вызывается для запуска <code>LightShapeEditor</code>. Возвращаемое значение из этого вызова возвращается в среду разработки.</p>
<pre><code class="lang-csharp" name="System.Windows.Forms.Design.DocumentDesigner#94">public override object EditValue(
    ITypeDescriptorContext context,
    IServiceProvider provider,
    object value)
{
    if (provider != null)
    {
        editorService =
            provider.GetService(
            typeof(IWindowsFormsEditorService))
            as IWindowsFormsEditorService;
    }

    if (editorService != null)
    {
        LightShapeSelectionControl selectionControl =
            new LightShapeSelectionControl(
            (MarqueeLightShape)value,
            editorService);

        editorService.DropDownControl(selectionControl);

        value = selectionControl.LightShape;
    }

    return value;
}
</code></pre><div class="WARNING">
<h5>Warning</h5>
<p>It looks like the sample you are looking for does not exist.</p>
</div></li>
</ol>
<h2 id="creating-a-view-control-for-your-custom-uitypeeditor">Создание элемента управления представления для пользовательского редактора UITypeEditor</h2>
<ol>
<li><code>MarqueeLightShape</code> Свойство поддерживает два типа простых фигур: <code>Square</code> и <code>Circle</code>. Вы создадите пользовательский элемент управления, используемая исключительно для графическое отображение этих значений в окне «Свойства». Этот пользовательский элемент управления будет использоваться ваш <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.drawing.design.uitypeeditor">UITypeEditor</a> для взаимодействия в окне &quot;Свойства&quot;.</li>
</ol>
<h3 id="to-create-a-view-control-for-your-custom-ui-type-editor">Чтобы создать элемент управления для пользовательского редактора типов</h3>
<ol>
<li><p>Добавьте новый <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.forms.usercontrol">UserControl</a> элемент <code>MarqueeControlLibrary</code> проекта. Предоставить новый исходный файл базовым именем «LightShapeSelectionControl.»</p>
</li>
<li><p>Перетащите два <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.forms.panel">Panel</a> управляет из <strong>элементов</strong> на <code>LightShapeSelectionControl</code>. Присвойте им названия <code>squarePanel</code> и <code>circlePanel</code>. Расположите их рядом друг с другом. Задайте <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.forms.control.size">Size</a> свойства обоих <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.forms.panel">Panel</a> элементы управления (60, 60). Задайте <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.forms.control.location">Location</a> свойство <code>squarePanel</code> управления (8, 10). Задайте <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.forms.control.location">Location</a> свойство <code>circlePanel</code> управления (80, 10). Наконец, установите <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.forms.control.size">Size</a> свойство <code>LightShapeSelectionControl</code> для (150, 80).</p>
</li>
<li><p>Откройте <code>LightShapeSelectionControl</code> исходный файл в <strong>редактор кода</strong>. В верхней части файла, импортировать <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.forms.design">System.Windows.Forms.Design</a> пространство имен:</p>
</li>
</ol>
<pre><code class="lang-vb">Imports System.Windows.Forms.Design
</code></pre>
<pre><code class="lang-csharp">using System.Windows.Forms.Design;
</code></pre>
<ol>
<li><p>Реализуйте <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.forms.control.click">Click</a> обработчики событий для <code>squarePanel</code> и <code>circlePanel</code> элементов управления. Эти методы вызывают <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.forms.design.iwindowsformseditorservice.closedropdown">CloseDropDown</a> для окончания <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.drawing.design.uitypeeditor">UITypeEditor</a> сеанса редактирования.</p>
<pre><code class="lang-csharp" name="System.Windows.Forms.Design.DocumentDesigner#390">private void squarePanel_Click(object sender, EventArgs e)
{
    this.lightShapeValue = MarqueeLightShape.Square;
    
    this.Invalidate( false );
    
    this.editorService.CloseDropDown();
}

private void circlePanel_Click(object sender, EventArgs e)
{
    this.lightShapeValue = MarqueeLightShape.Circle;

    this.Invalidate( false );

    this.editorService.CloseDropDown();
}
</code></pre><div class="WARNING">
<h5>Warning</h5>
<p>It looks like the sample you are looking for does not exist.</p>
</div></li>
<li><p>Объявите <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.forms.design.iwindowsformseditorservice">IWindowsFormsEditorService</a> переменная экземпляра с именем <code>editorService</code>.</p>
</li>
</ol>
<pre><code class="lang-vb">Private editorService As IWindowsFormsEditorService
</code></pre>
<pre><code class="lang-csharp">private IWindowsFormsEditorService editorService;
</code></pre>
<ol>
<li><p>Объявите <code>MarqueeLightShape</code> переменная экземпляра с именем <code>lightShapeValue</code>.</p>
<pre><code class="lang-csharp" name="System.Windows.Forms.Design.DocumentDesigner#330">private MarqueeLightShape lightShapeValue = MarqueeLightShape.Square;
</code></pre><div class="WARNING">
<h5>Warning</h5>
<p>It looks like the sample you are looking for does not exist.</p>
</div></li>
<li><p>В <code>LightShapeSelectionControl</code> конструктор, присоединение <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.forms.control.click">Click</a> обработчики событий для <code>squarePanel</code> и <code>circlePanel</code> элементов управления <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.forms.control.click">Click</a> события. Кроме того, задайте перегрузки конструктора, которая назначает <code>MarqueeLightShape</code> значение из среды разработки для <code>lightShapeValue</code> поля.</p>
<pre><code class="lang-csharp" name="System.Windows.Forms.Design.DocumentDesigner#340">// This constructor takes a MarqueeLightShape value from the
// design-time environment, which will be used to display
// the initial state.
public LightShapeSelectionControl( 
    MarqueeLightShape lightShape,
    IWindowsFormsEditorService editorService )
{
    // This call is required by the designer.
    InitializeComponent();

    // Cache the light shape value provided by the 
    // design-time environment.
    this.lightShapeValue = lightShape;

    // Cache the reference to the editor service.
    this.editorService = editorService;

    // Handle the Click event for the two panels. 
    this.squarePanel.Click += new EventHandler(squarePanel_Click);
    this.circlePanel.Click += new EventHandler(circlePanel_Click);
}
</code></pre><div class="WARNING">
<h5>Warning</h5>
<p>It looks like the sample you are looking for does not exist.</p>
</div></li>
<li><p>В <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.componentmodel.component.dispose">Dispose</a> метода отсоединения <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.forms.control.click">Click</a> обработчики событий.</p>
<pre><code class="lang-csharp" name="System.Windows.Forms.Design.DocumentDesigner#350">protected override void Dispose( bool disposing )
{
    if( disposing )
    {
        // Be sure to unhook event handlers
        // to prevent &quot;lapsed listener&quot; leaks.
        this.squarePanel.Click -= 
            new EventHandler(squarePanel_Click);
        this.circlePanel.Click -= 
            new EventHandler(circlePanel_Click);

        if(components != null)
        {
            components.Dispose();
        }
    }
    base.Dispose( disposing );
}
</code></pre><div class="WARNING">
<h5>Warning</h5>
<p>It looks like the sample you are looking for does not exist.</p>
</div></li>
<li><p>В <strong>обозревателе решений</strong> нажмите кнопку <strong>Показать все файлы</strong>. Откройте файл LightShapeSelectionControl.Designer.cs или LightShapeSelectionControl.Designer.vb и удалить определение по умолчанию <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.componentmodel.component.dispose">Dispose</a> метод.</p>
</li>
<li><p>Реализуйте свойство <code>LightShape</code>.</p>
<pre><code class="lang-csharp" name="System.Windows.Forms.Design.DocumentDesigner#360">// LightShape is the property for which this control provides
// a custom user interface in the Properties window.
public MarqueeLightShape LightShape
{
    get
    {
        return this.lightShapeValue;
    }
    
    set
    {
        if( this.lightShapeValue != value )
        {
            this.lightShapeValue = value;
        }
    }
}
</code></pre><div class="WARNING">
<h5>Warning</h5>
<p>It looks like the sample you are looking for does not exist.</p>
</div></li>
<li><p>Переопределите метод <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.forms.control.onpaint">OnPaint</a> . Эта реализация будет рисовать квадрат с заливкой и круг. Он также выделяет выбранное значение путем рисования границы вокруг одной формы или другого.</p>
<pre><code class="lang-csharp" name="System.Windows.Forms.Design.DocumentDesigner#380">protected override void OnPaint(PaintEventArgs e)
{
    base.OnPaint (e);

    using( 
        Graphics gSquare = this.squarePanel.CreateGraphics(),
        gCircle = this.circlePanel.CreateGraphics() )
    {	
        // Draw a filled square in the client area of
        // the squarePanel control.
        gSquare.FillRectangle(
            Brushes.Red, 
            0,
            0,
            this.squarePanel.Width,
            this.squarePanel.Height
            );

        // If the Square option has been selected, draw a 
        // border inside the squarePanel.
        if( this.lightShapeValue == MarqueeLightShape.Square )
        {
            gSquare.DrawRectangle( 
                Pens.Black,
                0,
                0,
                this.squarePanel.Width-1,
                this.squarePanel.Height-1);
        }

        // Draw a filled circle in the client area of
        // the circlePanel control.
        gCircle.Clear( this.circlePanel.BackColor );
        gCircle.FillEllipse( 
            Brushes.Blue, 
            0,
            0,
            this.circlePanel.Width, 
            this.circlePanel.Height
            );

        // If the Circle option has been selected, draw a 
        // border inside the circlePanel.
        if( this.lightShapeValue == MarqueeLightShape.Circle )
        {
            gCircle.DrawRectangle( 
                Pens.Black,
                0,
                0,
                this.circlePanel.Width-1,
                this.circlePanel.Height-1);
        }
    }	
}
</code></pre><div class="WARNING">
<h5>Warning</h5>
<p>It looks like the sample you are looking for does not exist.</p>
</div></li>
</ol>
<h2 id="testing-your-custom-control-in-the-designer">Тестирование элемента управления в конструкторе</h2>
<p>На этом этапе вы можете создавать <code>MarqueeControlLibrary</code> проекта. Проверьте реализацию, создав элемент управления, который наследует от <code>MarqueeControl</code> класс и использовать его в форме.</p>
<h3 id="to-create-a-custom-marqueecontrol-implementation">Чтобы создать пользовательскую реализацию MarqueeControl</h3>
<ol>
<li><p>Откройте <code>DemoMarqueeControl</code> в конструкторе Windows Forms. Это создает экземпляр класса <code>DemoMarqueeControl</code> введите и отображает его в экземпляр <code>MarqueeControlRootDesigner</code> типа.</p>
</li>
<li><p>В <strong>элементов</strong>откройте <strong>компоненты MarqueeControlLibrary</strong> вкладки. Вы увидите <code>MarqueeBorder</code> и <code>MarqueeText</code> элементов управления, доступных для выбора.</p>
</li>
<li><p>Перетащите экземпляр <code>MarqueeBorder</code> управления <code>DemoMarqueeControl</code> область конструктора. Прикрепите <code>MarqueeBorder</code> управления родительскому элементу управления.</p>
</li>
<li><p>Перетащите экземпляр <code>MarqueeText</code> управления <code>DemoMarqueeControl</code> область конструктора.</p>
</li>
<li><p>Постройте решение.</p>
</li>
<li><p>Щелкните правой кнопкой мыши <code>DemoMarqueeControl</code> и в контекстном меню выберите <strong>запуска теста</strong> параметр для запуска анимации. Нажмите кнопку <strong>Остановить тест</strong> для остановки анимации.</p>
</li>
<li><p>Откройте форму <strong>Form1</strong> в конструкторе.</p>
</li>
<li><p>Разместите два <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.forms.button">Button</a> элементов управления формы. Присвойте им названия <code>startButton</code> и <code>stopButton</code>и измените <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.forms.control.text">Text</a> значения свойств <strong>запустить</strong> и <strong>остановить</strong>, соответственно.</p>
</li>
<li><p>Реализуйте <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.forms.control.click">Click</a> обработчики событий для обоих <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.forms.button">Button</a> элементов управления.</p>
</li>
<li><p>В <strong>элементов</strong>откройте <strong>компоненты MarqueeControlTest</strong> вкладки. Вы увидите <code>DemoMarqueeControl</code> доступны для выбора.</p>
</li>
<li><p>Перетащите экземпляр <code>DemoMarqueeControl</code> на <strong>Form1</strong> область конструктора.</p>
</li>
<li><p>В <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.forms.control.click">Click</a> вызывать обработчики событий, <code>Start</code> и <code>Stop</code> методы <code>DemoMarqueeControl</code>.</p>
</li>
</ol>
<pre><code class="lang-vb">Private Sub startButton_Click(sender As Object, e As System.EventArgs)
    Me.demoMarqueeControl1.Start()
End Sub 'startButton_Click

Private Sub stopButton_Click(sender As Object, e As System.EventArgs)
Me.demoMarqueeControl1.Stop()
End Sub 'stopButton_Click
</code></pre>
<pre><code class="lang-csharp">private void startButton_Click(object sender, System.EventArgs e)
{
    this.demoMarqueeControl1.Start();
}

private void stopButton_Click(object sender, System.EventArgs e)
{
    this.demoMarqueeControl1.Stop();
}
</code></pre>
<ol>
<li>Задайте <code>MarqueeControlTest</code> проект в качестве запускаемого проекта и запустите его. Отобразится форма вашей <code>DemoMarqueeControl</code>. Нажмите кнопку <strong>запустить</strong> кнопки для запуска анимации. Вы увидите текст мигающий и источники света, перемещение вокруг границы.</li>
</ol>
<h2 id="next-steps">Следующие шаги</h2>
<p><code>MarqueeControlLibrary</code> Показан пример простой реализации пользовательских элементов управления и связанные конструкторы. В этом примере можно делать более сложным несколькими способами:</p>
<ul>
<li><p>Изменить значения свойств для <code>DemoMarqueeControl</code> в конструкторе. Добавить дополнительные <code>MarqueBorder</code> управляет и прикрепите их к родительским экземплярам для создания эффекта вложенных. Эксперимент с различными параметрами для <code>UpdatePeriod</code> и свойств, связанных с свет.</p>
</li>
<li><p>Создание собственных реализаций <code>IMarqueeWidget</code>. Можно, например, создать мигания «neon знак» или знак анимированных с несколькими образами.</p>
</li>
<li><p>Дальнейшая настройка поведения во время разработки. Попробуйте затенить больше свойств, чем <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.forms.control.enabled">Enabled</a> и <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.forms.control.visible">Visible</a>, и можно добавить новые свойства. Добавьте новые команды конструктора для упрощения общих задач, таких как закрепление дочерних элементов управления.</p>
</li>
<li><p>Лицензии <code>MarqueeControl</code>. Дополнительные сведения см. в разделе <a href="https://docs.microsoft.com/previous-versions/visualstudio/visual-studio-2013/fe8b1eh9(v=vs.120)">Как Лицензирование компонентов и элементов управления</a>.</p>
</li>
<li><p>Контролировать порядок сериализации элементов управления и способ создания кода для них. Дополнительные сведения см. в разделе <a href="../../reflection-and-codedom/dynamic-source-code-generation-and-compilation.md">динамического кода Создание и компиляция исходного</a>.</p>
</li>
</ul>
<h2 id="see-also">См. также</h2>
<ul>
<li><a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.forms.usercontrol">UserControl</a></li>
<li><a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.forms.design.parentcontroldesigner">ParentControlDesigner</a></li>
<li><a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.forms.design.documentdesigner">DocumentDesigner</a></li>
<li><a class="xref" href="https://docs.microsoft.com/dotnet/api/system.componentmodel.design.irootdesigner">IRootDesigner</a></li>
<li><a class="xref" href="https://docs.microsoft.com/dotnet/api/system.componentmodel.design.designerverb">DesignerVerb</a></li>
<li><a class="xref" href="https://docs.microsoft.com/dotnet/api/system.drawing.design.uitypeeditor">UITypeEditor</a></li>
<li><a class="xref" href="https://docs.microsoft.com/dotnet/api/system.componentmodel.backgroundworker">BackgroundWorker</a></li>
<li><a href="https://docs.microsoft.com/previous-versions/visualstudio/visual-studio-2013/307hck25(v=vs.120)">Практическое руководство. Создание элемента управления Windows Forms, используются преимущества функций времени разработки</a></li>
<li><a href="https://docs.microsoft.com/previous-versions/visualstudio/visual-studio-2013/37899azc(v=vs.120)">Расширения поддержки времени разработки</a></li>
<li><a href="https://docs.microsoft.com/previous-versions/visualstudio/visual-studio-2013/h51z5c0x(v=vs.120)">Пользовательские конструкторы</a></li>
</ul>
</article>
          </div>
          
          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">
              <div class="contribution">
                <ul class="nav">
                </ul>
              </div>
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
              <!-- <p><a class="back-to-top" href="#top">Back to top</a><p> -->
              </nav>
            </div>
          </div>
        </div>
      </div>
      
      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right">
              <a href="#top">Back to top</a>
            </span>
            <span><a href="https://github.com/MSDN-WhiteKnight/dotnet-docs-ru">Неофициальная документация по .NET на русском языке</a>. Лицензия: <a href="https://github.com/MSDN-WhiteKnight/dotnet-docs-ru/blob/main/LICENSE">CC-BY 4.0</a>. Основано на <a href="https://docs.microsoft.com/ru-ru/dotnet/">документации по .NET с Microsoft Docs</a><br>Generated by <strong>DocFX</strong></span><script type="text/javascript">(function(m,e,t,r,i,k,a){m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};m[i].l=1*new Date();k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)})(window, document, "script", "https://mc.yandex.ru/metrika/tag.js", "ym");ym(65150713, "init", {clickmap:true,trackLinks:true,accurateTrackBounce:true});</script><noscript><div><img src="https://mc.yandex.ru/watch/65150713" style="position:absolute; left:-9999px;" alt=""></div></noscript>
            
          </div>
        </div>
      </footer>
    </div>
    
    <script type="text/javascript" src="../../../styles/docfx.vendor.js"></script>
    <script type="text/javascript" src="../../../styles/docfx.js"></script>
    <script type="text/javascript" src="../../../styles/main.js"></script>
  </body>
</html>
