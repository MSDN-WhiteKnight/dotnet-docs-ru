<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>&#1055;&#1086;&#1096;&#1072;&#1075;&#1086;&#1074;&#1086;&#1077; &#1088;&#1091;&#1082;&#1086;&#1074;&#1086;&#1076;&#1089;&#1090;&#1074;&#1086;. &#1057;&#1086;&#1079;&#1076;&#1072;&#1085;&#1080;&#1077; &#1087;&#1088;&#1086;&#1092;&#1077;&#1089;&#1089;&#1080;&#1086;&#1085;&#1072;&#1083;&#1100;&#1085;&#1086; &#1086;&#1092;&#1086;&#1088;&#1084;&#1083;&#1077;&#1085;&#1085;&#1086;&#1075;&#1086; &#1101;&#1083;&#1077;&#1084;&#1077;&#1085;&#1090;&#1072; &#1091;&#1087;&#1088;&#1072;&#1074;&#1083;&#1077;&#1085;&#1080;&#1103; ToolStrip | &#1053;&#1077;&#1086;&#1092;&#1080;&#1094;&#1080;&#1072;&#1083;&#1100;&#1085;&#1072;&#1103; &#1076;&#1086;&#1082;&#1091;&#1084;&#1077;&#1085;&#1090;&#1072;&#1094;&#1080;&#1103; .NET </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="&#1055;&#1086;&#1096;&#1072;&#1075;&#1086;&#1074;&#1086;&#1077; &#1088;&#1091;&#1082;&#1086;&#1074;&#1086;&#1076;&#1089;&#1090;&#1074;&#1086;. &#1057;&#1086;&#1079;&#1076;&#1072;&#1085;&#1080;&#1077; &#1087;&#1088;&#1086;&#1092;&#1077;&#1089;&#1089;&#1080;&#1086;&#1085;&#1072;&#1083;&#1100;&#1085;&#1086; &#1086;&#1092;&#1086;&#1088;&#1084;&#1083;&#1077;&#1085;&#1085;&#1086;&#1075;&#1086; &#1101;&#1083;&#1077;&#1084;&#1077;&#1085;&#1090;&#1072; &#1091;&#1087;&#1088;&#1072;&#1074;&#1083;&#1077;&#1085;&#1080;&#1103; ToolStrip | &#1053;&#1077;&#1086;&#1092;&#1080;&#1094;&#1080;&#1072;&#1083;&#1100;&#1085;&#1072;&#1103; &#1076;&#1086;&#1082;&#1091;&#1084;&#1077;&#1085;&#1090;&#1072;&#1094;&#1080;&#1103; .NET ">
    <meta name="generator" content="docfx 2.40.12.0">
    
    <link rel="shortcut icon" href="../../../favicon.ico">
    <link rel="stylesheet" href="../../../styles/docfx.vendor.css">
    <link rel="stylesheet" href="../../../styles/docfx.css">
    <link rel="stylesheet" href="../../../styles/main.css">
    <meta property="docfx:navrel" content="../../../toc.html">
    <meta property="docfx:tocrel" content="toc.html">
    
    
    
  </head>
  <body data-spy="scroll" data-target="#affix" data-offset="120">
    <div id="wrapper">
      <header>
        
        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              
              <a class="navbar-brand" href="../../../index.html">
                <img id="logo" class="svg" src="../../../logo.svg" alt="">
              </a>
            </div>
            <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="search">
                <div class="form-group">
                  <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                </div>
              </form>
            </div>
          </div>
        </nav>
        
        <div class="subnav navbar navbar-default">
          <div class="container hide-when-search" id="breadcrumb">
            <ul class="breadcrumb">
              <li></li>
            </ul>
          </div>
        </div>
      </header>
      <div role="main" class="container body-content hide-when-search">
        
        <div class="sidenav hide-when-search">
          <a class="btn toc-toggle collapse" data-toggle="collapse" href="#sidetoggle" aria-expanded="false" aria-controls="sidetoggle">Show / Hide Table of Contents</a>
          <div class="sidetoggle collapse" id="sidetoggle">
            <div id="sidetoc"></div>
          </div>
        </div>
        <div class="article row grid-right">
          <div class="col-md-10">
            <article class="content wrap" id="_content" data-uid="">
<h1 id="walkthrough-creating-a-professionally-styled-toolstrip-control">Пошаговое руководство. Создание профессионально оформленного элемента управления ToolStrip</h1>

<p>Можно предоставить приложения <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.forms.toolstrip">ToolStrip</a> управляет профессиональный вид и поведение, написав собственный класс, производный от <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.forms.toolstripprofessionalrenderer">ToolStripProfessionalRenderer</a> типа.</p>
<p>В этом пошаговом руководстве демонстрируется использование <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.forms.toolstrip">ToolStrip</a> элементы управления для создания составного элемента управления, которая напоминает <strong>редактируемую</strong> в Microsoft® Outlook®. В этом пошаговом руководстве показаны следующие задачи:</p>
<ul>
<li><p>Создание проекта библиотеки элементов управления Windows.</p>
</li>
<li><p>Проектирование StackView элемента управления.</p>
</li>
<li><p>Реализация пользовательского модуля отрисовки.</p>
</li>
</ul>
<p>Когда вы закончите, имеется элемент управления для повторного использования настраиваемых клиентских с профессиональный внешний вид элемента управления Microsoft Office® XP.</p>
<p>Чтобы скопировать код из этого раздела единым блоком, см. раздел <a href="how-to-create-a-professionally-styled-toolstrip-control.html">Практическое руководство. Создание профессионально оформленного элемента управления ToolStrip</a>.</p>
<div class="NOTE">
<h5>Note</h5>
<p>Отображаемые диалоговые окна и команды меню могут отличаться от описанных в справке в зависимости от текущих параметров или выпуска. Чтобы изменить параметры, выберите в меню <strong>Сервис</strong> пункт <strong>Импорт и экспорт параметров</strong> . Дополнительные сведения см. в разделе <a href="/visualstudio/ide/personalizing-the-visual-studio-ide">Персонализация интегрированной среды разработки Visual Studio</a>.</p>
</div>
<h2 id="prerequisites">Предварительные требования</h2>
<p>Для выполнения данного пошагового руководства требуется:</p>
<ul>
<li>Разрешения, необходимые для создания и выполнения проектов приложений Windows Forms на компьютере, на котором установлена Visual Studio.</li>
</ul>
<h2 id="creating-a-windows-control-library-project">Создание проекта библиотеки элементов управления Windows</h2>
<p>Первым шагом является создание проекта библиотеки элементов управления.</p>
<h4 id="to-create-the-control-library-project">Чтобы создать проект библиотеки элементов управления</h4>
<ol>
<li><p>Создайте новый проект библиотеки элементов управления Windows с именем <code>StackViewLibrary</code>.</p>
</li>
<li><p>В <strong>обозревателе решений</strong>, удалите элемент управления проекта по умолчанию, удаляя исходный файл с именем «UserControl1.cs» или «UserControl1.vb» в зависимости от выбранного языка.</p>
<p>Дополнительные сведения см. в разделе <a href="https://docs.microsoft.com/previous-versions/visualstudio/visual-studio-2010/0ebzhwsk(v=vs.100)">Как Удалить, удаление и исключить элементы</a>.</p>
</li>
<li><p>Добавьте новый <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.forms.usercontrol">UserControl</a> элемент <strong>StackViewLibrary</strong> проекта. Назовите новый исходный файл базового объекта <code>StackView</code>.</p>
</li>
</ol>
<h2 id="designing-the-stackview-control">Проектирование элемента управления StackView</h2>
<p><code>StackView</code> Элемент управления является составного элемента управления с одним дочерним <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.forms.toolstrip">ToolStrip</a> элемента управления. Дополнительные сведения о составных элементов управления, см. в разделе <a href="varieties-of-custom-controls.html">разновидности пользовательских элементов управления</a>.</p>
<h4 id="to-design-the-stackview-control">Чтобы разработать элемент управления StackView</h4>
<ol>
<li><p>Из <strong>элементов</strong>, перетащите <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.forms.toolstrip">ToolStrip</a> элемента управления в область конструктора.</p>
</li>
<li><p>В <strong>свойства</strong> окне <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.forms.toolstrip">ToolStrip</a> свойства элемента управления согласно следующей таблице.</p>
<table>
<thead>
<tr>
<th>Свойство</th>
<th>Значение</th>
</tr>
</thead>
<tbody>
<tr>
<td>name</td>
<td><code>stackStrip</code></td>
</tr>
<tr>
<td>CanOverflow</td>
<td><code>false</code></td>
</tr>
<tr>
<td>Закрепить</td>
<td><a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.forms.dockstyle#System_Windows_Forms_DockStyle_Bottom">Bottom</a></td>
</tr>
<tr>
<td>Шрифт</td>
<td><code>Tahoma, 10pt, style=Bold</code></td>
</tr>
<tr>
<td>Стиль захвата</td>
<td><a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.forms.toolstripgripstyle#System_Windows_Forms_ToolStripGripStyle_Hidden">Hidden</a></td>
</tr>
<tr>
<td>LayoutStyle</td>
<td><a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.forms.toolstriplayoutstyle#System_Windows_Forms_ToolStripLayoutStyle_VerticalStackWithOverflow">VerticalStackWithOverflow</a></td>
</tr>
<tr>
<td>Заполнение</td>
<td><code>0, 7, 0, 0</code></td>
</tr>
<tr>
<td>Отображается как</td>
<td><a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.forms.toolstriprendermode#System_Windows_Forms_ToolStripRenderMode_Professional">Professional</a></td>
</tr>
</tbody>
</table>
</li>
<li><p>В конструкторе Windows Forms, нажмите кнопку <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.forms.toolstrip">ToolStrip</a> элемента управления <strong>добавить</strong> и добавьте <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.forms.toolstripbutton">ToolStripButton</a> для <code>stackStrip</code> элемента управления.</p>
</li>
<li><p>В <strong>свойства</strong> окне <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.forms.toolstripbutton">ToolStripButton</a> свойства элемента управления согласно следующей таблице.</p>
<table>
<thead>
<tr>
<th>Свойство</th>
<th>Значение</th>
</tr>
</thead>
<tbody>
<tr>
<td>name</td>
<td><code>mailStackButton</code></td>
</tr>
<tr>
<td>CheckOnClick</td>
<td>true</td>
</tr>
<tr>
<td>Свойство CheckState</td>
<td><a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.forms.checkstate#System_Windows_Forms_CheckState_Checked">Checked</a></td>
</tr>
<tr>
<td>DisplayStyle</td>
<td><a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.forms.toolstripitemdisplaystyle#System_Windows_Forms_ToolStripItemDisplayStyle_ImageAndText">ImageAndText</a></td>
</tr>
<tr>
<td>ImageAlign</td>
<td><a class="xref" href="https://docs.microsoft.com/dotnet/api/system.drawing.contentalignment#System_Drawing_ContentAlignment_MiddleLeft">MiddleLeft</a></td>
</tr>
<tr>
<td>ImageScaling</td>
<td><a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.forms.toolstripitemimagescaling#System_Windows_Forms_ToolStripItemImageScaling_None">None</a></td>
</tr>
<tr>
<td>ImageTransparentColor</td>
<td><code>238, 238, 238</code></td>
</tr>
<tr>
<td>Поля</td>
<td><code>0, 0, 0, 0</code></td>
</tr>
<tr>
<td>Заполнение</td>
<td><code>3, 3, 3, 3</code></td>
</tr>
<tr>
<td>Текста</td>
<td><strong>Почта</strong></td>
</tr>
<tr>
<td>TextAlign</td>
<td><a class="xref" href="https://docs.microsoft.com/dotnet/api/system.drawing.contentalignment#System_Drawing_ContentAlignment_MiddleLeft">MiddleLeft</a></td>
</tr>
</tbody>
</table>
</li>
<li><p>Повторите шаг 7 для три раза <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.forms.toolstripbutton">ToolStripButton</a> элементов управления.</p>
<p>Присвоение имен элементам управления <code>calendarStackButton</code>, <code>contactsStackButton</code>, и <code>tasksStackButton</code>. Установите для параметра <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.forms.control.text">Text</a> свойства <strong>календаря</strong>, <strong>контакты</strong>, и <strong>задачи</strong>, соответственно.</p>
</li>
</ol>
<h2 id="handling-events">Обработка событий</h2>
<p>Важны два события сделать <code>StackView</code> корректного поведения элемента управления. Обрабатывать <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.forms.usercontrol.load">Load</a> событий, чтобы правильно разместить элемент управления. Обрабатывать <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.forms.toolstripitem.click">Click</a> событий для каждого <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.forms.toolstripbutton">ToolStripButton</a> для предоставления <code>StackView</code> управления поведением состояния, аналогичную <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.forms.radiobutton">RadioButton</a> элемента управления.</p>
<h4 id="to-handle-events">Для обработки событий</h4>
<ol>
<li><p>В конструкторе Windows Forms выберите <code>StackView</code> элемента управления.</p>
</li>
<li><p>В окне <strong>Свойства</strong> выберите <strong>События</strong>.</p>
</li>
<li><p>Дважды щелкните событие Load для создания <code>StackView_Load</code> обработчик событий.</p>
</li>
<li><p>Скопируйте и вставьте в обработчике события <code>StackView_Load</code> следующий код.</p>
<pre><code class="lang-csharp" name="System.Windows.Forms.ToolStrip.StackView#3">// This method handles the Load event for the UserControl.
private void StackView_Load(object sender, EventArgs e)
{
    // Dock bottom.
    this.Dock = DockStyle.Bottom;

    // Set AutoSize.
    this.AutoSize = true;
}
</code></pre></li>
<li><p>В конструкторе Windows Forms выберите <code>mailStackButton</code> элемента управления.</p>
</li>
<li><p>В окне <strong>Свойства</strong> выберите <strong>События</strong>.</p>
</li>
<li><p>Дважды щелкните событие Click.</p>
<p>Конструктор Windows Forms создает <code>mailStackButton_Click</code> обработчик событий.</p>
</li>
<li><p>Переименуйте <code>mailStackButton_Click</code> в обработчике событий <code>stackButton_Click</code>.</p>
<p>Дополнительные сведения см. в разделе <a href="/visualstudio/ide/reference/rename">переименование рефакторинга кода символа</a>.</p>
</li>
<li><p>Вставьте следующий код в <code>stackButton_Click</code> обработчик событий.</p>
<pre><code class="lang-csharp" name="System.Windows.Forms.ToolStrip.StackView#4">// This method handles the Click event for all
// the ToolStripButton controls in the StackView.
private void stackButton_Click(object sender, EventArgs e)
{
    // Define a &quot;one of many&quot; state, similar to
    // the logic of a RadioButton control.
    foreach (ToolStripItem item in this.stackStrip.Items)
    {
        if ((item != sender) &amp;&amp;
            (item is ToolStripButton))
        {
            ((ToolStripButton)item).Checked = false;
        }
    }
}
</code></pre></li>
<li><p>В конструкторе Windows Forms выберите <code>calendarStackButton</code> элемента управления.</p>
</li>
<li><p>В <strong>свойства</strong> окна, задайте событие Click <code>stackButton_Click</code> обработчик событий.</p>
</li>
<li><p>Повторите шаги 10 и 11 for <code>contactsStackButton</code> и <code>tasksStackButton</code> элементов управления.</p>
</li>
</ol>
<h2 id="defining-icons">Определение значков</h2>
<p>Каждый <code>StackView</code> кнопка имеет значок. Для удобства каждый значок представлен как строка в кодировке Base64, которая десериализуется до <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.drawing.bitmap">Bitmap</a> создается из него. В рабочей среде данные растрового изображения хранятся в виде ресурса и значки отображаются в конструкторе Windows Forms. Дополнительные сведения см. в разделе <a href="https://docs.microsoft.com/previous-versions/visualstudio/visual-studio-2010/dff9f95f(v=vs.100)">Как Добавление фоновых изображений в формы Windows Forms</a>.</p>
<h4 id="to-define-icons">Чтобы определить значки</h4>
<ol>
<li><p>В редакторе кода вставьте следующий код в <code>StackView</code> определение класса. Этот код инициализирует точечные рисунки для <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.forms.toolstripbutton">ToolStripButton</a> значков.</p>
<pre><code class="lang-csharp" name="System.Windows.Forms.ToolStrip.StackView#2">private static Bitmap mailBmp;
private static Bitmap calendarBmp;
private static Bitmap contactsBmp;
private static Bitmap tasksBmp;

private static string mailBmpEnc = @&quot;Qk32BgAAAAAAADYAAAAoAAAA&quot;+
    &quot;GAAAABgAAAABABgAAAAAAAAAAADEDgAAxA4AAAAAAAAAAAAA7u7u7u7u&quot;+
    &quot;7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u&quot;+
    &quot;7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u&quot;+
    &quot;7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u&quot;+
    &quot;7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u&quot;+
    &quot;7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u&quot;+
    &quot;7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u&quot;+
    &quot;7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7uv4yFvouE&quot;+
    &quot;vYmDu4eBuYV/t4N9tYB7s355sXt3tntxsnhwsHZurXNsrHFrp21pomln&quot;+
    &quot;oGdlnmVjnWNi7u7u7u7u7u7u7u7u7u7uwY6H9N3C/vDa/ejM+tSp+cye&quot;+
    &quot;98OS9bqI87F/87KA8qt68KRy76Bu7phl7ZVi7JVi54xb0ntSoGVj7u7u&quot;+
    &quot;7u7u7u7u7u7u7u7uwo+Ix6WZ9ujb//bn/u/b/OfL++HA+9iv+tev+tSr&quot;+
    &quot;+tKo+cyg+Mic9b+S9LqM8al35ZZmoXBSoWdk7u7u7u7u7u7u7u7u7u7u&quot;+
    &quot;xZSN9ejayaOY9uvh//js/vXo/e/a/evS/OfL/OTF+927+9u1+tSq+tKl&quot;+
    &quot;+cqW8buFqHZa7JVdn2hm7u7u7u7u7u7u7u7u7u7uxZSN//ns9ercxqKV&quot;+
    &quot;+O7k//nw//fu//fr/vTl/u/c/uvU/eLB/N+7+tev8b6Hq3pe+Lh6/69q&quot;+
    &quot;oWpp7u7u7u7u7u7u7u7u7u7ux5eP//vv//vw9OncxKOX9+7m//v1//nz&quot;+
    &quot;//jx//bs/+7Z/erQ/eTC8syiqntg+M6a/9Oh/8CFom1s7u7u7u7u7u7u&quot;+
    &quot;7u7u7u7uypqS//z4//v28ebYza2evp6V7+Lb8uzl8+3l8uvk9Ore9ejZ&quot;+
    &quot;6NO/poVyt4xx5b2T/9ap/8ybpXFw7u7u7u7u7u7u7u7u7u7uzJ2V///8&quot;+
    &quot;7uPbzaye/fv6/fv5v6GTvKCQvJ+Nu5qIupmJt5uKsZWE+u3e+unYo4Jq&quot;+
    &quot;572O/9KjqHd17u7u7u7u7u7u7u7u7u7uzqCX7OHbzKud/fr58url5tnQ&quot;+
    &quot;5dfO5dfN5dfM5NbM49TI3Mq+3Mm93Mm8382/+unbrIJp57WGrH597u7u&quot;+
    &quot;7u7u7u7u7u7u7u7uz6GZ0LGj6uHa/fv67OLc6+Hb7eTd7ePd7eLb7eLb&quot;+
    &quot;7uPb9e7l9evk9uvj9+zh/PHlzr61r4VtsoWC7u7u7u7u7u7u7u7u7u7u&quot;+
    &quot;0aKXfdb/8uzn///////////////////////+//37/Pn3+fXv9fHp8+vl&quot;+
    &quot;8enk7uXe1si/L6f3tYeC7u7u7u7u7u7u7u7u7u7uy6mkdM3/+vf1////&quot;+
    &quot;/////////////////fz8/Pv69fPx7vDw7O/w2OfvxN/swt/thMXnK6ft&quot;+
    &quot;r4SC7u7u7u7u7u7u7u7u7u7u1KeevuX6nNf2rN/7nNz9h9X+b8z+VMb/&quot;+
    &quot;RsT/RsT/PsP/Obz7NLT2MbL0K6vuJ6XpKKfrLqrvr4J/7u7u7u7u7u7u&quot;+
    &quot;7u7u7u7u28jC0rSo0O36yOv7x+r7v+f8suP9o97+jtj+idn+htX/e83/&quot;+
    &quot;a8f/XcD/Tbn/SLf/R7b/rJKJ7u7u7u7u7u7u7u7u7u7u7u7u7u7u6ePi&quot;+
    &quot;07ew29zd1e/61O/60e77y+z8vun9reH+mNn+gdH/ccj/ZMP/Vr3/t7/C&quot;+
    &quot;uKCX7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u6uXk2b621rux1fH6&quot;+
    &quot;3fL61/L7y+/8u+f9pt7+jNT+cMn/XcH/rZyW1c3L7u7u7u7u7u7u7u7u&quot;+
    &quot;7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u6N/d07Op3d7f2/P60vD7xez8&quot;+
    &quot;r+H9k9X+kr/cv6Wb7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u&quot;+
    &quot;7u7u7u7u7u7u7u7u7u7u6uXk2L612cG31e73yOv7seL8uKWezLex7u7u&quot;+
    &quot;7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u&quot;+
    &quot;7u7u7u7u7u7u6eHg1LOpzaeayaqh4dvb7u7u7u7u7u7u7u7u7u7u7u7u&quot;+
    &quot;7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u&quot;+
    &quot;7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u&quot;;

private static string calendarBmpEnc = @&quot;Qk32BgAAAAAAADYAAAAo&quot;+
    &quot;AAAAGAAAABgAAAABABgAAAAAAAAAAADEDgAAxA4AAAAAAAAAAAAA7u7u&quot;+
    &quot;7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u&quot;+
    &quot;7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u&quot;+
    &quot;7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u&quot;+
    &quot;7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u&quot;+
    &quot;7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u&quot;+
    &quot;7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u&quot;+
    &quot;7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7uuKOUkXxqemNO&quot;+
    &quot;alM8YEgwYEgwYkoxYUgwYEgwY0szYkoxYEgwYEgwYEgwYEgwZEszYUgw&quot;+
    &quot;YEgwY0oyYUgwYEgwYEgw7u7u7u7uuqWW6tPE27qlxKCLu5d837OUzKGC&quot;+
    &quot;t41xsYpt37OUzKGCt41xrodq37OUzKGCt41xrodq37OUzKGCt41xrodq&quot;+
    &quot;Zk447u7u7u7uvKaX//fz/+3i/NvFwJl6/+nb/d3H+c+1vJV2/+HP/tW8&quot;+
    &quot;/MWluZJz/9vG/9Gw+8OfuJFy/86y/sKf97eSuJFyYEgw7u7u7u7uvaiZ&quot;+
    &quot;//j2//Hq/OTY0qiL/+7h/+TR/N3J0KWI/+TU/9vE/9S4zqOF/+LR/9zE&quot;+
    &quot;/sywzaKE/9e//8yt/sWizaKEYEgw7u7u7u7uv6qb//v5//j1//bx5Lug&quot;+
    &quot;//Ho//Dl/+nb5Lqg/+fZ/+LQ/97I5Lqf/+XU/+HN/9zF5Lqf/9bC/9S7&quot;+
    &quot;/9C05LqfYEgw7u7u7u7uwauc4bib1ayOxZyBvpd74LaY0qiKwJd7uJF1&quot;+
    &quot;4LWWz6WGvJJ2D0XuBTnjBjXQAiy8ACm137OUzKGCt41xrodqYEgw7u7u&quot;+
    &quot;7u7uxK6f//v6/Ozg/eHQx6CC/+/m+uHQ+tjDwpt9/+re/+DM/9O4I1Tz&quot;+
    &quot;/9zG/9O5/86wASu4/9fC98Sm87uYuJFyYEgw7u7u7u7uxrCh//39//n0&quot;+
    &quot;/One1qyQ//v4/vHn+uHR06mM//Pt/+rc/+HMPGr0/+TU/93H/9i/AzHJ&quot;+
    &quot;/+LP/9i++curzaKEYEgw7u7u7u7ux7Kj//39//38/fbw5Luh//z7/vj1&quot;+
    &quot;/uzh5Lug//fx//bv/+vgWoH2/+/m/+vd/+PQAzTa/+XU/+XU/97J5Lqf&quot;+
    &quot;YUkx7u7u7u7uybOk47yh3rab1q2SzaWL4bqe2a+SzKKHwpqA4bmd1q2O&quot;+
    &quot;x52CbY/5WYD3OWb0IFP0Aj3t4Lib06iJwJV5sopwYEgw7u7u7u7uzbep&quot;+
    &quot;//39//n1//Dn1a2S/vv6+uvh9+DPyqKG//Tt+eXX+eDSxJx//One+tzH&quot;+
    &quot;+dC3v5d6/9/K+9C1+8akuI9yalM97u7u7u7u0Lyu//39//r3//f03bWa&quot;+
    &quot;//7+/vXx+urg1q2R//f0/O3i+eTV06mM//fy/+7i+NfCz6WI/+zg/+DM&quot;+
    &quot;/9CzyZ6Adl5I7u7u7u7u0sCy//38//39//395L2j//7+//79/vn45L2j&quot;+
    &quot;//38//n2/vLr5L2j//37//n2/unf5L2j/+/l/+nc/+DN5L2jf2dS7u7u&quot;+
    &quot;7u7u6KaG6KaG6KSE56OB56B+55565pt25phy5ZVt5ZJp5I5k5Itf5Iha&quot;+
    &quot;44RV44FR4n5M4ntI4XhE23I812w00mkzyGAo7u7u7u7u6amK/93L/dfD&quot;+
    &quot;/9a+/s+2/syy/sis/sSl/cGh/byb/LeV+7SO+rCJ+auC+ad9+KN3+KBx&quot;+
    &quot;95xu95pq9pdn9pVkyGAo7u7u7u7u662P/+LQ/t/M/t3K/drG/dfC/dK8&quot;+
    &quot;/c63/Mqx/Mer+sKk+r6f+bqY+LaT+LGM96yG9qmA9aV69aB19J1w9Jps&quot;+
    &quot;yGAo7u7u7u7u7LKV7LKV662P6aeG56F/559855x45pp05pdw5ZRs5ZFo&quot;+
    &quot;5I5j5Itf5Ihb44VW44JS4n9O4nxK4XpG4XdC4XU/2Ws27u7u7u7upJqU&quot;+
    &quot;////pJqU////n5aQ////mZCL////kYmF////iIJ+////fnp2////dXJv&quot;+
    &quot;////bGpo////ZGNi////XV5c////7u7u7u7u7u7uICUg6enpICUg6enp&quot;+
    &quot;ICUg6enpICUg6enpICUg6enpICUg6enpICUg3t7eICUg0NDQICUgvb29&quot;+
    &quot;ICUguLi4ICUg7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u&quot;+
    &quot;7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u&quot;+
    &quot;7u7u&quot;;

private static string contactsBmpEnc = @&quot;Qk32BgAAAAAAADYAAAAo&quot;+
    &quot;AAAAGAAAABgAAAABABgAAAAAAAAAAADEDgAAxA4AAAAAAAAAAAAA7u7u&quot;+
    &quot;7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u&quot;+
    &quot;7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u&quot;+
    &quot;7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u&quot;+
    &quot;7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u&quot;+
    &quot;7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u&quot;+
    &quot;7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u&quot;+
    &quot;7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7uuqWWh3FeeWJN&quot;+
    &quot;alM8YEgwYEgwYEgwYEgwYEgwYEgwYEgwYEgwYEgwYEgwYEgwYEgwYEgw&quot;+
    &quot;YEgwYEgwYEgwYEgwYEgw7u7u7u7uuqWW//bx7t3T7trO7tfI79LB7865&quot;+
    &quot;8Mqy8MWq8cCi8buZ8raR8rKJ862C86l69KV09KFt9Z5o9Zxk9Zph9Zph&quot;+
    &quot;YEgw7u7u7u7uu6aX//n2//fy//Xv//Lr//Dn/+3j/+re/+ja/+XW/+LR&quot;+
    &quot;/+DN/93J/9rF/9jB/9W9/9O5/9G2/8+z/86x9ZphYEgw7u7u7u7uvKiZ&quot;+
    &quot;//z6//r30M/SGlmtA0uuA0WfAz+RATmHADV9zr23/+PTs4t1roRuqX1m&quot;+
    &quot;pHhgoXRcoXRcoXRc/9C09Z1mYEgw7u7u7u7uvqqb//79//z7FFe3N3rV&quot;+
    &quot;SYrkQ4XeA0OaGW3eC02nGkF4/+fZ/+TV/+LQ/9/M/9zI/9rE/9fA/9W8&quot;+
    &quot;/9O59KFtYEgw7u7u7u7uwKyd//////7+E1i3Z57pUZDoTY7nA0SbGGze&quot;+
    &quot;E2DIAzmD/+vfuZJ9s4t1roRuqX1mpHhgoXRcoXRc/9a99KV0YEgw7u7u&quot;+
    &quot;7u7uwq6f////////GF69gKvkX5flA0WeGW7iA0+3GWzgEk+j/+7l/+zh&quot;+
    &quot;/+nc/+bY/+TT/+HP/97L/9zH/9nD86t9YEgw7u7u7u7uxLCh////////&quot;+
    &quot;tcDPE1StGly1yNXZ+fryBVG5BkGOz8rK//LqvpiEuZJ9s4t1roRuqX1m&quot;+
    &quot;pHhgoXRc/93I87CHYEgw7u7u7u7uxrKk////////9fX1zdDTYWZsVFVW&quot;+
    &quot;YWFhBkunubzC//jz//Xw//Ps//Do/+7k/+vf/+jb/+bX/+PS/+DO8raR&quot;+
    &quot;YEgw7u7u7u7ux7Sm////////xMTEAAAAwcHBoqKihYWFVVVVn56d//r3&quot;+
    &quot;//j0//bx//Tt//Hp/+/l/+zh/+nd/+fY/+TU8b2cYEgw7u7u7u7uybao&quot;+
    &quot;////////ODg4LCws1tbWwcHBoqKihYWFZGRk//37//v5//n2//fy//Xv&quot;+
    &quot;//Lr//Dn/+3j/+re/+ja8MOmYEgw7u7u7u7uy7iq////////U1NTSUlJ&quot;+
    &quot;tLS01dXVwcHBoqKidXV1///+//38/LeL+7SI+q+D+ap++KV496Bz9p1w&quot;+
    &quot;/+vg8MmxZk437u7u7u7uzbqs////////fn5+Y2NjXV1dbW1tWFhYwcHB&quot;+
    &quot;hISE//////////79//z7//v4//n1//bx//Tu//Lq/+/m78+6b1dB7u7u&quot;+
    &quot;7u7uz7yu////////xcXFbGxsgoKCoaGhjo6OVVVVra2t/////////LeL&quot;+
    &quot;+7SI+q+D+ap++KV496Bz9p1w//Pr79TEeWJN7u7u7u7u0L6w////////&quot;+
    &quot;8vLyuLi4jY2NiIiIhYWFtLS08fHx//////////////////////38//z6&quot;+
    &quot;//r3//j0//bw7tnMgm1Z7u7u7u7u0b+x////////////////////////&quot;+
    &quot;//////////////////////////////////////79//z7//v4//n1//fy&quot;+
    &quot;i3Zj7u7u7u7u0sCy0b+x0L6wz72vzrutzLqsy7iqybeoyLWmxrOkxLGi&quot;+
    &quot;w6+hwa2fv6udvqmbvKiZu6aXuaWWuKOUt6KTtqGStaCR7u7u7u7u7u7u&quot;+
    &quot;7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u&quot;+
    &quot;7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u&quot;+
    &quot;7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u&quot;+
    &quot;7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u&quot;+
    &quot;7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u&quot;+
    &quot;7u7u&quot;;

private static string tasksBmpEnc = @&quot;Qk32BgAAAAAAADYAAAAoAAA&quot;+
    &quot;AGAAAABgAAAABABgAAAAAAAAAAADEDgAAxA4AAAAAAAAAAAAA7u7u7u7&quot;+
    &quot;u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7&quot;+
    &quot;u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7&quot;+
    &quot;u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7&quot;+
    &quot;u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7&quot;+
    &quot;u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7&quot;+
    &quot;u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7&quot;+
    &quot;u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u3N3fkXxqeGB&quot;+
    &quot;LalE5cVc/c1lBf2JKl3RZiWhMe1xBb1M5aE42Zkw0Zk01aE42YUkxYkk&quot;+
    &quot;xYkkxkod97u7u7u7u7u7u7u7u7u7uv62e+ezi69nQ7M6+7Miz6L+prI+&quot;+
    &quot;rWFKqmHyk7rWU77OO77CM8LCK8bCH8a2F8qp98aV13pZnZkwz7u7u7u7&quot;+
    &quot;u7u7u7u7u7u7uv62e//37/vr3/vTw+uvkwLnaJDO/BhmzJjTDybTG99K&quot;+
    &quot;8+NC49syy9sms9sao9cOl8LiV8KR0aU417u7u7u7u7u7u7u7u7u7uwK6&quot;+
    &quot;f//7+//z7/Pj3xcTmLDvBFynIMEXkIDbXVGHO6dHO+tzJ+tjD+dW++dK&quot;+
    &quot;5+c+19sWn8qd2Y0kx7u7u7u7u7u7u7u7u7u7uw7Gj/////Pv9wcTsKDj&quot;+
    &quot;FFCnMRVjuZHX1PlPoFzHSeHPJ+d3O+tzI+tjD+dS9+dG59seq8ayEaEw&quot;+
    &quot;07u7u7u7u7u7u7u7u7u7uxrWm9vf9pKzoJjjNGi7TR1nreoj/j5v8ZXf&quot;+
    &quot;0N0zlJjTPv7LP+t7O+tvI+tfC+dS998qv8K+LaU427u7u7u7u7u7u7u7&quot;+
    &quot;u7u7u08W619v5Kz7XJjrfTl/ze4v/tLr59/Dyoab2Znb0LUPmNUTO1sX&quot;+
    &quot;R+9/N+tvH+tjC99C277GNbVI47u7u7u7u7u7u7u7u7u7uy7qt6+3+kp7&quot;+
    &quot;4UGT4c4P/sbj+/Pr5/vj16ePykpz5Y3T0KDzfbHHR6dTS++HQ+tvG+dn&quot;+
    &quot;D8bqabVI57u7u7u7u7u7u7u7u7u7uybeo////9ff/qLL/wsr//Pz///3&quot;+
    &quot;8/vv5/ff09e7wpav4YnP0KDzajYzQ6NPT/N7O+NrG8b+idFlA7u7u7u7&quot;+
    &quot;u7u7u7u7u7u7uyriq////////+Pn//v7///////////38/vr2/vj08er&quot;+
    &quot;wmaL6WWvyMELXmJbS9OPb+d/Q88mxc1Y97u7u7u7u7u7u7u7u7u7uzLq&quot;+
    &quot;s//////////////////////////7+//36/vr3/vn0+fDvsLT1WmruNUb&quot;+
    &quot;Qta/V+uXX9M+6hWdP7u7u7u7u7u7u7u7u7u7uzryt///////////////&quot;+
    &quot;///////////////7+//79//v3/vj0+O7wurz0TV3sSFTS08fa9t7PmXl&quot;+
    &quot;h7u7u7u7u7u7u7u7u7u7uz72v/////////////////////fj1+Orh9uH&quot;+
    &quot;W89TD88+78sew9NK99drNm5/xVWbwYWvV6dzgrIlw7u7u7u7u7u7u7u7&quot;+
    &quot;u7u7u0L6w////////////////X4ycVYGSTHaIS21/SGN0SGJySF9vdnd&quot;+
    &quot;9pZWQ89TDt7n1TF3oZGvOuJ2L7u7u7u7u7u7u7u7u7u7u0b+x///////&quot;+
    &quot;/////////dJmou+Xsmd3ofs/fdcXVcMHSbrrNbbHCbHJ69dTD++3nw8H&quot;+
    &quot;uNUjqZGjJ7u7u7u7u7u7u7u7u7u7u0b+x////////////////i6q2pMn&quot;+
    &quot;StuzzYYycdLG+fs/ed8jaXY2eRl1t8uDU++je/O7mzsnmUFCX7u7u7u7&quot;+
    &quot;u7u7u7u7u7u7u0sCy////////////////3ufqdZuqx+30V3aFXoCPaZW&quot;+
    &quot;kjdDeTWx8v7Ko/vr2/fTv/fTu+/XxnZSu7u7u7u7u7u7u7u7u7u7u6ur&quot;+
    &quot;r2Mq/0b+x0L6wz72vyLeqc5qpoMHLxfD3v+zzruXvkMjVaX6GwK6ewrC&quot;+
    &quot;hwa+gwK6fv62e4OHi7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7&quot;+
    &quot;u7u7u5ObnfKa1eaOxcpyrcJWkboiW4+Pj7u7u7u7u7u7u7u7u7u7u7u7&quot;+
    &quot;u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7&quot;+
    &quot;u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u&quot;;

// Static constructor to initialize
// the form's static fields.
static StackView()
{
    // Create the static bitmaps from Base64 encoding.
    CreateBitmaps();
}

public StackView()
{
    this.InitializeComponent();

    // Assign icons to ToolStripButton controls.
    this.InitializeImages();

    // Set up renderers.
    this.stackStrip.Renderer = new StackRenderer();
}

// This utility method assigns icons to each
// ToolStripButton control.
private void InitializeImages()
{
    this.mailStackButton.Image = mailBmp;
    this.calendarStackButton.Image = calendarBmp;
    this.contactsStackButton.Image = contactsBmp;
    this.tasksStackButton.Image = tasksBmp;
}

// This utility method creates bitmaps for all the icons.
// It uses a utility method called DeserializeFromBase64
// to decode the Base64 image data.
private static void CreateBitmaps()
{
    mailBmp = DeserializeFromBase64(mailBmpEnc);
    calendarBmp = DeserializeFromBase64(calendarBmpEnc);
    contactsBmp = DeserializeFromBase64(contactsBmpEnc);
    tasksBmp = DeserializeFromBase64(tasksBmpEnc);
}

// This utility method cretes a bitmap from 
// a Base64-encoded string. 
internal static Bitmap DeserializeFromBase64(string data)
{
    // Decode the string and create a memory stream 
    // on the decoded string data.
    MemoryStream stream =
        new MemoryStream(Convert.FromBase64String(data));

    // Create a new bitmap from the stream.
    Bitmap b = new Bitmap(stream);

    return b;
}
</code></pre></li>
<li><p>Добавьте вызов <code>InitializeImages</code> метод в <code>StackView</code> конструктора класса.</p>
<pre><code class="lang-csharp" name="System.Windows.Forms.ToolStrip.StackView#5">public StackView()
{
    this.InitializeComponent();

    // Assign icons to ToolStripButton controls.
    this.InitializeImages();

    // Set up renderers.
    this.stackStrip.Renderer = new StackRenderer();
}
</code></pre></li>
</ol>
<h2 id="implementing-a-custom-renderer">Реализация пользовательского средства отрисовки</h2>
<p>Можно настроить большинство элементов <code>StackView</code> управления, реализовав класс, производный от <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.forms.toolstriprenderer">ToolStripRenderer</a> класса. В этой процедуре вы реализуете <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.forms.toolstripprofessionalrenderer">ToolStripProfessionalRenderer</a> класс, используемый для настройки захвата и изображения градиентного фона для <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.forms.toolstripbutton">ToolStripButton</a> элементов управления.</p>
<h4 id="to-implement-a-custom-renderer">Чтобы реализовать пользовательское средство отрисовки</h4>
<ol>
<li><p>Вставьте следующий код в <code>StackView</code> управлять определением.</p>
<p>Это определение для <code>StackRenderer</code> класс, переопределяющий <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.forms.toolstriprenderer.rendergrip">RenderGrip</a>, <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.forms.toolstriprenderer.rendertoolstripborder">RenderToolStripBorder</a>, и <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.forms.toolstriprenderer.renderbuttonbackground">RenderButtonBackground</a> методы для получения пользовательское оформление.</p>
<pre><code class="lang-csharp" name="System.Windows.Forms.ToolStrip.StackView#10">internal class StackRenderer : ToolStripProfessionalRenderer
{
    private static Bitmap titleBarGripBmp;
    private static string titleBarGripEnc = @&quot;Qk16AQAAAAAAADYAAAAoAAAAIwAAAAMAAAABABgAAAAAAAAAAADEDgAAxA4AAAAAAAAAAAAAuGMy+/n5+/n5uGMyuGMy+/n5+/n5uGMyuGMy+/n5+/n5uGMyuGMy+/n5+/n5uGMyuGMy+/n5+/n5uGMyuGMy+/n5+/n5uGMyuGMy+/n5+/n5uGMyuGMy+/n5+/n5uGMyuGMy+/n5+/n5ANj+RzIomHRh+/n5wm8/RzIomHRh+/n5wm8/RzIomHRh+/n5wm8/RzIomHRh+/n5wm8/RzIomHRh+/n5wm8/RzIomHRh+/n5wm8/RzIomHRh+/n5wm8/RzIomHRh+/n5wm8/RzIomHRh+/n5ANj+RzIoRzIozHtMzHtMRzIoRzIozHtMzHtMRzIoRzIozHtMzHtMRzIoRzIozHtMzHtMRzIoRzIozHtMzHtMRzIoRzIozHtMzHtMRzIoRzIozHtMzHtMRzIoRzIozHtMzHtMRzIoRzIozHtMANj+&quot;;

    // Define titlebar colors.
    private static Color titlebarColor1 = Color.FromArgb(89, 135, 214);
    private static Color titlebarColor2 = Color.FromArgb(76, 123, 204);
    private static Color titlebarColor3 = Color.FromArgb(63, 111, 194);
    private static Color titlebarColor4 = Color.FromArgb(50, 99, 184);
    private static Color titlebarColor5 = Color.FromArgb(38, 88, 174);
    private static Color titlebarColor6 = Color.FromArgb(25, 76, 164);
    private static Color titlebarColor7 = Color.FromArgb(12, 64, 154);
    private static Color borderColor = Color.FromArgb(0, 0, 128);

    static StackRenderer()
    {
        titleBarGripBmp = StackView.DeserializeFromBase64(titleBarGripEnc);
    }

    public StackRenderer()
    {
    }

    private void DrawTitleBar(Graphics g, Rectangle rect)
    {
        // Assign the image for the grip.
        Image titlebarGrip = titleBarGripBmp;

        // Fill the titlebar. 
        // This produces the gradient and the rounded-corner effect.
        g.DrawLine(new Pen(titlebarColor1), rect.X, rect.Y, rect.X + rect.Width, rect.Y);
        g.DrawLine(new Pen(titlebarColor2), rect.X, rect.Y + 1, rect.X + rect.Width, rect.Y + 1);
        g.DrawLine(new Pen(titlebarColor3), rect.X, rect.Y + 2, rect.X + rect.Width, rect.Y + 2);
        g.DrawLine(new Pen(titlebarColor4), rect.X, rect.Y + 3, rect.X + rect.Width, rect.Y + 3);
        g.DrawLine(new Pen(titlebarColor5), rect.X, rect.Y + 4, rect.X + rect.Width, rect.Y + 4);
        g.DrawLine(new Pen(titlebarColor6), rect.X, rect.Y + 5, rect.X + rect.Width, rect.Y + 5);
        g.DrawLine(new Pen(titlebarColor7), rect.X, rect.Y + 6, rect.X + rect.Width, rect.Y + 6);

        // Center the titlebar grip.
        g.DrawImage(
            titlebarGrip,
            new Point(rect.X + ((rect.Width / 2) - (titlebarGrip.Width / 2)),
            rect.Y + 1));
    }

    // This method handles the RenderGrip event.
    protected override void OnRenderGrip(ToolStripGripRenderEventArgs e)
    {
        DrawTitleBar(
            e.Graphics,
            new Rectangle(0, 0, e.ToolStrip.Width, 7));
    }

    // This method handles the RenderToolStripBorder event.
    protected override void OnRenderToolStripBorder(ToolStripRenderEventArgs e)
    {
        DrawTitleBar(
            e.Graphics,
            new Rectangle(0, 0, e.ToolStrip.Width, 7));
    }

    // This method handles the RenderButtonBackground event.
    protected override void OnRenderButtonBackground(ToolStripItemRenderEventArgs e)
    {
        Graphics g = e.Graphics;
        Rectangle bounds = new Rectangle(Point.Empty, e.Item.Size);

        Color gradientBegin = Color.FromArgb(203, 225, 252);
        Color gradientEnd = Color.FromArgb(125, 165, 224);

        ToolStripButton button = e.Item as ToolStripButton;
        if (button.Pressed || button.Checked)
        {
            gradientBegin = Color.FromArgb(254, 128, 62);
            gradientEnd = Color.FromArgb(255, 223, 154);
        }
        else if (button.Selected)
        {
            gradientBegin = Color.FromArgb(255, 255, 222);
            gradientEnd = Color.FromArgb(255, 203, 136);
        }

        using (Brush b = new LinearGradientBrush(
            bounds,
            gradientBegin,
            gradientEnd,
            LinearGradientMode.Vertical))
        {
            g.FillRectangle(b, bounds);
        }

        e.Graphics.DrawRectangle(
            SystemPens.ControlDarkDark,
            bounds);

        g.DrawLine(
            SystemPens.ControlDarkDark,
            bounds.X,
            bounds.Y,
            bounds.Width - 1,
            bounds.Y);

        g.DrawLine(
            SystemPens.ControlDarkDark,
            bounds.X,
            bounds.Y,
            bounds.X,
            bounds.Height - 1);

        ToolStrip toolStrip = button.Owner;
        ToolStripButton nextItem = button.Owner.GetItemAt(
            button.Bounds.X,
            button.Bounds.Bottom + 1) as ToolStripButton;

        if (nextItem == null)
        {
            g.DrawLine(
                SystemPens.ControlDarkDark,
                bounds.X,
                bounds.Height - 1,
                bounds.X + bounds.Width - 1,
                bounds.Height - 1);
        }
    }
}
</code></pre></li>
<li><p>В <code>StackView</code> конструктора элемента управления, создайте новый экземпляр класса <code>StackRenderer</code> класса и присвойте этот экземпляр <code>stackStrip</code> элемента управления <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.forms.toolstrip.renderer">Renderer</a> свойство.</p>
<pre><code class="lang-csharp" name="System.Windows.Forms.ToolStrip.StackView#5">public StackView()
{
    this.InitializeComponent();

    // Assign icons to ToolStripButton controls.
    this.InitializeImages();

    // Set up renderers.
    this.stackStrip.Renderer = new StackRenderer();
}
</code></pre></li>
</ol>
<h2 id="testing-the-stackview-control">Тестирование элемента управления StackView</h2>
<p><code>StackView</code> Элемент управления наследуется от <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.forms.usercontrol">UserControl</a> класса. Таким образом, можно проверить элемент управления с <strong>тестового контейнера UserControl</strong>. Дополнительные сведения см. в разделе <a href="how-to-test-the-run-time-behavior-of-a-usercontrol.html">Как Тестирование во время выполнения поведения элемента UserControl</a>.</p>
<h4 id="to-test-the-stackview-control">Чтобы протестировать элемент управления StackView</h4>
<ol>
<li><p>Нажмите клавишу F5, чтобы создать проект и запустить <strong>тестовом контейнере элементов управления</strong>.</p>
</li>
<li><p>Наведите указатель на кнопки <code>StackView</code> управления и нажмите кнопку для просмотра внешнего вида выбранного состояния.</p>
</li>
</ol>
<h2 id="next-steps">Следующие шаги</h2>
<p>В этом пошаговом руководстве вы создали повторно используемый пользовательский клиентский элемент управления с профессиональный внешний вид элемента управления Office XP. Можно использовать <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.forms.toolstrip">ToolStrip</a> семейства элементов управления, для многих других целей:</p>
<ul>
<li><p>Создать контекстное меню для элементов управления с <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.forms.contextmenustrip">ContextMenuStrip</a>. Дополнительные сведения см. в разделе <a href="contextmenu-component-overview-windows-forms.html">Общие сведения о компоненте ContextMenu</a>.</p>
</li>
<li><p>Создайте форму с автоматически заполненные стандартным меню. Дополнительные сведения см. в разделе <a href="walkthrough-providing-standard-menu-items-to-a-form.html">Пошаговое руководство: Создание стандартных пунктов меню для формы</a>.</p>
</li>
<li><p>Создайте форму многодокументного интерфейса (MDI) закрепленный <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.forms.toolstrip">ToolStrip</a> элементов управления. Дополнительные сведения см. в разделе <a href="how-to-create-an-mdi-form-with-menu-merging-and-toolstrip-controls.html">Как Создание формы MDI путем слияния меню и элементов управления ToolStrip</a>.</p>
</li>
</ul>
<h2 id="see-also">См. также</h2>
<ul>
<li><a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.forms.menustrip">MenuStrip</a></li>
<li><a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.forms.toolstrip">ToolStrip</a></li>
<li><a class="xref" href="https://docs.microsoft.com/dotnet/api/system.windows.forms.statusstrip">StatusStrip</a></li>
<li><a href="toolstrip-control-windows-forms.html">Элемент управления ToolStrip</a></li>
<li><a href="how-to-provide-standard-menu-items-to-a-form.html">Практическое руководство. Связывание с формой стандартных элементов меню</a></li>
</ul>
</article>
          </div>
          
          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">
              <div class="contribution">
                <ul class="nav">
                </ul>
              </div>
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
              <!-- <p><a class="back-to-top" href="#top">Back to top</a><p> -->
              </nav>
            </div>
          </div>
        </div>
      </div>
      
      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right">
              <a href="#top">Back to top</a>
            </span>
            <span><a href="https://github.com/MSDN-WhiteKnight/dotnet-docs-ru">Неофициальная документация по .NET на русском языке</a>. Лицензия: <a href="https://github.com/MSDN-WhiteKnight/dotnet-docs-ru/blob/main/LICENSE">CC-BY 4.0</a>. Основано на <a href="https://docs.microsoft.com/ru-ru/dotnet/">документации по .NET с Microsoft Docs</a><br>Generated by <strong>DocFX</strong></span><script type="text/javascript">(function(m,e,t,r,i,k,a){m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};m[i].l=1*new Date();k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)})(window, document, "script", "https://mc.yandex.ru/metrika/tag.js", "ym");ym(65150713, "init", {clickmap:true,trackLinks:true,accurateTrackBounce:true});</script><noscript><div><img src="https://mc.yandex.ru/watch/65150713" style="position:absolute; left:-9999px;" alt=""></div></noscript>
            
          </div>
        </div>
      </footer>
    </div>
    
    <script type="text/javascript" src="../../../styles/docfx.vendor.js"></script>
    <script type="text/javascript" src="../../../styles/docfx.js"></script>
    <script type="text/javascript" src="../../../styles/main.js"></script>
  </body>
</html>
